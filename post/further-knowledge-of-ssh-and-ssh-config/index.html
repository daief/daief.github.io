<!DOCTYPE html><html ssthtmlattrs="" lang="en"><head>
    <title>进一步认识 SSH 和 SSH config | Daief's Blog</title>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!--ssr-head-partial-->
    <script>
      if (/MSIE \d|Trident.*rv:/.test(navigator.userAgent)) {
        // redirect IE to Edge
        // This browser is no longer supported
        window.location.href = 'microsoft-edge:' + window.location.href;
        alert('请使用 Chrome/Edge/Firefox/Safari 等现代浏览器。');
        throw new Error('请使用 Chrome/Edge/Firefox/Safari 等现代浏览器。');
      }
    </script>
    <script type="module" crossorigin="" src="/assets/app-DvX1Smg_.js"></script>
    <link rel="stylesheet" crossorigin="" href="/assets/app-lBf8QYnm.css">
  <link rel="modulepreload" crossorigin="" href="/assets/vm__post_further-knowledge-of-ssh-and-ssh-config_-D8S3nd4e.js"><link rel="stylesheet" href="/assets/vm__post_further-knowledge-of-ssh-and-ssh-config_-BRSbTE1b.css"><link rel="modulepreload" crossorigin="" href="/assets/meta-info-C-tMy3g2.js"><link rel="modulepreload" crossorigin="" href="/assets/toc-DNILfFl5.js"><link rel="stylesheet" href="/assets/toc-m8VwwUnR.css"><meta name="description" content=""><meta property="og:title" content="进一步认识 SSH 和 SSH config | Daief's Blog"><meta property="og:description" content=""><meta property="og:image" content="https://avatars.githubusercontent.com/u/19222089?v=4"><meta name="author" content="daief"></head>
  <body ssrbodyattrs="">
    <div class="page-bg-gradient pointer-events-none fixed start-0 top-0 z-[-1] h-screen w-full"></div>
    <div id="app" data-server-rendered="true"><!--[--><div class="flex flex-col min-h-screen transition-colors duration-300"><header data-v-c69b61b1=""><div id="nav-container" class="max-w-app mx-auto text-foreground sm:bg-transparent" data-v-c69b61b1=""><div id="top-nav-wrap" class="relative grid grid-cols-2 auto-rows-auto w-full items-center justify-between p-4 sm:py-6 sm:flex sm:grid-rows-1" data-v-c69b61b1=""><a href="/" class="py-1 text-xl leading-8 font-semibold whitespace-nowrap sm:my-auto sm:text-2xl sm:leading-none" data-v-c69b61b1=""><!--[-->Daief's Blog<!--]--></a><div class="flex-center justify-end space-x-4 sm:hidden" data-v-c69b61b1=""><button class="cursor-pointer relative" data-v-c69b61b1=""><div class="w-10 h-6 rounded-3xl border-[3px] border-[#d1d5da] transition-300 dark:border-[#6E40C9]"><div class="absolute top-1/2 -left-0.5 transform -translate-y-1/2 transition-300 w-[28px] h-[28px] bg-[#2f363d] rounded-full flex-center dark:bg-[#6E40C9] dark:left-[calc(100%-28px+2px)]"><span class="text-[16px]"><!--?xml version="1.0" standalone="no"?-->
<svg t="1761650889094" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="2362" xmlns:xlink="http://www.w3.org/1999/xlink" width="1em" height="1em">
  <path d="M554.632 298.914h-85.264c-11.782 0-21.344-9.546-21.344-21.328s9.562-21.328 21.344-21.328h85.264c11.81 0 21.374 9.546 21.374 21.328s-9.562 21.328-21.374 21.328z" fill="#F6BB42" p-id="2363"></path>
  <path d="M810.562 725.43c-282.664 0-511.812-229.164-511.812-511.826 0-63.53 11.594-124.372 32.748-180.51C137.91 106.076 0.196 293.04 0.196 512.172c0 282.662 229.15 511.812 511.828 511.812 219.102 0 406.096-137.714 479.034-331.302-56.126 21.156-116.934 32.748-180.496 32.748z" fill="#FFCE54" p-id="2364"></path>
  <path d="M554.632 981.328c-282.632 0-511.78-229.148-511.78-511.812 0-130.434 48.81-249.476 129.122-339.848C66.6 223.416 0.196 360.02 0.196 512.172c0 282.662 229.15 511.812 511.828 511.812 152.106 0 288.726-66.406 382.47-171.806-90.368 80.368-209.43 129.15-339.862 129.15z" fill="#F6BB42" p-id="2365"></path>
  <path d="M767.938 277.586c0 11.782-9.562 21.328-21.376 21.328-11.75 0-21.312-9.546-21.312-21.328s9.562-21.328 21.312-21.328c11.814 0 21.376 9.546 21.376 21.328z" fill="#4A89DC" p-id="2366"></path>
  <path d="M661.316 490.844c0 11.766-9.562 21.328-21.374 21.328-11.75 0-21.312-9.562-21.312-21.328 0-11.782 9.562-21.328 21.312-21.328 11.812 0 21.374 9.546 21.374 21.328z" fill="#48CFAD" p-id="2367"></path>
  <path d="M1023.804 234.586c0 11.782-9.562 21.328-21.312 21.328-11.748 0-21.31-9.546-21.31-21.328 0-11.78 9.562-21.326 21.31-21.326 11.75 0 21.312 9.546 21.312 21.326z" fill="#ED5564" p-id="2368"></path>
  <path d="M639.944 21.328c0 11.782-9.5 21.328-21.312 21.328-11.75 0-21.312-9.546-21.312-21.328 0-11.766 9.562-21.312 21.312-21.312a21.288 21.288 0 0 1 21.312 21.312z" fill="#AC92EB" p-id="2369"></path>
  <path d="M512.024 192.276c-11.782 0-21.344 9.562-21.344 21.328v127.964c0 11.766 9.562 21.312 21.344 21.312 11.75 0 21.312-9.546 21.312-21.312v-127.964c0-11.766-9.562-21.328-21.312-21.328z" fill="#FFCE54" p-id="2370"></path>
  <path d="M874.56 426.862c-11.812 0-21.312 9.546-21.312 21.328v127.934c0 11.812 9.5 21.344 21.312 21.344 11.748 0 21.308-9.532 21.308-21.344v-127.934c0.002-11.78-9.56-21.328-21.308-21.328z" fill="#F6BB42" p-id="2371"></path>
  <path d="M917.182 533.484h-85.306c-11.75 0-21.312-9.546-21.312-21.312 0-11.782 9.562-21.328 21.312-21.328h85.306c11.812 0 21.312 9.546 21.312 21.328 0 11.766-9.5 21.312-21.312 21.312z" fill="#FFCE54" p-id="2372"></path>
</svg>
</span></div></div></button><a role="button" class="text-2xl p-1" data-v-c69b61b1=""><svg class="iconify-svg block" viewBox="0 0 24 24" width="1.2em" height="1.2em" data-v-c69b61b1=""><path fill="currentColor" d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"></path></svg></a></div><nav id="nav-menu" class="col-start-1 col-end-3 w-full flex-col items-center static top-full left-0 right-0 z-10 mt-4 sm:mt-0 sm:ms-2 sm:flex-row sm:justify-end sm:space-x-4 sm:py-0 sm:flex hidden" data-v-c69b61b1=""><ul id="menu-items" class="w-full place-content-center gap-2 sm:flex sm:w-auto sm:gap-x-5 sm:gap-y-0" data-v-c69b61b1=""><!--[--><li class="col-span-2" data-v-c69b61b1=""><a href="/" class="flex justify-center items-center h-full px-4 py-3 font-medium hover:text-accent sm:px-2 sm:py-1 nav-active" data-v-c69b61b1=""><!--[-->文章<!--]--></a></li><li class="col-span-2" data-v-c69b61b1=""><a href="/tags/" class="flex justify-center items-center h-full px-4 py-3 font-medium hover:text-accent sm:px-2 sm:py-1" data-v-c69b61b1=""><!--[-->标签<!--]--></a></li><li class="col-span-2" data-v-c69b61b1=""><a href="/about/" class="flex justify-center items-center h-full px-4 py-3 font-medium hover:text-accent sm:px-2 sm:py-1" data-v-c69b61b1=""><!--[-->关于<!--]--></a></li><!--]--><li class="col-span-1 hidden sm:block" data-v-c69b61b1=""><a class="flex justify-center items-center h-full px-4 py-3 sm:px-2 sm:py-1" data-v-c69b61b1=""><button class="cursor-pointer relative" data-v-c69b61b1=""><div class="w-10 h-6 rounded-3xl border-[3px] border-[#d1d5da] transition-300 dark:border-[#6E40C9]"><div class="absolute top-1/2 -left-0.5 transform -translate-y-1/2 transition-300 w-[28px] h-[28px] bg-[#2f363d] rounded-full flex-center dark:bg-[#6E40C9] dark:left-[calc(100%-28px+2px)]"><span class="text-[16px]"><!--?xml version="1.0" standalone="no"?-->
<svg t="1761650889094" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="2362" xmlns:xlink="http://www.w3.org/1999/xlink" width="1em" height="1em">
  <path d="M554.632 298.914h-85.264c-11.782 0-21.344-9.546-21.344-21.328s9.562-21.328 21.344-21.328h85.264c11.81 0 21.374 9.546 21.374 21.328s-9.562 21.328-21.374 21.328z" fill="#F6BB42" p-id="2363"></path>
  <path d="M810.562 725.43c-282.664 0-511.812-229.164-511.812-511.826 0-63.53 11.594-124.372 32.748-180.51C137.91 106.076 0.196 293.04 0.196 512.172c0 282.662 229.15 511.812 511.828 511.812 219.102 0 406.096-137.714 479.034-331.302-56.126 21.156-116.934 32.748-180.496 32.748z" fill="#FFCE54" p-id="2364"></path>
  <path d="M554.632 981.328c-282.632 0-511.78-229.148-511.78-511.812 0-130.434 48.81-249.476 129.122-339.848C66.6 223.416 0.196 360.02 0.196 512.172c0 282.662 229.15 511.812 511.828 511.812 152.106 0 288.726-66.406 382.47-171.806-90.368 80.368-209.43 129.15-339.862 129.15z" fill="#F6BB42" p-id="2365"></path>
  <path d="M767.938 277.586c0 11.782-9.562 21.328-21.376 21.328-11.75 0-21.312-9.546-21.312-21.328s9.562-21.328 21.312-21.328c11.814 0 21.376 9.546 21.376 21.328z" fill="#4A89DC" p-id="2366"></path>
  <path d="M661.316 490.844c0 11.766-9.562 21.328-21.374 21.328-11.75 0-21.312-9.562-21.312-21.328 0-11.782 9.562-21.328 21.312-21.328 11.812 0 21.374 9.546 21.374 21.328z" fill="#48CFAD" p-id="2367"></path>
  <path d="M1023.804 234.586c0 11.782-9.562 21.328-21.312 21.328-11.748 0-21.31-9.546-21.31-21.328 0-11.78 9.562-21.326 21.31-21.326 11.75 0 21.312 9.546 21.312 21.326z" fill="#ED5564" p-id="2368"></path>
  <path d="M639.944 21.328c0 11.782-9.5 21.328-21.312 21.328-11.75 0-21.312-9.546-21.312-21.328 0-11.766 9.562-21.312 21.312-21.312a21.288 21.288 0 0 1 21.312 21.312z" fill="#AC92EB" p-id="2369"></path>
  <path d="M512.024 192.276c-11.782 0-21.344 9.562-21.344 21.328v127.964c0 11.766 9.562 21.312 21.344 21.312 11.75 0 21.312-9.546 21.312-21.312v-127.964c0-11.766-9.562-21.328-21.312-21.328z" fill="#FFCE54" p-id="2370"></path>
  <path d="M874.56 426.862c-11.812 0-21.312 9.546-21.312 21.328v127.934c0 11.812 9.5 21.344 21.312 21.344 11.748 0 21.308-9.532 21.308-21.344v-127.934c0.002-11.78-9.56-21.328-21.308-21.328z" fill="#F6BB42" p-id="2371"></path>
  <path d="M917.182 533.484h-85.306c-11.75 0-21.312-9.546-21.312-21.312 0-11.782 9.562-21.328 21.312-21.328h85.306c11.812 0 21.312 9.546 21.312 21.328 0 11.766-9.5 21.312-21.312 21.312z" fill="#FFCE54" p-id="2372"></path>
</svg>
</span></div></div></button></a></li></ul></nav></div></div><div class="mx-auto max-w-app px-4" data-v-c69b61b1=""><hr class="border-border" aria-hidden="true" data-v-c69b61b1=""></div></header><main class="flex-grow max-w-app mx-auto px-4 py-8 w-full text-foreground"><!--[--><div class="relative" data-v-a2d68e58=""><article data-v-a2d68e58=""><header data-v-a2d68e58=""><h1 class="text-foreground text-3xl font-bold mb-4" data-v-a2d68e58=""> 进一步认识 SSH 和 SSH config </h1><div class="flex items-center gap-x-3.5 gap-y-0.5 text-foreground opacity-80 flex-wrap" data-v-a2d68e58=""><!--[--><!--[--><div class="inline-flex items-center gap-x-0.5 whitespace-nowrap"><svg class="iconify-svg block" viewBox="0 0 24 24" width="1.2em" height="1.2em"><path fill="currentColor" d="M7 11h2v2H7zm14-6v14c0 1.11-.89 2-2 2H5a2 2 0 0 1-2-2V5c0-1.1.9-2 2-2h1V1h2v2h8V1h2v2h1a2 2 0 0 1 2 2M5 7h14V5H5zm14 12V9H5v10zm-4-6v-2h2v2zm-4 0v-2h2v2zm-4 2h2v2H7zm8 2v-2h2v2zm-4 0v-2h2v2z"></path></svg><span>发表于：<time datetime="2022-12-22T10:53:04.000Z">2022/12/22</time></span></div><!--[--><a href="/tags/SSH/1/" class="inline-flex items-center foreground-link"><svg class="iconify-svg block select-none mr-0.5 text-foreground" viewBox="0 0 24 24" width="1.2em" height="1.2em"><path fill="currentColor" d="m5.41 21l.71-4h-4l.35-2h4l1.06-6h-4l.35-2h4l.71-4h2l-.71 4h6l.71-4h2l-.71 4h4l-.35 2h-4l-1.06 6h4l-.35 2h-4l-.71 4h-2l.71-4h-6l-.71 4zM9.53 9l-1.06 6h6l1.06-6z"></path></svg>SSH</a><!--]--><!--]--><!--]--></div></header><div class="md-prose max-w-none dark:prose-invert mt-6" data-v-a2d68e58=""><!--[--><p data-v-a2d68e58="">不知道有多少人和我一样，对 SSH key 的接触起始于 Git 的使用，反正是啥也不懂，跟着教程一顿敲：</p><pre class="shiki shiki-themes min-light night-owl" style="--shiki-light:#24292eff;--shiki-dark:#d6deeb;--shiki-light-bg:#ffffff;--shiki-dark-bg:#011627;" tabindex="0" data-v-a2d68e58=""><code data-v-a2d68e58=""><span class="line" data-v-a2d68e58=""><span style="--shiki-light:#6F42C1;--shiki-light-font-style:inherit;--shiki-dark:#82AAFF;--shiki-dark-font-style:italic;" data-v-a2d68e58="">$</span><span style="--shiki-light:#2B5581;--shiki-dark:#ECC48D;" data-v-a2d68e58=""> ssh-keygen</span><span style="--shiki-light:#2B5581;--shiki-dark:#82AAFF;" data-v-a2d68e58=""> -t</span><span style="--shiki-light:#2B5581;--shiki-dark:#ECC48D;" data-v-a2d68e58=""> rsa</span><span style="--shiki-light:#2B5581;--shiki-dark:#82AAFF;" data-v-a2d68e58=""> -b</span><span style="--shiki-light:#1976D2;--shiki-dark:#F78C6C;" data-v-a2d68e58=""> 2048</span><span style="--shiki-light:#2B5581;--shiki-dark:#82AAFF;" data-v-a2d68e58=""> -C</span><span style="--shiki-light:#22863A;--shiki-dark:#D9F5DD;" data-v-a2d68e58=""> "</span><span style="--shiki-light:#22863A;--shiki-dark:#ECC48D;" data-v-a2d68e58="">xxxxxxxxxx@qq.com</span><span style="--shiki-light:#22863A;--shiki-dark:#D9F5DD;" data-v-a2d68e58="">"</span></span></code></pre><p data-v-a2d68e58="">一路回车，然后把 <code data-v-a2d68e58="">id_rsa.pub</code> 的内容填入到 Github/Gitlab 的设置里，就转头去使用 Git 了。</p><a id="more" href="#more" class="block" data-v-a2d68e58=""></a><h2 id="SSH" data-v-a2d68e58="">SSH<a name="SSH" class="headerlink" href="#SSH" data-v-a2d68e58=""></a></h2><p data-v-a2d68e58="">先说 SSH，SSH（Secure Shell）是一种安全的网络协议，用于在网络上远程连接和管理计算机系统。它可以加密数据并确保数据传输的完整性，从而提供了一种安全的远程访问方式。</p><p data-v-a2d68e58="">通过使用 SSH，用户可以从本地计算机连接到远程计算机并在远程计算机上执行各种操作，例如查看、编辑和上传文件，安装软件，启动服务等等。SSH 还支持端口转发，允许用户通过 SSH 隧道访问本地网络资源，从而增强了网络安全性。</p><p data-v-a2d68e58="">SSH 协议使用公钥加密技术，使得数据传输过程中即使被窃听也不会被破解。同时，SSH 协议还提供了认证机制，确保只有授权用户才能访问远程计算机系统。</p><p data-v-a2d68e58="">由于其安全性和可靠性，SSH 已经成为远程管理和文件传输中最常用的协议之一，广泛应用于 Linux 和其他 Unix 系统中。</p><p data-v-a2d68e58="">在 Windows 上，可以通过安装 OpenSSH 以获得 SSH 的服务端/客户端能力。</p><h3 id="SSH%20key" data-v-a2d68e58="">SSH key<a name="SSH%20key" class="headerlink" href="#SSH%20key" data-v-a2d68e58=""></a></h3><p data-v-a2d68e58="">开头命令生成的内容就是 SSH key，公密钥组成一对，用于 SSH 连接，<code data-v-a2d68e58="">id_rsa.pub</code> 就是公钥，<code data-v-a2d68e58="">id_rsa</code> 是私钥，需要妥善保管。</p><blockquote data-v-a2d68e58=""><p data-v-a2d68e58="">公钥加密技术也称非对称式密码学，它需要两个密钥，一个是公开密钥，另一个是私有密钥；公钥用作加密，私钥则用作解密。使用公钥把明文加密后所得的密文，只能用相对应的私钥才能解密并得到原本的明文，最初用来加密的公钥不能用作解密。由于加密和解密需要两个不同的密钥，故被称为非对称加密；不同于加密和解密都使用同一个密钥的对称加密。公钥可以公开，可任意向外发布；私钥不可以公开，必须由用户自行严格秘密保管，绝不透过任何途径向任何人提供，也不会透露给被信任的要通讯的另一方。</p></blockquote><p data-v-a2d68e58="">前文只体现了非对称加密，但私钥从未暴露过，服务端是如何解密数据的呢？其实非对称加密只用于身份认证阶段，当建立了安全连接只会，数据都是通过对称加密传输的。这与加密方式的特性也有关系：</p><ul data-v-a2d68e58=""><li data-v-a2d68e58="">非对称加密：加密和解密需要两个不同的密钥，故被称为非对称加密；私钥不需要公开，加密效率较低</li><li data-v-a2d68e58="">对称加密：加密和解密都使用同一个密钥，密钥需要经过网络传输，加密效率高</li></ul><h3 id="%E8%AE%A4%E8%AF%81%E8%BF%87%E7%A8%8B" data-v-a2d68e58="">认证过程<a name="%E8%AE%A4%E8%AF%81%E8%BF%87%E7%A8%8B" class="headerlink" href="#%E8%AE%A4%E8%AF%81%E8%BF%87%E7%A8%8B" data-v-a2d68e58=""></a></h3><p data-v-a2d68e58="">SSH 连接有两种认证方式：密码认证和密钥认证，下面分别是两种方式的认证流程。</p><p data-v-a2d68e58=""><strong data-v-a2d68e58="">密码认证：</strong></p><pre class="mermaid" data-v-a2d68e58="">%%{init: {'theme':'forest'}}%%
sequenceDiagram
  participant C as 客户端
  participant S as 服务端
  C -&gt;&gt; S: 发送连接请求（ssh root@x.x.x.x）

  S -&gt;&gt; C: 发送服务端的公钥给客户端

  Note left of C: 输入用户名 &amp; 密码，<br data-v-a2d68e58="">使用服务端公钥加密信息
  C -&gt;&gt; S: 将密文发送回服务端

  Note right of S: 服务度用自己的私钥解密并校验，通过则建立连接</pre><p data-v-a2d68e58=""><strong data-v-a2d68e58="">密钥认证（免密登录）：</strong></p><pre class="mermaid" data-v-a2d68e58="">%%{init: {'theme':'forest'}}%%
sequenceDiagram
  participant C as 客户端
  participant S as 服务端
  Note left of C: 生成一对密钥，并将公钥上传到服务端，<br data-v-a2d68e58="">保存到 ~/.ssh/authorized_keys 中
  C -&gt;&gt; S: 发送连接请求（ssh root@x.x.x.x）

  Note right of S: 服务端验证公钥是否存在，<br data-v-a2d68e58="">存在则发送随机字符串（challenge）
  S -&gt;&gt; C: 发送通过公钥加密字符串后的密文

  Note left of C: 使用私钥解密密文，得到 challenge
  C -&gt;&gt; S: 将结果发送给服务端

  Note right of S: 校验通过，建立连接</pre><p data-v-a2d68e58="">当第一次登录某台服务器的时候，会出现如下提示：</p><pre class="shiki shiki-themes min-light night-owl" style="--shiki-light:#24292eff;--shiki-dark:#d6deeb;--shiki-light-bg:#ffffff;--shiki-dark-bg:#011627;" tabindex="0" data-v-a2d68e58=""><code data-v-a2d68e58=""><span class="line" data-v-a2d68e58=""><span style="--shiki-light:#6F42C1;--shiki-light-font-style:inherit;--shiki-dark:#82AAFF;--shiki-dark-font-style:italic;" data-v-a2d68e58="">The</span><span style="--shiki-light:#2B5581;--shiki-dark:#ECC48D;" data-v-a2d68e58=""> authenticity</span><span style="--shiki-light:#2B5581;--shiki-dark:#ECC48D;" data-v-a2d68e58=""> of</span><span style="--shiki-light:#2B5581;--shiki-dark:#ECC48D;" data-v-a2d68e58=""> host</span><span style="--shiki-light:#22863A;--shiki-dark:#D9F5DD;" data-v-a2d68e58=""> '</span><span style="--shiki-light:#22863A;--shiki-dark:#ECC48D;" data-v-a2d68e58="">x.x.x.x (x.x.x.x)</span><span style="--shiki-light:#22863A;--shiki-dark:#D9F5DD;" data-v-a2d68e58="">'</span><span style="--shiki-light:#2B5581;--shiki-dark:#ECC48D;" data-v-a2d68e58=""> can</span><span style="--shiki-light:#22863A;--shiki-dark:#D9F5DD;" data-v-a2d68e58="">'</span><span style="--shiki-light:#22863A;--shiki-dark:#ECC48D;" data-v-a2d68e58="">t be established.</span></span>
<span class="line" data-v-a2d68e58=""><span style="--shiki-light:#22863A;--shiki-dark:#ECC48D;" data-v-a2d68e58="">ED25519 key fingerprint is SHA256:mewI2GS1WD86ckuE89JPn4CpljUqGngkQD4slRogDQE.</span></span>
<span class="line" data-v-a2d68e58=""><span style="--shiki-light:#22863A;--shiki-dark:#ECC48D;" data-v-a2d68e58="">This key is not known by any other names</span></span></code></pre><p data-v-a2d68e58="">这段话的意思是，无法确认 host 主机的真实性，只知道它的公钥指纹，是否继续连接？为什么会存在这个提示，是因为存在中间人攻击。</p><blockquote data-v-a2d68e58=""><p data-v-a2d68e58="">中间人攻击：</p><p data-v-a2d68e58="">这个过程本身是安全的，但是实施的时候存在一个风险：如果有人截获了登录请求，然后冒充远程主机，将伪造的公钥发给用户，那么用户很难辨别真伪。因为不像 https 协议，SSH 协议的公钥是没有证书中心（CA）公证的，也就是说，都是自己签发的。</p><p data-v-a2d68e58="">可以设想，如果攻击者插在用户与远程主机之间（比如在公共的 wifi 区域），用伪造的公钥，获取用户的登录密码。再用这个密码登录远程主机，那么 SSH 的安全机制就荡然无存了。这种风险就是著名的中间人攻击。</p></blockquote><p data-v-a2d68e58="">所以用户需要根据指纹来确定是否连接到了正确的主机，如果指纹不一致，就需要终止连接。</p><p data-v-a2d68e58="">又一个问题就是，用户怎么知道远程主机的公钥指纹应该是多少？回答是没有好办法，远程主机必须在自己的网站上贴出公钥指纹，以便用户自行核对。</p><p data-v-a2d68e58="">用户确认之后，继续并完成连接后，该主机以及公钥信息就会保存在 <code data-v-a2d68e58="">~/.ssh/known_hosts</code>，后续连接也将不再出现提示：</p><pre class="shiki shiki-themes min-light night-owl" style="--shiki-light:#24292eff;--shiki-dark:#d6deeb;--shiki-light-bg:#ffffff;--shiki-dark-bg:#011627;" tabindex="0" data-v-a2d68e58=""><code data-v-a2d68e58=""><span class="line" data-v-a2d68e58=""><span style="--shiki-light:#6F42C1;--shiki-light-font-style:inherit;--shiki-dark:#82AAFF;--shiki-dark-font-style:italic;" data-v-a2d68e58="">Warning:</span><span style="--shiki-light:#2B5581;--shiki-dark:#ECC48D;" data-v-a2d68e58=""> Permanently</span><span style="--shiki-light:#2B5581;--shiki-dark:#ECC48D;" data-v-a2d68e58=""> added</span><span style="--shiki-light:#22863A;--shiki-dark:#D9F5DD;" data-v-a2d68e58=""> '</span><span style="--shiki-light:#22863A;--shiki-dark:#ECC48D;" data-v-a2d68e58="">x.x.x.x</span><span style="--shiki-light:#22863A;--shiki-dark:#D9F5DD;" data-v-a2d68e58="">'</span><span style="--shiki-light:#24292EFF;--shiki-dark:#D6DEEB;" data-v-a2d68e58=""> (ED25519) to the list of known hosts.</span></span></code></pre><h2 id="Git" data-v-a2d68e58="">Git<a name="Git" class="headerlink" href="#Git" data-v-a2d68e58=""></a></h2><p data-v-a2d68e58="">再次回到开头的命令，命令的含义是指定使用 RSA 算法、长度 2048 生成一对密钥，<code data-v-a2d68e58="">-C</code> 是可选的，指定注释信息，内容会追加在公钥后面：</p><pre class="shiki shiki-themes min-light night-owl" style="--shiki-light:#24292eff;--shiki-dark:#d6deeb;--shiki-light-bg:#ffffff;--shiki-dark-bg:#011627;" tabindex="0" data-v-a2d68e58=""><code data-v-a2d68e58=""><span class="line" data-v-a2d68e58=""><span style="--shiki-light:#6F42C1;--shiki-light-font-style:inherit;--shiki-dark:#82AAFF;--shiki-dark-font-style:italic;" data-v-a2d68e58="">$</span><span style="--shiki-light:#2B5581;--shiki-dark:#ECC48D;" data-v-a2d68e58=""> ssh-keygen</span><span style="--shiki-light:#2B5581;--shiki-dark:#82AAFF;" data-v-a2d68e58=""> -t</span><span style="--shiki-light:#2B5581;--shiki-dark:#ECC48D;" data-v-a2d68e58=""> rsa</span><span style="--shiki-light:#2B5581;--shiki-dark:#82AAFF;" data-v-a2d68e58=""> -b</span><span style="--shiki-light:#1976D2;--shiki-dark:#F78C6C;" data-v-a2d68e58=""> 2048</span><span style="--shiki-light:#2B5581;--shiki-dark:#82AAFF;" data-v-a2d68e58=""> -C</span><span style="--shiki-light:#22863A;--shiki-dark:#D9F5DD;" data-v-a2d68e58=""> "</span><span style="--shiki-light:#22863A;--shiki-dark:#ECC48D;" data-v-a2d68e58="">xxxxxxxxxx@qq.com</span><span style="--shiki-light:#22863A;--shiki-dark:#D9F5DD;" data-v-a2d68e58="">"</span></span></code></pre><p data-v-a2d68e58="">而对于 Git，推荐使用 SSH 的连接方式，故一般在入门 Git 时都会去使用 ssh-key 生成密钥对。</p><p data-v-a2d68e58=""><img alt="git-clone.png" loading="lazy" title="git-clone.png" class="post-image" src="/assets/git-clone-B3F0_w1w.png" onerror="this.onerror=null;this.src='/images/image-error.jpg';" data-v-a2d68e58=""></p><h2 id="%E4%BD%BF%E7%94%A8%20Ed25519%20%E7%AE%97%E6%B3%95" data-v-a2d68e58="">使用 Ed25519 算法<a name="%E4%BD%BF%E7%94%A8%20Ed25519%20%E7%AE%97%E6%B3%95" class="headerlink" href="#%E4%BD%BF%E7%94%A8%20Ed25519%20%E7%AE%97%E6%B3%95" data-v-a2d68e58=""></a></h2><p data-v-a2d68e58="">一般网上通过使用 ssh-key 生成密钥对时都使用 RSA 算法，RSA 经典且可靠，但性能不够理想。</p><p data-v-a2d68e58=""><a href="https://leanpub.com/gocrypto/read#leanpub-auto-chapter-5-digital-signatures" target="_blank" class="" data-v-a2d68e58=""><!--[-->Practical Cryptography With Go <!--]--></a>一书建议使用 ED25519 密钥，ED25519 比 RSA 更安全且性能更好。</p><p data-v-a2d68e58="">OpenSSH 6.5 在 2014 年开始支持 ED25519 SSH 密钥，目前应该在大多数操作系统上都能支持。</p><p data-v-a2d68e58="">为了使用 Ed25519 只需更改 <code data-v-a2d68e58="">-t</code> 参数：</p><pre class="shiki shiki-themes min-light night-owl" style="--shiki-light:#24292eff;--shiki-dark:#d6deeb;--shiki-light-bg:#ffffff;--shiki-dark-bg:#011627;" tabindex="0" data-v-a2d68e58=""><code data-v-a2d68e58=""><span class="line" data-v-a2d68e58=""><span style="--shiki-light:#6F42C1;--shiki-light-font-style:inherit;--shiki-dark:#82AAFF;--shiki-dark-font-style:italic;" data-v-a2d68e58="">$</span><span style="--shiki-light:#2B5581;--shiki-dark:#ECC48D;" data-v-a2d68e58=""> mkdir</span><span style="--shiki-light:#2B5581;--shiki-dark:#82AAFF;" data-v-a2d68e58=""> -p</span><span style="--shiki-light:#2B5581;--shiki-dark:#ECC48D;" data-v-a2d68e58=""> ~/.ssh</span><span style="--shiki-light:#212121;--shiki-dark:#D6DEEB;" data-v-a2d68e58=""> &amp;&amp;</span><span style="--shiki-light:#6F42C1;--shiki-light-font-style:inherit;--shiki-dark:#C5E478;--shiki-dark-font-style:italic;" data-v-a2d68e58=""> cd</span><span style="--shiki-light:#2B5581;--shiki-dark:#ECC48D;" data-v-a2d68e58=""> ~/.ssh</span></span>
<span class="line" data-v-a2d68e58=""></span>
<span class="line" data-v-a2d68e58=""><span style="--shiki-light:#6F42C1;--shiki-light-font-style:inherit;--shiki-dark:#82AAFF;--shiki-dark-font-style:italic;" data-v-a2d68e58="">$</span><span style="--shiki-light:#2B5581;--shiki-dark:#ECC48D;" data-v-a2d68e58=""> ssh-keygen</span><span style="--shiki-light:#2B5581;--shiki-dark:#82AAFF;" data-v-a2d68e58=""> -t</span><span style="--shiki-light:#2B5581;--shiki-dark:#ECC48D;" data-v-a2d68e58=""> ed25519</span><span style="--shiki-light:#2B5581;--shiki-dark:#82AAFF;" data-v-a2d68e58="">  -C</span><span style="--shiki-light:#22863A;--shiki-dark:#D9F5DD;" data-v-a2d68e58=""> "</span><span style="--shiki-light:#22863A;--shiki-dark:#ECC48D;" data-v-a2d68e58="">xxxxx@zz.com</span><span style="--shiki-light:#22863A;--shiki-dark:#D9F5DD;" data-v-a2d68e58="">"</span></span></code></pre><p data-v-a2d68e58="">在生成密钥的时候，会提示输入密码，这个密码是用来保护私钥的，如果不想设置密码，直接回车即可。但为了安全考虑，十分有必要设置密码。这样即使私钥丢失或被盗，也不会轻易被他人使用。</p><h2 id="%E7%AE%A1%E7%90%86%E5%A4%9A%E5%AF%B9%20SSH%20key%20%E5%92%8C%E5%A4%9A%E4%B8%AA%20Git%20%E8%B4%A6%E6%88%B7" data-v-a2d68e58="">管理多对 SSH key 和多个 Git 账户<a name="%E7%AE%A1%E7%90%86%E5%A4%9A%E5%AF%B9%20SSH%20key%20%E5%92%8C%E5%A4%9A%E4%B8%AA%20Git%20%E8%B4%A6%E6%88%B7" class="headerlink" href="#%E7%AE%A1%E7%90%86%E5%A4%9A%E5%AF%B9%20SSH%20key%20%E5%92%8C%E5%A4%9A%E4%B8%AA%20Git%20%E8%B4%A6%E6%88%B7" data-v-a2d68e58=""></a></h2><p data-v-a2d68e58="">以 Git 为例，往往一个人会拥有多个平台的账号，比如 GitHub、GitLab、公司 Git 等，这时建议为每个服务生成一对专用的密钥。而多对密钥、多个 Git 账户的管理又是个新的问题，不过好在通过简单的配置，就能轻松解决了。</p><p data-v-a2d68e58="">首先针对不同平台生成秘银：</p><pre class="shiki shiki-themes min-light night-owl" style="--shiki-light:#24292eff;--shiki-dark:#d6deeb;--shiki-light-bg:#ffffff;--shiki-dark-bg:#011627;" tabindex="0" data-v-a2d68e58=""><code data-v-a2d68e58=""><span class="line" data-v-a2d68e58=""><span style="--shiki-light:#6F42C1;--shiki-light-font-style:inherit;--shiki-dark:#82AAFF;--shiki-dark-font-style:italic;" data-v-a2d68e58="">$</span><span style="--shiki-light:#2B5581;--shiki-dark:#ECC48D;" data-v-a2d68e58=""> mkdir</span><span style="--shiki-light:#2B5581;--shiki-dark:#82AAFF;" data-v-a2d68e58=""> -p</span><span style="--shiki-light:#2B5581;--shiki-dark:#ECC48D;" data-v-a2d68e58=""> ~/.ssh</span><span style="--shiki-light:#212121;--shiki-dark:#D6DEEB;" data-v-a2d68e58=""> &amp;&amp;</span><span style="--shiki-light:#6F42C1;--shiki-light-font-style:inherit;--shiki-dark:#C5E478;--shiki-dark-font-style:italic;" data-v-a2d68e58=""> cd</span><span style="--shiki-light:#2B5581;--shiki-dark:#ECC48D;" data-v-a2d68e58=""> ~/.ssh</span></span>
<span class="line" data-v-a2d68e58=""></span>
<span class="line" data-v-a2d68e58=""><span style="--shiki-light:#C2C3C5;--shiki-light-font-style:inherit;--shiki-dark:#637777;--shiki-dark-font-style:italic;" data-v-a2d68e58=""># 我在 GitHub</span></span>
<span class="line" data-v-a2d68e58=""><span style="--shiki-light:#6F42C1;--shiki-light-font-style:inherit;--shiki-dark:#82AAFF;--shiki-dark-font-style:italic;" data-v-a2d68e58="">$</span><span style="--shiki-light:#2B5581;--shiki-dark:#ECC48D;" data-v-a2d68e58=""> ssh-keygen</span><span style="--shiki-light:#2B5581;--shiki-dark:#82AAFF;" data-v-a2d68e58=""> -t</span><span style="--shiki-light:#2B5581;--shiki-dark:#ECC48D;" data-v-a2d68e58=""> ed25519</span><span style="--shiki-light:#2B5581;--shiki-dark:#82AAFF;" data-v-a2d68e58=""> -f</span><span style="--shiki-light:#2B5581;--shiki-dark:#ECC48D;" data-v-a2d68e58=""> my_github_ed25519</span><span style="--shiki-light:#2B5581;--shiki-dark:#82AAFF;" data-v-a2d68e58="">  -C</span><span style="--shiki-light:#22863A;--shiki-dark:#D9F5DD;" data-v-a2d68e58=""> "</span><span style="--shiki-light:#22863A;--shiki-dark:#ECC48D;" data-v-a2d68e58="">me@github</span><span style="--shiki-light:#22863A;--shiki-dark:#D9F5DD;" data-v-a2d68e58="">"</span></span>
<span class="line" data-v-a2d68e58=""></span>
<span class="line" data-v-a2d68e58=""><span style="--shiki-light:#C2C3C5;--shiki-light-font-style:inherit;--shiki-dark:#637777;--shiki-dark-font-style:italic;" data-v-a2d68e58=""># 我在 GitLab</span></span>
<span class="line" data-v-a2d68e58=""><span style="--shiki-light:#6F42C1;--shiki-light-font-style:inherit;--shiki-dark:#82AAFF;--shiki-dark-font-style:italic;" data-v-a2d68e58="">$</span><span style="--shiki-light:#2B5581;--shiki-dark:#ECC48D;" data-v-a2d68e58=""> ssh-keygen</span><span style="--shiki-light:#2B5581;--shiki-dark:#82AAFF;" data-v-a2d68e58=""> -t</span><span style="--shiki-light:#2B5581;--shiki-dark:#ECC48D;" data-v-a2d68e58=""> ed25519</span><span style="--shiki-light:#2B5581;--shiki-dark:#82AAFF;" data-v-a2d68e58=""> -f</span><span style="--shiki-light:#2B5581;--shiki-dark:#ECC48D;" data-v-a2d68e58=""> my_gitlab_ed25519</span><span style="--shiki-light:#2B5581;--shiki-dark:#82AAFF;" data-v-a2d68e58="">  -C</span><span style="--shiki-light:#22863A;--shiki-dark:#D9F5DD;" data-v-a2d68e58=""> "</span><span style="--shiki-light:#22863A;--shiki-dark:#ECC48D;" data-v-a2d68e58="">me@gitlab</span><span style="--shiki-light:#22863A;--shiki-dark:#D9F5DD;" data-v-a2d68e58="">"</span></span>
<span class="line" data-v-a2d68e58=""></span>
<span class="line" data-v-a2d68e58=""><span style="--shiki-light:#C2C3C5;--shiki-light-font-style:inherit;--shiki-dark:#637777;--shiki-dark-font-style:italic;" data-v-a2d68e58=""># 我在企业</span></span>
<span class="line" data-v-a2d68e58=""><span style="--shiki-light:#6F42C1;--shiki-light-font-style:inherit;--shiki-dark:#82AAFF;--shiki-dark-font-style:italic;" data-v-a2d68e58="">$</span><span style="--shiki-light:#2B5581;--shiki-dark:#ECC48D;" data-v-a2d68e58=""> ssh-keygen</span><span style="--shiki-light:#2B5581;--shiki-dark:#82AAFF;" data-v-a2d68e58=""> -t</span><span style="--shiki-light:#2B5581;--shiki-dark:#ECC48D;" data-v-a2d68e58=""> ed25519</span><span style="--shiki-light:#2B5581;--shiki-dark:#82AAFF;" data-v-a2d68e58=""> -f</span><span style="--shiki-light:#2B5581;--shiki-dark:#ECC48D;" data-v-a2d68e58=""> my_company_ed25519</span><span style="--shiki-light:#2B5581;--shiki-dark:#82AAFF;" data-v-a2d68e58=""> -C</span><span style="--shiki-light:#22863A;--shiki-dark:#D9F5DD;" data-v-a2d68e58=""> "</span><span style="--shiki-light:#22863A;--shiki-dark:#ECC48D;" data-v-a2d68e58="">email@example.com</span><span style="--shiki-light:#22863A;--shiki-dark:#D9F5DD;" data-v-a2d68e58="">"</span></span></code></pre><p data-v-a2d68e58="">编辑 <code data-v-a2d68e58="">~/.ssh/config</code>：</p><pre class="shiki shiki-themes min-light night-owl" style="--shiki-light:#24292eff;--shiki-dark:#d6deeb;--shiki-light-bg:#ffffff;--shiki-dark-bg:#011627;" tabindex="0" data-v-a2d68e58=""><code data-v-a2d68e58=""><span class="line" data-v-a2d68e58=""><span style="--shiki-light:#C2C3C5;--shiki-light-font-style:inherit;--shiki-dark:#637777;--shiki-dark-font-style:italic;" data-v-a2d68e58=""># 我在 GitHub</span></span>
<span class="line" data-v-a2d68e58=""><span style="--shiki-light:#6F42C1;--shiki-light-font-style:inherit;--shiki-dark:#82AAFF;--shiki-dark-font-style:italic;" data-v-a2d68e58="">Host</span><span style="--shiki-light:#2B5581;--shiki-dark:#ECC48D;" data-v-a2d68e58=""> github.com</span></span>
<span class="line" data-v-a2d68e58=""><span style="--shiki-light:#6F42C1;--shiki-light-font-style:inherit;--shiki-dark:#82AAFF;--shiki-dark-font-style:italic;" data-v-a2d68e58="">  Hostname</span><span style="--shiki-light:#2B5581;--shiki-dark:#ECC48D;" data-v-a2d68e58=""> github.com</span></span>
<span class="line" data-v-a2d68e58=""><span style="--shiki-light:#6F42C1;--shiki-light-font-style:inherit;--shiki-dark:#82AAFF;--shiki-dark-font-style:italic;" data-v-a2d68e58="">  User</span><span style="--shiki-light:#2B5581;--shiki-dark:#ECC48D;" data-v-a2d68e58=""> git</span></span>
<span class="line" data-v-a2d68e58=""><span style="--shiki-light:#6F42C1;--shiki-light-font-style:inherit;--shiki-dark:#82AAFF;--shiki-dark-font-style:italic;" data-v-a2d68e58="">  PreferredAuthentications</span><span style="--shiki-light:#2B5581;--shiki-dark:#ECC48D;" data-v-a2d68e58=""> publickey</span></span>
<span class="line" data-v-a2d68e58=""><span style="--shiki-light:#6F42C1;--shiki-light-font-style:inherit;--shiki-dark:#82AAFF;--shiki-dark-font-style:italic;" data-v-a2d68e58="">  IdentityFile</span><span style="--shiki-light:#2B5581;--shiki-dark:#ECC48D;" data-v-a2d68e58=""> ~/.ssh/my_github_ed25519</span></span>
<span class="line" data-v-a2d68e58=""></span>
<span class="line" data-v-a2d68e58=""><span style="--shiki-light:#C2C3C5;--shiki-light-font-style:inherit;--shiki-dark:#637777;--shiki-dark-font-style:italic;" data-v-a2d68e58=""># 我在 GitLab</span></span>
<span class="line" data-v-a2d68e58=""><span style="--shiki-light:#6F42C1;--shiki-light-font-style:inherit;--shiki-dark:#82AAFF;--shiki-dark-font-style:italic;" data-v-a2d68e58="">Host</span><span style="--shiki-light:#2B5581;--shiki-dark:#ECC48D;" data-v-a2d68e58=""> gitlab.com</span></span>
<span class="line" data-v-a2d68e58=""><span style="--shiki-light:#6F42C1;--shiki-light-font-style:inherit;--shiki-dark:#82AAFF;--shiki-dark-font-style:italic;" data-v-a2d68e58="">  Hostname</span><span style="--shiki-light:#2B5581;--shiki-dark:#ECC48D;" data-v-a2d68e58=""> gitlab.com</span></span>
<span class="line" data-v-a2d68e58=""><span style="--shiki-light:#6F42C1;--shiki-light-font-style:inherit;--shiki-dark:#82AAFF;--shiki-dark-font-style:italic;" data-v-a2d68e58="">  User</span><span style="--shiki-light:#2B5581;--shiki-dark:#ECC48D;" data-v-a2d68e58=""> git</span></span>
<span class="line" data-v-a2d68e58=""><span style="--shiki-light:#6F42C1;--shiki-light-font-style:inherit;--shiki-dark:#82AAFF;--shiki-dark-font-style:italic;" data-v-a2d68e58="">  PreferredAuthentications</span><span style="--shiki-light:#2B5581;--shiki-dark:#ECC48D;" data-v-a2d68e58=""> publickey</span></span>
<span class="line" data-v-a2d68e58=""><span style="--shiki-light:#6F42C1;--shiki-light-font-style:inherit;--shiki-dark:#82AAFF;--shiki-dark-font-style:italic;" data-v-a2d68e58="">  IdentityFile</span><span style="--shiki-light:#2B5581;--shiki-dark:#ECC48D;" data-v-a2d68e58=""> ~/.ssh/my_gitlab_ed25519</span></span>
<span class="line" data-v-a2d68e58=""></span>
<span class="line" data-v-a2d68e58=""><span style="--shiki-light:#C2C3C5;--shiki-light-font-style:inherit;--shiki-dark:#637777;--shiki-dark-font-style:italic;" data-v-a2d68e58=""># 我在企业</span></span>
<span class="line" data-v-a2d68e58=""><span style="--shiki-light:#6F42C1;--shiki-light-font-style:inherit;--shiki-dark:#82AAFF;--shiki-dark-font-style:italic;" data-v-a2d68e58="">Host</span><span style="--shiki-light:#2B5581;--shiki-dark:#ECC48D;" data-v-a2d68e58=""> example.com</span></span>
<span class="line" data-v-a2d68e58=""><span style="--shiki-light:#6F42C1;--shiki-light-font-style:inherit;--shiki-dark:#82AAFF;--shiki-dark-font-style:italic;" data-v-a2d68e58="">  Hostname</span><span style="--shiki-light:#2B5581;--shiki-dark:#ECC48D;" data-v-a2d68e58=""> example.com</span></span>
<span class="line" data-v-a2d68e58=""><span style="--shiki-light:#6F42C1;--shiki-light-font-style:inherit;--shiki-dark:#82AAFF;--shiki-dark-font-style:italic;" data-v-a2d68e58="">  Port</span><span style="--shiki-light:#1976D2;--shiki-dark:#F78C6C;" data-v-a2d68e58=""> 22</span></span>
<span class="line" data-v-a2d68e58=""><span style="--shiki-light:#6F42C1;--shiki-light-font-style:inherit;--shiki-dark:#82AAFF;--shiki-dark-font-style:italic;" data-v-a2d68e58="">  User</span><span style="--shiki-light:#2B5581;--shiki-dark:#ECC48D;" data-v-a2d68e58=""> git</span></span>
<span class="line" data-v-a2d68e58=""><span style="--shiki-light:#6F42C1;--shiki-light-font-style:inherit;--shiki-dark:#82AAFF;--shiki-dark-font-style:italic;" data-v-a2d68e58="">  PreferredAuthentications</span><span style="--shiki-light:#2B5581;--shiki-dark:#ECC48D;" data-v-a2d68e58=""> publickey</span></span>
<span class="line" data-v-a2d68e58=""><span style="--shiki-light:#6F42C1;--shiki-light-font-style:inherit;--shiki-dark:#82AAFF;--shiki-dark-font-style:italic;" data-v-a2d68e58="">  IdentityFile</span><span style="--shiki-light:#2B5581;--shiki-dark:#ECC48D;" data-v-a2d68e58=""> ~/.ssh/my_company_ed25519</span></span></code></pre><p data-v-a2d68e58="">如此一来 SSH 连接不同服务器时，就会自动使用相应的密钥了。</p><p data-v-a2d68e58="">而对于多个 Git 账户，可以通过配置 <code data-v-a2d68e58="">~/.gitconfig</code> 来实现：</p><pre class="shiki shiki-themes min-light night-owl" style="--shiki-light:#24292eff;--shiki-dark:#d6deeb;--shiki-light-bg:#ffffff;--shiki-dark-bg:#011627;" tabindex="0" data-v-a2d68e58=""><code data-v-a2d68e58=""><span class="line" data-v-a2d68e58=""><span style="--shiki-light:#C2C3C5;--shiki-light-font-style:inherit;--shiki-dark:#637777;--shiki-dark-font-style:italic;" data-v-a2d68e58=""># 全局账户</span></span>
<span class="line" data-v-a2d68e58=""><span style="--shiki-light:#24292EFF;--shiki-dark:#D6DEEB;" data-v-a2d68e58="">[user]</span></span>
<span class="line" data-v-a2d68e58=""><span style="--shiki-light:#24292EFF;--shiki-dark:#C5E478;" data-v-a2d68e58="">name</span><span style="--shiki-light:#D32F2F;--shiki-dark:#D6DEEB;" data-v-a2d68e58="">=</span><span style="--shiki-light:#24292EFF;--shiki-dark:#D6DEEB;" data-v-a2d68e58="">d</span><span style="--shiki-light:#24292EFF;--shiki-dark:#FFFFFF;" data-v-a2d68e58="">aief</span></span>
<span class="line" data-v-a2d68e58=""><span style="--shiki-light:#24292EFF;--shiki-dark:#C5E478;" data-v-a2d68e58="">email</span><span style="--shiki-light:#D32F2F;--shiki-dark:#D6DEEB;" data-v-a2d68e58="">=</span><span style="--shiki-light:#24292EFF;--shiki-dark:#D6DEEB;" data-v-a2d68e58="">x</span><span style="--shiki-light:#24292EFF;--shiki-dark:#FFFFFF;" data-v-a2d68e58="">xxxxxxx@qq.com</span></span>
<span class="line" data-v-a2d68e58=""></span>
<span class="line" data-v-a2d68e58=""><span style="--shiki-light:#C2C3C5;--shiki-light-font-style:inherit;--shiki-dark:#637777;--shiki-dark-font-style:italic;" data-v-a2d68e58=""># 以 / 结尾，否则不会生效，以 / 结尾，** 会被自动添加上，~/Desktop/codes/**</span></span>
<span class="line" data-v-a2d68e58=""><span style="--shiki-light:#24292EFF;--shiki-dark:#D6DEEB;" data-v-a2d68e58="">[includeIf "gitdir:~/Desktop/codes/"]</span></span>
<span class="line" data-v-a2d68e58=""><span style="--shiki-light:#24292EFF;--shiki-dark:#C5E478;" data-v-a2d68e58="">path</span><span style="--shiki-light:#D32F2F;--shiki-dark:#D6DEEB;" data-v-a2d68e58=""> =</span><span style="--shiki-light:#24292EFF;--shiki-dark:#D6DEEB;" data-v-a2d68e58=""> ~</span><span style="--shiki-light:#24292EFF;--shiki-dark:#FFFFFF;" data-v-a2d68e58="">/Desktop/codes/.gitconfig</span></span>
<span class="line" data-v-a2d68e58=""></span>
<span class="line" data-v-a2d68e58=""><span style="--shiki-light:#24292EFF;--shiki-dark:#D6DEEB;" data-v-a2d68e58="">[includeIf "gitdir:~/Documents/fe/projects/"]</span></span>
<span class="line" data-v-a2d68e58=""><span style="--shiki-light:#24292EFF;--shiki-dark:#C5E478;" data-v-a2d68e58="">path</span><span style="--shiki-light:#D32F2F;--shiki-dark:#D6DEEB;" data-v-a2d68e58=""> =</span><span style="--shiki-light:#24292EFF;--shiki-dark:#D6DEEB;" data-v-a2d68e58=""> ~</span><span style="--shiki-light:#24292EFF;--shiki-dark:#FFFFFF;" data-v-a2d68e58="">/Documents/fe/projects/.gitconfig</span></span></code></pre><p data-v-a2d68e58="">子配置分别是：</p><pre class="shiki shiki-themes min-light night-owl" style="--shiki-light:#24292eff;--shiki-dark:#d6deeb;--shiki-light-bg:#ffffff;--shiki-dark-bg:#011627;" tabindex="0" data-v-a2d68e58=""><code data-v-a2d68e58=""><span class="line" data-v-a2d68e58=""><span style="--shiki-light:#C2C3C5;--shiki-light-font-style:inherit;--shiki-dark:#637777;--shiki-dark-font-style:italic;" data-v-a2d68e58=""># ~/Desktop/codes/.gitconfig</span></span>
<span class="line" data-v-a2d68e58=""><span style="--shiki-light:#24292EFF;--shiki-dark:#D6DEEB;" data-v-a2d68e58="">[user]</span></span>
<span class="line" data-v-a2d68e58=""><span style="--shiki-light:#24292EFF;--shiki-dark:#C5E478;" data-v-a2d68e58="">name</span><span style="--shiki-light:#D32F2F;--shiki-dark:#D6DEEB;" data-v-a2d68e58="">=</span><span style="--shiki-light:#24292EFF;--shiki-dark:#D6DEEB;" data-v-a2d68e58="">u</span><span style="--shiki-light:#24292EFF;--shiki-dark:#FFFFFF;" data-v-a2d68e58="">ser2</span></span>
<span class="line" data-v-a2d68e58=""><span style="--shiki-light:#24292EFF;--shiki-dark:#C5E478;" data-v-a2d68e58="">email</span><span style="--shiki-light:#D32F2F;--shiki-dark:#D6DEEB;" data-v-a2d68e58="">=</span><span style="--shiki-light:#24292EFF;--shiki-dark:#D6DEEB;" data-v-a2d68e58="">x</span><span style="--shiki-light:#24292EFF;--shiki-dark:#FFFFFF;" data-v-a2d68e58="">xxxx2@qq.com</span></span>
<span class="line" data-v-a2d68e58=""></span>
<span class="line" data-v-a2d68e58=""><span style="--shiki-light:#C2C3C5;--shiki-light-font-style:inherit;--shiki-dark:#637777;--shiki-dark-font-style:italic;" data-v-a2d68e58=""># ~/Documents/fe/projects/.gitconfig</span></span>
<span class="line" data-v-a2d68e58=""><span style="--shiki-light:#24292EFF;--shiki-dark:#D6DEEB;" data-v-a2d68e58="">[user]</span></span>
<span class="line" data-v-a2d68e58=""><span style="--shiki-light:#24292EFF;--shiki-dark:#C5E478;" data-v-a2d68e58="">name</span><span style="--shiki-light:#D32F2F;--shiki-dark:#D6DEEB;" data-v-a2d68e58="">=</span><span style="--shiki-light:#24292EFF;--shiki-dark:#D6DEEB;" data-v-a2d68e58="">u</span><span style="--shiki-light:#24292EFF;--shiki-dark:#FFFFFF;" data-v-a2d68e58="">ser3</span></span>
<span class="line" data-v-a2d68e58=""><span style="--shiki-light:#24292EFF;--shiki-dark:#C5E478;" data-v-a2d68e58="">email</span><span style="--shiki-light:#D32F2F;--shiki-dark:#D6DEEB;" data-v-a2d68e58="">=</span><span style="--shiki-light:#24292EFF;--shiki-dark:#D6DEEB;" data-v-a2d68e58="">x</span><span style="--shiki-light:#24292EFF;--shiki-dark:#FFFFFF;" data-v-a2d68e58="">xxxx3@qq.com</span></span></code></pre><p data-v-a2d68e58="">这样一来，当在 <code data-v-a2d68e58="">~/Desktop/codes/</code> 目录下执行 Git 命令时，就会使用 <code data-v-a2d68e58="">~/Desktop/codes/.gitconfig</code> 配置；而在 <code data-v-a2d68e58="">~/Documents/fe/projects/</code> 目录下执行 Git 命令时，就会使用 <code data-v-a2d68e58="">~/Documents/fe/projects/.gitconfig</code> 配置；否则就是使用全局配置。</p><h2 id="%E6%80%BB%E7%BB%93" data-v-a2d68e58="">总结<a name="%E6%80%BB%E7%BB%93" class="headerlink" href="#%E6%80%BB%E7%BB%93" data-v-a2d68e58=""></a></h2><p data-v-a2d68e58="">其实最开始只是寻找管理多个 Git 账号的解决方案，期间接触了不少别的知识，想着就干脆都了解一下，再整合记录一下。</p><hr data-v-a2d68e58=""><p data-v-a2d68e58="">参考资料：</p><ul data-v-a2d68e58=""><li data-v-a2d68e58="">SSH 认证原理：<a href="https://www.jianshu.com/p/d31de2601368" target="_blank" class="" data-v-a2d68e58=""><!--[-->https://www.jianshu.com/p/d31de2601368<!--]--></a></li><li data-v-a2d68e58="">公开密钥加密：<a href="https://zh.wikipedia.org/zh-hans/%E5%85%AC%E5%BC%80%E5%AF%86%E9%92%A5%E5%8A%A0%E5%AF%86" target="_blank" class="" data-v-a2d68e58=""><!--[-->https://zh.wikipedia.org/zh-hans/%E5%85%AC%E5%BC%80%E5%AF%86%E9%92%A5%E5%8A%A0%E5%AF%86<!--]--></a></li><li data-v-a2d68e58="">Install OpenSSH for Windows：<a href="https://learn.microsoft.com/en-us/windows-server/administration/openssh/openssh_install_firstuse" target="_blank" class="" data-v-a2d68e58=""><!--[-->https://learn.microsoft.com/en-us/windows-server/administration/openssh/openssh_install_firstuse<!--]--></a></li><li data-v-a2d68e58="">Use SSH keys to communicate with GitLab：<a href="https://docs.gitlab.com/ee/user/ssh.html" target="_blank" class="" data-v-a2d68e58=""><!--[-->https://docs.gitlab.com/ee/user/ssh.html<!--]--></a></li><li data-v-a2d68e58="">Ed25519：<a href="https://ed25519.cr.yp.to/" target="_blank" class="" data-v-a2d68e58=""><!--[-->https://ed25519.cr.yp.to/<!--]--></a></li><li data-v-a2d68e58="">使用 Ed25519 算法生成你的 SSH 密钥：<a href="https://zhuanlan.zhihu.com/p/110413836" target="_blank" class="" data-v-a2d68e58=""><!--[-->https://zhuanlan.zhihu.com/p/110413836<!--]--></a></li><li data-v-a2d68e58="">Multiple GitHub accounts on the same computer?：<a href="https://stackoverflow.com/questions/3860112/multiple-github-accounts-on-the-same-computer" target="_blank" class="" data-v-a2d68e58=""><!--[-->https://stackoverflow.com/questions/3860112/multiple-github-accounts-on-the-same-computer<!--]--></a></li></ul><!--]--></div></article><aside class="pointer-events-none fixed z-20 top-0 w-full h-full left-0 overscroll-contain transition-300 lg:pointer-events-auto lg:absolute lg:w-auto lg:bg-transparent lg:left-[calc(100%+clamp(6px,17.1875vw-176px,50px))]" data-v-a2d68e58=""><nav class="overflow-y-auto text-foreground overscroll-contain bg-background w-74 max-w-4/5 h-full py-8 px-6 rounded-tl-xl rounded-bl-xl absolute top-0 transition-300 right-0 translate-x-full lg:p-0 lg:max-w-44 xl:max-w-50 lg:h-auto lg:max-h-[calc(100vh-130px)] lg:rounded-none lg:sticky lg:top-10 lg:right-auto lg:translate-x-0 lg:bg-transparent lg:ml-0" data-v-a2d68e58=""><h2 class="mb-2 font-bold lg:hidden" data-v-a2d68e58="">TABLE OF CONTENTS</h2><ul class="group/root" data-v-a2d68e58=""><!--[--><li><a href="#SSH" class="group/item text-foreground flex flex-nowrap items-center mb-1.5"><span class="hidden lg:block h-1 bg-foreground rounded-sm opacity-30 transition-300 shrink-0 group-hover/item:opacity-85" style="width:20px;margin-right:8px;"></span><span class="opacity-100 text-[color-mix(in_srgb,var(--foreground)_70%,transparent)] text-sm overflow-hidden text-ellipsis whitespace-nowrap transition-300 max-w-full flex-grow lg:opacity-0 lg:max-w-46 group-hover/root:opacity-100 group-hover/item:text-foreground lg:opacity-0" title="SSH">SSH</span></a><ul class=""><!--[--><li><a href="#SSH%20key" class="group/item text-foreground flex flex-nowrap items-center mb-1.5"><span class="hidden lg:block h-1 bg-foreground rounded-sm opacity-30 transition-300 shrink-0 group-hover/item:opacity-85" style="width:16px;margin-right:12px;"></span><span class="opacity-100 text-[color-mix(in_srgb,var(--foreground)_70%,transparent)] text-sm overflow-hidden text-ellipsis whitespace-nowrap transition-300 max-w-full flex-grow lg:opacity-0 lg:max-w-46 group-hover/root:opacity-100 group-hover/item:text-foreground lg:opacity-0" title="SSH key">SSH key</span></a><!----></li><li><a href="#%E8%AE%A4%E8%AF%81%E8%BF%87%E7%A8%8B" class="group/item text-foreground flex flex-nowrap items-center mb-1.5"><span class="hidden lg:block h-1 bg-foreground rounded-sm opacity-30 transition-300 shrink-0 group-hover/item:opacity-85" style="width:16px;margin-right:12px;"></span><span class="opacity-100 text-[color-mix(in_srgb,var(--foreground)_70%,transparent)] text-sm overflow-hidden text-ellipsis whitespace-nowrap transition-300 max-w-full flex-grow lg:opacity-0 lg:max-w-46 group-hover/root:opacity-100 group-hover/item:text-foreground lg:opacity-0" title="认证过程">认证过程</span></a><!----></li><!--]--></ul></li><li><a href="#Git" class="group/item text-foreground flex flex-nowrap items-center mb-1.5"><span class="hidden lg:block h-1 bg-foreground rounded-sm opacity-30 transition-300 shrink-0 group-hover/item:opacity-85" style="width:20px;margin-right:8px;"></span><span class="opacity-100 text-[color-mix(in_srgb,var(--foreground)_70%,transparent)] text-sm overflow-hidden text-ellipsis whitespace-nowrap transition-300 max-w-full flex-grow lg:opacity-0 lg:max-w-46 group-hover/root:opacity-100 group-hover/item:text-foreground lg:opacity-0" title="Git">Git</span></a><!----></li><li><a href="#%E4%BD%BF%E7%94%A8%20Ed25519%20%E7%AE%97%E6%B3%95" class="group/item text-foreground flex flex-nowrap items-center mb-1.5"><span class="hidden lg:block h-1 bg-foreground rounded-sm opacity-30 transition-300 shrink-0 group-hover/item:opacity-85" style="width:20px;margin-right:8px;"></span><span class="opacity-100 text-[color-mix(in_srgb,var(--foreground)_70%,transparent)] text-sm overflow-hidden text-ellipsis whitespace-nowrap transition-300 max-w-full flex-grow lg:opacity-0 lg:max-w-46 group-hover/root:opacity-100 group-hover/item:text-foreground lg:opacity-0" title="使用 Ed25519 算法">使用 Ed25519 算法</span></a><!----></li><li><a href="#%E7%AE%A1%E7%90%86%E5%A4%9A%E5%AF%B9%20SSH%20key%20%E5%92%8C%E5%A4%9A%E4%B8%AA%20Git%20%E8%B4%A6%E6%88%B7" class="group/item text-foreground flex flex-nowrap items-center mb-1.5"><span class="hidden lg:block h-1 bg-foreground rounded-sm opacity-30 transition-300 shrink-0 group-hover/item:opacity-85" style="width:20px;margin-right:8px;"></span><span class="opacity-100 text-[color-mix(in_srgb,var(--foreground)_70%,transparent)] text-sm overflow-hidden text-ellipsis whitespace-nowrap transition-300 max-w-full flex-grow lg:opacity-0 lg:max-w-46 group-hover/root:opacity-100 group-hover/item:text-foreground lg:opacity-0" title="管理多对 SSH key 和多个 Git 账户">管理多对 SSH key 和多个 Git 账户</span></a><!----></li><li><a href="#%E6%80%BB%E7%BB%93" class="group/item text-foreground flex flex-nowrap items-center mb-1.5"><span class="hidden lg:block h-1 bg-foreground rounded-sm opacity-30 transition-300 shrink-0 group-hover/item:opacity-85" style="width:20px;margin-right:8px;"></span><span class="opacity-100 text-[color-mix(in_srgb,var(--foreground)_70%,transparent)] text-sm overflow-hidden text-ellipsis whitespace-nowrap transition-300 max-w-full flex-grow lg:opacity-0 lg:max-w-46 group-hover/root:opacity-100 group-hover/item:text-foreground lg:opacity-0" title="总结">总结</span></a><!----></li><!--]--></ul></nav></aside></div><hr class="border-border mt-10" data-v-a2d68e58=""><div class="mt-10" data-v-a2d68e58=""><div data-v-a2d68e58=""><h2 class="text-xl font-bold mb-5"><a href="#comment" class="text-accent foreground-link">留言板</a></h2><div class="utterances-wrapper"></div></div></div><!--]--></main><footer class="text-center py-6 text-gray-500 dark:text-gray-400 text-sm"><div><span>© 2017-2025 Daief's Blog</span></div></footer><div></div></div><!--]--></div>
<script>window.__INITIAL_STATE__="{\"naiveUiStyles\":\"\"}"</script>
  

</body></html>