import{L as e,R as t,T as n,c as r,f as i,h as a,j as o,m as s,n as c,o as l,p as u,t as d,u as f}from"./app-DvX1Smg_.js";import"./isObject-STXFNBUz.js";import"./isSymbol-CUbBZ03s.js";import"./toNumber-CiYTsHHK.js";import"./now-BXsIGwzm.js";import{n as p,t as m}from"./toc-DNILfFl5.js";import{n as h,t as g}from"./meta-info-C-tMy3g2.js";import{t as _}from"./use-page-title-CHxbaOlI.js";var v={class:`relative`},y={key:0,class:`mt-10`},b=l(Object.assign({name:`Article`},{__name:`vm:_post_troubles-with-web-developing-in-weixin_`,setup(l){_({title:`微信网页开发踩坑记录`,description:``});let{meta:b,toc:x}={meta:{title:`微信网页开发踩坑记录`,date:`2019-09-07T14:51:32.000Z`,id:`troubles-with-web-developing-in-weixin`,categories:[`前端`],keywords:[`微信`,`wx`,`踩坑`,`前端`],description:null,tags:[],sort:0,comments:!0,draft:!1},toc:[{id:`%E6%AD%A3%E6%96%87`,text:`正文`,level:2,children:[{id:`iOS%20%E4%B8%AD%E6%94%B6%E8%B5%B7%E8%BD%AF%E9%94%AE%E7%9B%98%E6%97%B6%E9%A1%B5%E9%9D%A2%E4%B8%8D%E6%81%A2%E5%A4%8D%20-%202019-08`,text:`iOS 中收起软键盘时页面不恢复 - 2019-08`,level:3,children:[],parent:`%E6%AD%A3%E6%96%87`},{id:`iOS%20%E4%B8%AD%20input%20%E7%9A%84%20placeholder%20%E4%B8%8D%E5%9E%82%E7%9B%B4%E5%B1%85%E4%B8%AD%20-%202019-08`,text:`iOS 中 input 的 placeholder 不垂直居中 - 2019-08`,level:3,children:[],parent:`%E6%AD%A3%E6%96%87`},{id:`iOS%20%E4%B8%AD%20Vue%20%E7%9A%84%E5%89%8D%E7%AB%AF%E8%B7%AF%E7%94%B1%E4%B8%8E%20URL%20%E7%9B%B8%E5%85%B3%E7%9A%84%E9%97%AE%E9%A2%98%20-%202019-08`,text:`iOS 中 Vue 的前端路由与 URL 相关的问题 - 2019-08`,level:3,children:[],parent:`%E6%AD%A3%E6%96%87`}],parent:``}]},{appState:S}=d();return(l,d)=>(n(),u(r,null,[f(`div`,v,[f(`article`,null,[f(`header`,null,[d[1]||=f(`h1`,{class:`text-foreground text-3xl font-bold mb-4`},` 微信网页开发踩坑记录 `,-1),a(g,{meta:e(b)},null,8,[`meta`])]),a(h,{class:`mt-6`},{default:o(()=>[d[3]||=f(`p`,null,`如标题所示，本文用于记录在微信中开发页面时所遇到的坑。`,-1),d[4]||=f(`a`,{id:`more`,href:`#more`,class:`block`},null,-1),d[5]||=f(`h2`,{id:`%E6%AD%A3%E6%96%87`},[s(`正文`),f(`a`,{name:`%E6%AD%A3%E6%96%87`,class:`headerlink`,href:`#%E6%AD%A3%E6%96%87`})],-1),d[6]||=f(`h3`,{id:`iOS%20%E4%B8%AD%E6%94%B6%E8%B5%B7%E8%BD%AF%E9%94%AE%E7%9B%98%E6%97%B6%E9%A1%B5%E9%9D%A2%E4%B8%8D%E6%81%A2%E5%A4%8D%20-%202019-08`},[s(`iOS 中收起软键盘时页面不恢复 - 2019-08`),f(`a`,{name:`iOS%20%E4%B8%AD%E6%94%B6%E8%B5%B7%E8%BD%AF%E9%94%AE%E7%9B%98%E6%97%B6%E9%A1%B5%E9%9D%A2%E4%B8%8D%E6%81%A2%E5%A4%8D%20-%202019-08`,class:`headerlink`,href:`#iOS%20%E4%B8%AD%E6%94%B6%E8%B5%B7%E8%BD%AF%E9%94%AE%E7%9B%98%E6%97%B6%E9%A1%B5%E9%9D%A2%E4%B8%8D%E6%81%A2%E5%A4%8D%20-%202019-08`})],-1),d[7]||=f(`p`,null,`描述：页面上有一个 input 输入框，输入框聚焦时会出现软键盘，同时页面会被软键盘顶起来（页面高度被压缩）。点击输入框其他地方让输入框失去焦点，使得软键盘收起。`,-1),d[8]||=f(`p`,null,`期望结果：软键盘收起，页面恢复。`,-1),d[9]||=f(`p`,null,`实际表现：在 iOS 中，软键盘收起，但被顶起的页面没有恢复，需要人为滚动一下页面才会恢复。`,-1),d[10]||=f(`p`,null,[s(`解决方式：为 input 绑定 `),f(`code`,null,`blur`),s(` 事件，事件触发时主动调用页面滚动方法。`)],-1),d[11]||=f(`pre`,{class:`shiki shiki-themes min-light night-owl`,style:{"--shiki-light":`#24292eff`,"--shiki-dark":`#d6deeb`,"--shiki-light-bg":`#ffffff`,"--shiki-dark-bg":`#011627`},tabindex:`0`},[f(`code`,null,[f(`span`,{class:`line`},[f(`span`,{style:{"--shiki-light":`#1976D2`,"--shiki-light-font-style":`inherit`,"--shiki-dark":`#7FDBCA`,"--shiki-dark-font-style":`italic`}},`document`),f(`span`,{style:{"--shiki-light":`#6F42C1`,"--shiki-light-font-style":`inherit`,"--shiki-dark":`#C792EA`,"--shiki-dark-font-style":`italic`}},`.`),f(`span`,{style:{"--shiki-light":`#6F42C1`,"--shiki-light-font-style":`inherit`,"--shiki-dark":`#82AAFF`,"--shiki-dark-font-style":`italic`}},`getElementById`),f(`span`,{style:{"--shiki-light":`#24292EFF`,"--shiki-dark":`#D6DEEB`}},`(`),f(`span`,{style:{"--shiki-light":`#22863A`,"--shiki-dark":`#D9F5DD`}},`'`),f(`span`,{style:{"--shiki-light":`#22863A`,"--shiki-dark":`#ECC48D`}},`myInput`),f(`span`,{style:{"--shiki-light":`#22863A`,"--shiki-dark":`#D9F5DD`}},`'`),f(`span`,{style:{"--shiki-light":`#24292EFF`,"--shiki-dark":`#D6DEEB`}},`)`),f(`span`,{style:{"--shiki-light":`#6F42C1`,"--shiki-light-font-style":`inherit`,"--shiki-dark":`#C792EA`,"--shiki-dark-font-style":`italic`}},`.`),f(`span`,{style:{"--shiki-light":`#6F42C1`,"--shiki-light-font-style":`inherit`,"--shiki-dark":`#82AAFF`,"--shiki-dark-font-style":`italic`}},`addEventListener`),f(`span`,{style:{"--shiki-light":`#24292EFF`,"--shiki-dark":`#D6DEEB`}},`(`),f(`span`,{style:{"--shiki-light":`#22863A`,"--shiki-dark":`#D9F5DD`}},`'`),f(`span`,{style:{"--shiki-light":`#22863A`,"--shiki-dark":`#ECC48D`}},`blur`),f(`span`,{style:{"--shiki-light":`#22863A`,"--shiki-dark":`#D9F5DD`}},`'`),f(`span`,{style:{"--shiki-light":`#212121`,"--shiki-dark":`#D6DEEB`}},`,`),f(`span`,{style:{"--shiki-light":`#24292EFF`,"--shiki-dark":`#D9F5DD`}},` ()`),f(`span`,{style:{"--shiki-light":`#D32F2F`,"--shiki-dark":`#C792EA`}},` =>`),f(`span`,{style:{"--shiki-light":`#24292EFF`,"--shiki-dark":`#D6DEEB`}},` {`)]),s(`
`),f(`span`,{class:`line`},[f(`span`,{style:{"--shiki-light":`#1976D2`,"--shiki-light-font-style":`inherit`,"--shiki-dark":`#7FDBCA`,"--shiki-dark-font-style":`italic`}},`  window`),f(`span`,{style:{"--shiki-light":`#6F42C1`,"--shiki-light-font-style":`inherit`,"--shiki-dark":`#C792EA`,"--shiki-dark-font-style":`italic`}},`.`),f(`span`,{style:{"--shiki-light":`#6F42C1`,"--shiki-light-font-style":`inherit`,"--shiki-dark":`#82AAFF`,"--shiki-dark-font-style":`italic`}},`scrollTo`),f(`span`,{style:{"--shiki-light":`#24292EFF`,"--shiki-dark":`#D6DEEB`}},`(`),f(`span`,{style:{"--shiki-light":`#1976D2`,"--shiki-dark":`#F78C6C`}},`0`),f(`span`,{style:{"--shiki-light":`#212121`,"--shiki-dark":`#D6DEEB`}},`,`),f(`span`,{style:{"--shiki-light":`#1976D2`,"--shiki-dark":`#F78C6C`}},` 0`),f(`span`,{style:{"--shiki-light":`#24292EFF`,"--shiki-dark":`#D6DEEB`}},`);`)]),s(`
`),f(`span`,{class:`line`},[f(`span`,{style:{"--shiki-light":`#24292EFF`,"--shiki-dark":`#D6DEEB`}},`});`)])])],-1),d[12]||=f(`p`,null,[s(`当时的页面只有一屏多一点点，所以使用 `),f(`code`,null,`window.scrollTo(0, 0)`),s(` 滚动到顶部是没有问题。但页面若是比较长，input 在中间部分，这样带来的体验显示是不好的。因此是否可以用另一个滚动 API（该方式未实践过）。`)],-1),d[13]||=f(`pre`,{class:`shiki shiki-themes min-light night-owl`,style:{"--shiki-light":`#24292eff`,"--shiki-dark":`#d6deeb`,"--shiki-light-bg":`#ffffff`,"--shiki-dark-bg":`#011627`},tabindex:`0`},[f(`code`,null,[f(`span`,{class:`line`},[f(`span`,{style:{"--shiki-light":`#1976D2`,"--shiki-light-font-style":`inherit`,"--shiki-dark":`#7FDBCA`,"--shiki-dark-font-style":`italic`}},`document`),f(`span`,{style:{"--shiki-light":`#6F42C1`,"--shiki-light-font-style":`inherit`,"--shiki-dark":`#C792EA`,"--shiki-dark-font-style":`italic`}},`.`),f(`span`,{style:{"--shiki-light":`#6F42C1`,"--shiki-light-font-style":`inherit`,"--shiki-dark":`#82AAFF`,"--shiki-dark-font-style":`italic`}},`getElementById`),f(`span`,{style:{"--shiki-light":`#24292EFF`,"--shiki-dark":`#D6DEEB`}},`(`),f(`span`,{style:{"--shiki-light":`#22863A`,"--shiki-dark":`#D9F5DD`}},`'`),f(`span`,{style:{"--shiki-light":`#22863A`,"--shiki-dark":`#ECC48D`}},`myInput`),f(`span`,{style:{"--shiki-light":`#22863A`,"--shiki-dark":`#D9F5DD`}},`'`),f(`span`,{style:{"--shiki-light":`#24292EFF`,"--shiki-dark":`#D6DEEB`}},`)`),f(`span`,{style:{"--shiki-light":`#6F42C1`,"--shiki-light-font-style":`inherit`,"--shiki-dark":`#C792EA`,"--shiki-dark-font-style":`italic`}},`.`),f(`span`,{style:{"--shiki-light":`#6F42C1`,"--shiki-light-font-style":`inherit`,"--shiki-dark":`#82AAFF`,"--shiki-dark-font-style":`italic`}},`addEventListener`),f(`span`,{style:{"--shiki-light":`#24292EFF`,"--shiki-dark":`#D6DEEB`}},`(`),f(`span`,{style:{"--shiki-light":`#22863A`,"--shiki-dark":`#D9F5DD`}},`'`),f(`span`,{style:{"--shiki-light":`#22863A`,"--shiki-dark":`#ECC48D`}},`blur`),f(`span`,{style:{"--shiki-light":`#22863A`,"--shiki-dark":`#D9F5DD`}},`'`),f(`span`,{style:{"--shiki-light":`#212121`,"--shiki-dark":`#D6DEEB`}},`,`),f(`span`,{style:{"--shiki-light":`#24292EFF`,"--shiki-dark":`#D9F5DD`}},` ()`),f(`span`,{style:{"--shiki-light":`#D32F2F`,"--shiki-dark":`#C792EA`}},` =>`),f(`span`,{style:{"--shiki-light":`#24292EFF`,"--shiki-dark":`#D6DEEB`}},` {`)]),s(`
`),f(`span`,{class:`line`},[f(`span`,{style:{"--shiki-light":`#1976D2`,"--shiki-light-font-style":`inherit`,"--shiki-dark":`#7FDBCA`,"--shiki-dark-font-style":`italic`}},`  window`),f(`span`,{style:{"--shiki-light":`#6F42C1`,"--shiki-light-font-style":`inherit`,"--shiki-dark":`#C792EA`,"--shiki-dark-font-style":`italic`}},`.`),f(`span`,{style:{"--shiki-light":`#6F42C1`,"--shiki-light-font-style":`inherit`,"--shiki-dark":`#82AAFF`,"--shiki-dark-font-style":`italic`}},`scrollBy`),f(`span`,{style:{"--shiki-light":`#24292EFF`,"--shiki-dark":`#D6DEEB`}},`(`),f(`span`,{style:{"--shiki-light":`#1976D2`,"--shiki-dark":`#F78C6C`}},`0`),f(`span`,{style:{"--shiki-light":`#212121`,"--shiki-dark":`#D6DEEB`}},`,`),f(`span`,{style:{"--shiki-light":`#1976D2`,"--shiki-dark":`#F78C6C`}},` 1`),f(`span`,{style:{"--shiki-light":`#24292EFF`,"--shiki-dark":`#D6DEEB`}},`); `),f(`span`,{style:{"--shiki-light":`#C2C3C5`,"--shiki-light-font-style":`inherit`,"--shiki-dark":`#637777`,"--shiki-dark-font-style":`italic`}},`// y 轴进行少量滚动`)]),s(`
`),f(`span`,{class:`line`},[f(`span`,{style:{"--shiki-light":`#24292EFF`,"--shiki-dark":`#D6DEEB`}},`});`)])])],-1),d[14]||=f(`h3`,{id:`iOS%20%E4%B8%AD%20input%20%E7%9A%84%20placeholder%20%E4%B8%8D%E5%9E%82%E7%9B%B4%E5%B1%85%E4%B8%AD%20-%202019-08`},[s(`iOS 中 input 的 placeholder 不垂直居中 - 2019-08`),f(`a`,{name:`iOS%20%E4%B8%AD%20input%20%E7%9A%84%20placeholder%20%E4%B8%8D%E5%9E%82%E7%9B%B4%E5%B1%85%E4%B8%AD%20-%202019-08`,class:`headerlink`,href:`#iOS%20%E4%B8%AD%20input%20%E7%9A%84%20placeholder%20%E4%B8%8D%E5%9E%82%E7%9B%B4%E5%B1%85%E4%B8%AD%20-%202019-08`})],-1),d[15]||=f(`p`,null,[s(`描述：常常，会对单行输入框 input 设置 CSS 的 `),f(`code`,null,`line-height`),s(` 和 `),f(`code`,null,`height`),s(` 以达到输入文案、placeholder 垂直居中的效果。`)],-1),d[16]||=f(`p`,null,`实际表现：在 iOS 中，input 的 placeholder 没有垂直居中。`,-1),d[17]||=f(`p`,null,[s(`解决方式：`),f(`code`,null,`line-height`),s(` 设置为 `),f(`code`,null,`normal`),s(` 或者使用 `),f(`code`,null,`padding`),s(`、`),f(`code`,null,`margin`),s(` 让 input 看起来垂直居中。`)],-1),d[18]||=f(`p`,null,`相关阅读：`,-1),f(`ul`,null,[f(`li`,null,[a(c,{target:`_blank`,href:`https://developer.mozilla.org/zh-CN/docs/Web/CSS/line-height`},{default:o(()=>[...d[2]||=[s(`MDN - line-height`,-1)]]),_:1})])]),d[19]||=f(`h3`,{id:`iOS%20%E4%B8%AD%20Vue%20%E7%9A%84%E5%89%8D%E7%AB%AF%E8%B7%AF%E7%94%B1%E4%B8%8E%20URL%20%E7%9B%B8%E5%85%B3%E7%9A%84%E9%97%AE%E9%A2%98%20-%202019-08`},[s(`iOS 中 Vue 的前端路由与 URL 相关的问题 - 2019-08`),f(`a`,{name:`iOS%20%E4%B8%AD%20Vue%20%E7%9A%84%E5%89%8D%E7%AB%AF%E8%B7%AF%E7%94%B1%E4%B8%8E%20URL%20%E7%9B%B8%E5%85%B3%E7%9A%84%E9%97%AE%E9%A2%98%20-%202019-08`,class:`headerlink`,href:`#iOS%20%E4%B8%AD%20Vue%20%E7%9A%84%E5%89%8D%E7%AB%AF%E8%B7%AF%E7%94%B1%E4%B8%8E%20URL%20%E7%9B%B8%E5%85%B3%E7%9A%84%E9%97%AE%E9%A2%98%20-%202019-08`})],-1),d[20]||=f(`p`,null,[s(`描述：前提，Vue 项目，路由模式为 browser。在微信中打开了一个 Vue 的 SPA 页面，初次展示的页面记为 `),f(`code`,null,`A`),s(`，前端路由跳转至页面 `),f(`code`,null,`B`),s(`。此时执行操作：在浏览器中打开、复制链接。`)],-1),d[21]||=f(`p`,null,[s(`期望结果：打开页面 `),f(`code`,null,`B`),s(`、得到页面 `),f(`code`,null,`B`),s(` 的链接。`)],-1),d[22]||=f(`p`,null,[s(`实际表现：打开了页面 `),f(`code`,null,`A`),s(`、得到的是页面 `),f(`code`,null,`A`),s(` 的链接。`)],-1),d[23]||=f(`p`,null,[s(`解决方式：放弃前端路由的跳转方式，使用原生 `),f(`code`,null,`location`),s(` 进行跳转。`)],-1),d[24]||=f(`pre`,{class:`shiki shiki-themes min-light night-owl`,style:{"--shiki-light":`#24292eff`,"--shiki-dark":`#d6deeb`,"--shiki-light-bg":`#ffffff`,"--shiki-dark-bg":`#011627`},tabindex:`0`},[f(`code`,null,[f(`span`,{class:`line`},[f(`span`,{style:{"--shiki-light":`#1976D2`,"--shiki-light-font-style":`inherit`,"--shiki-dark":`#7FDBCA`,"--shiki-dark-font-style":`italic`}},`location`),f(`span`,{style:{"--shiki-light":`#24292EFF`,"--shiki-light-font-style":`inherit`,"--shiki-dark":`#C792EA`,"--shiki-dark-font-style":`italic`}},`.`),f(`span`,{style:{"--shiki-light":`#24292EFF`,"--shiki-dark":`#BAEBE2`}},`href`),f(`span`,{style:{"--shiki-light":`#D32F2F`,"--shiki-dark":`#C792EA`}},` =`),f(`span`,{style:{"--shiki-light":`#22863A`,"--shiki-dark":`#D6DEEB`}}," `"),f(`span`,{style:{"--shiki-light":`#D32F2F`,"--shiki-dark":`#D3423E`}},"${"),f(`span`,{style:{"--shiki-light":`#1976D2`,"--shiki-light-font-style":`inherit`,"--shiki-dark":`#7FDBCA`,"--shiki-dark-font-style":`italic`}},`location`),f(`span`,{style:{"--shiki-light":`#24292EFF`,"--shiki-light-font-style":`inherit`,"--shiki-dark":`#C792EA`,"--shiki-dark-font-style":`italic`}},`.`),f(`span`,{style:{"--shiki-light":`#24292EFF`,"--shiki-dark":`#BAEBE2`}},`protocol`),f(`span`,{style:{"--shiki-light":`#D32F2F`,"--shiki-dark":`#D3423E`}},`}`),f(`span`,{style:{"--shiki-light":`#22863A`,"--shiki-dark":`#ECC48D`}},`//`),f(`span`,{style:{"--shiki-light":`#D32F2F`,"--shiki-dark":`#D3423E`}},"${"),f(`span`,{style:{"--shiki-light":`#1976D2`,"--shiki-light-font-style":`inherit`,"--shiki-dark":`#7FDBCA`,"--shiki-dark-font-style":`italic`}},`location`),f(`span`,{style:{"--shiki-light":`#24292EFF`,"--shiki-light-font-style":`inherit`,"--shiki-dark":`#C792EA`,"--shiki-dark-font-style":`italic`}},`.`),f(`span`,{style:{"--shiki-light":`#24292EFF`,"--shiki-dark":`#BAEBE2`}},`host`),f(`span`,{style:{"--shiki-light":`#D32F2F`,"--shiki-dark":`#D3423E`}},`}`),f(`span`,{style:{"--shiki-light":`#22863A`,"--shiki-dark":`#ECC48D`}},`/page/b`),f(`span`,{style:{"--shiki-light":`#22863A`,"--shiki-dark":`#D6DEEB`}},"`"),f(`span`,{style:{"--shiki-light":`#24292EFF`,"--shiki-dark":`#D6DEEB`}},`;`)])])],-1),d[25]||=f(`p`,null,`在该问题的查阅过程中，得知 hash 模式也会有这样的问题，以及需要使用到 URL 的调用（如微信分享）也需要注意该问题。`,-1)]),_:1})]),e(x).length?(n(),u(`aside`,{key:0,class:t([e(S).showIndexSidebar?`bg-[#00000080]`:`pointer-events-none`,`fixed z-20 top-0 w-full h-full left-0 overscroll-contain transition-300`,`lg:pointer-events-auto`,`lg:absolute lg:w-auto lg:bg-transparent lg:left-[calc(100%+clamp(6px,17.1875vw-176px,50px))]`]),onClick:d[0]||=(...e)=>l.hideIndexSidebar&&l.hideIndexSidebar(...e)},[f(`nav`,{class:t([`overflow-y-auto text-foreground overscroll-contain bg-background`,`w-74 max-w-4/5 h-full py-8 px-6 rounded-tl-xl rounded-bl-xl`,`absolute top-0 transition-300 right-0`,e(S).showIndexSidebar?`translate-x-0`:`translate-x-full`,`lg:p-0 lg:max-w-44 xl:max-w-50 lg:h-auto lg:max-h-[calc(100vh-130px)] lg:rounded-none`,`lg:sticky lg:top-10 lg:right-auto lg:translate-x-0 lg:bg-transparent lg:ml-0`])},[d[26]||=f(`h2`,{class:`mb-2 font-bold lg:hidden`},`TABLE OF CONTENTS`,-1),a(m,{toc:e(x)},null,8,[`toc`])],2)],2)):i(``,!0)]),d[27]||=f(`hr`,{class:`border-border mt-10`},null,-1),e(b).comments?(n(),u(`div`,y,[a(p)])):i(``,!0)],64))}}),[[`__scopeId`,`data-v-015e97cb`]]);export{b as default};