import{F as e,M as t,O as n,T as r,d as i,g as a,h as o,i as s,k as c,l,p as u,r as d,u as f,w as p}from"./app-DvX1Smg_.js";import{t as m}from"./isObject-STXFNBUz.js";import{t as h}from"./toNumber-CiYTsHHK.js";import{t as g}from"./now-BXsIGwzm.js";var _=`Expected a function`,v=Math.max,y=Math.min;function b(e,t,n){var r,i,a,o,s,c,l=0,u=!1,d=!1,f=!0;if(typeof e!=`function`)throw TypeError(_);t=h(t)||0,m(n)&&(u=!!n.leading,d=`maxWait`in n,a=d?v(h(n.maxWait)||0,t):a,f=`trailing`in n?!!n.trailing:f);function p(t){var n=r,a=i;return r=i=void 0,l=t,o=e.apply(a,n),o}function b(e){return l=e,s=setTimeout(C,t),u?p(e):o}function x(e){var n=e-c,r=e-l,i=t-n;return d?y(i,a-r):i}function S(e){var n=e-c,r=e-l;return c===void 0||n>=t||n<0||d&&r>=a}function C(){var e=g();if(S(e))return w(e);s=setTimeout(C,x(e))}function w(e){return s=void 0,f&&r?p(e):(r=i=void 0,o)}function T(){s!==void 0&&clearTimeout(s),l=0,r=c=i=s=void 0}function E(){return s===void 0?o:w(g())}function D(){var e=g(),n=S(e);if(r=arguments,i=this,c=e,n){if(s===void 0)return b(c);if(d)return clearTimeout(s),s=setTimeout(C,t),p(c)}return s===void 0&&(s=setTimeout(C,t)),o}return D.cancel=T,D.flush=E,D}var x=b,S=`Expected a function`;function C(e,t,n){var r=!0,i=!0;if(typeof e!=`function`)throw TypeError(S);return m(n)&&(r=`leading`in n?!!n.leading:r,i=`trailing`in n?!!n.trailing:i),x(e,t,{leading:r,maxWait:t,trailing:i})}var w=C,T={class:`utterances-wrapper`,ref:`comment`},E=a({name:`Comment`,__name:`comment`,setup(e){let{enable:n,...i}={...{mode:`production`,title:`Daief's Blog`,url:`https://daief.tech`,author:`daief`,avatar:`https://avatars.githubusercontent.com/u/19222089?v=4`,since:2017,googleAnalytics:{id:`G-NPFWE07FQ2`},utteranc:{enable:!0,repo:`daief/daief.github.io`,"issue-term":`pathname`,label:`Comment`,lightTheme:`github-light`,darkTheme:`github-dark-orange`}}.utteranc},{isDark:a}=d(),o=c(`comment`),s=()=>{let e=o.value?.querySelector(`.utterances-frame`);e&&e.contentWindow?.postMessage({type:`set-theme`,theme:a.value?i.darkTheme:i.lightTheme},`https://utteranc.es`)};return p(()=>{if(!o.value||!n)return;let e=document.createElement(`script`);e.async=!0,e.defer=!0,e.crossOrigin=`anonymous`,Object.entries({...i}).forEach(t=>{e.setAttribute(...t)}),e.setAttribute(`theme`,i.lightTheme),e.src=`https://utteranc.es/client.js`,o.value.append(e);let t=e=>{e.origin===`https://utteranc.es`&&(s(),window.removeEventListener(`message`,t))};window.addEventListener(`message`,t)}),t(()=>{a.value,s()}),(e,t)=>(r(),u(`div`,null,[t[0]||=f(`h2`,{class:`text-xl font-bold mb-5`},[f(`a`,{href:`#comment`,class:`text-accent foreground-link`},`留言板`)],-1),f(`div`,T,null,512)]))}}),D=a({name:`Toc`,__name:`toc`,props:{toc:null},setup(t){let a=l(()=>{let e=new Map;return t.toc.forEach(function t(n){e.set(n.id,n),n.children?.forEach(t)}),e}),c=e(null),u=l(()=>{let e=[],t=c.value;for(;t;)e.push(t),t=a.value.get(t.parent)||null;return e.map(e=>e.id)});{let e=l(()=>Array.from(a.value.values().map(e=>document.getElementById(e.id)))),t=w(()=>{let t=e.value;for(let e=0;e<t.length;e++){let n=t[e],r=t[e+1],i=n.getBoundingClientRect(),o=r?.getBoundingClientRect();if(e===0&&i.top>20){c.value=a.value.get(n.id);return}if(!o){c.value=a.value.get(n.id);return}if(i.top<=20&&o.top>20){c.value=a.value.get(n.id);return}}},400,{leading:!0});s(window,`scroll`,t),p(()=>{t()})}let d=(e,t=0)=>e?.length?o(`ul`,{class:[{"group/root":t===0}]},[e.map(e=>{let n=u.value.includes(e.id);return o(`li`,{key:e.id},[o(`a`,{key:e.id,href:`#${e.id}`,class:[`group/item text-foreground flex flex-nowrap items-center mb-1.5`]},[o(`span`,{class:[`hidden`,`lg:block h-1 bg-foreground rounded-sm opacity-30 transition-300 shrink-0`,`group-hover/item:opacity-85`],style:{width:`${20-t*4}px`,marginRight:`${32-(6-t)*4}px`}},null),o(`span`,{class:[n?`font-bold text-foreground`:``,`opacity-100`,`text-[color-mix(in_srgb,var(--foreground)_70%,transparent)] text-sm overflow-hidden text-ellipsis whitespace-nowrap transition-300`,`max-w-full flex-grow`,`lg:opacity-0 lg:max-w-46`,`group-hover/root:opacity-100 group-hover/item:text-foreground`,n?`lg:opacity-100`:`lg:opacity-0`],title:e.text,innerHTML:e.text},null)]),d(e.children,t+1)])})]):null;return(e,a)=>(r(),i(n(d(t.toc))))}});export{E as n,D as t};