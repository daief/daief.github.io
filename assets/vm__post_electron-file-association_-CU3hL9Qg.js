import{L as e,R as t,T as n,c as r,f as i,h as a,j as o,m as s,n as c,o as l,p as u,t as d,u as f}from"./app-DvX1Smg_.js";import"./isObject-STXFNBUz.js";import"./isSymbol-CUbBZ03s.js";import"./toNumber-CiYTsHHK.js";import"./now-BXsIGwzm.js";import{n as p,t as m}from"./toc-DNILfFl5.js";import{n as h,t as g}from"./meta-info-C-tMy3g2.js";import{t as _}from"./use-page-title-CHxbaOlI.js";var v={class:`relative`},y={key:0,class:`mt-10`},b=l(Object.assign({name:`Article`},{__name:`vm:_post_electron-file-association_`,setup(l){_({title:`Electron 实现文件关联`,description:``});let{meta:b,toc:x}={meta:{title:`Electron 实现文件关联`,id:`electron-file-association`,date:`2023-05-04T11:45:57.000Z`,keywords:null,tags:[`桌面开发`,`Electron`,`Inno Setup`],sort:0,comments:!0,draft:!1},toc:[{id:`%E6%96%87%E4%BB%B6%E5%85%B3%E8%81%94`,text:`文件关联`,level:2,children:[{id:`Windows`,text:`Windows`,level:3,children:[{id:`%E5%88%B7%E6%96%B0%E5%9B%BE%E6%A0%87`,text:`刷新图标`,level:4,children:[],parent:`Windows`}],parent:`%E6%96%87%E4%BB%B6%E5%85%B3%E8%81%94`},{id:`Mac`,text:`Mac`,level:3,children:[],parent:`%E6%96%87%E4%BB%B6%E5%85%B3%E8%81%94`}],parent:``},{id:`Electron%20%E8%AF%BB%E5%8F%96%E6%96%87%E4%BB%B6`,text:`Electron 读取文件`,level:2,children:[],parent:``},{id:`%E7%BB%93%E8%AF%AD`,text:`结语`,level:2,children:[],parent:``}]},{appState:S}=d();return(l,d)=>(n(),u(r,null,[f(`div`,v,[f(`article`,null,[f(`header`,null,[d[1]||=f(`h1`,{class:`text-foreground text-3xl font-bold mb-4`},` Electron 实现文件关联 `,-1),a(g,{meta:e(b)},null,8,[`meta`])]),a(h,{class:`mt-6`},{default:o(()=>[d[25]||=f(`p`,null,`最近在做一个 Electron 桌面应用，需要实现文件关联，把特定后缀的文件关联到应用上，双击文件可以直接打开应用并读取文件。`,-1),f(`p`,null,[d[4]||=s(`文件关联与操作系统相关性比较大，不同的操作系统实现方式也会不同。不过如果使用 `,-1),a(c,{target:`_blank`,href:`https://www.electron.build/`},{default:o(()=>[...d[2]||=[s(`electron-builder`,-1)]]),_:1}),d[5]||=s(` 进行应用打包，可以直接通过 `,-1),a(c,{href:`configuration/configuration.html#overridable-per-platform-options`},{default:o(()=>[...d[3]||=[s(`fileAssociations`,-1)]]),_:1}),d[6]||=s(` 配置来实现文件关联。`,-1)]),f(`p`,null,[d[8]||=s(`而我这边使用 `,-1),a(c,{target:`_blank`,href:`https://github.com/electron/electron-packager`},{default:o(()=>[...d[7]||=[s(`electron-packager`,-1)]]),_:1}),d[9]||=s(` 打包，不会直接产出安装程序，所以需要自行实现文件关联，同时可以借机进一步了解 Windows 和 Mac 实现文件关联的细节。`,-1)]),d[26]||=f(`a`,{id:`more`,href:`#more`,class:`block`},null,-1),d[27]||=f(`h2`,{id:`%E6%96%87%E4%BB%B6%E5%85%B3%E8%81%94`},[s(`文件关联`),f(`a`,{name:`%E6%96%87%E4%BB%B6%E5%85%B3%E8%81%94`,class:`headerlink`,href:`#%E6%96%87%E4%BB%B6%E5%85%B3%E8%81%94`})],-1),d[28]||=f(`p`,null,`文件关联的实现和表现在不同的操作系统上会有所不同，但核心期望是一致的：`,-1),d[29]||=f(`ul`,null,[f(`li`,null,`应用安装完成后，特定的文件类型会自动关联到应用上，文件图标需要根据配置有所变化`),f(`li`,null,`双击能够直接通过目标应用打开；或者右键在其他应用中能够选择目标应用`),f(`li`,null,`应用卸载后，文件关联需要解除、文件图标显示的恢复`)],-1),d[30]||=f(`h3`,{id:`Windows`},[s(`Windows`),f(`a`,{name:`Windows`,class:`headerlink`,href:`#Windows`})],-1),d[31]||=f(`p`,null,[s(`Windows 的文件关联是通过注册表实现的，注册表中的 `),f(`code`,null,`HKEY_CLASSES_ROOT（HKCR）`),s(` 节点包含了文件扩展名关联信息。`)],-1),d[32]||=f(`blockquote`,null,[f(`p`,null,[s(`在实际的注册表中，不推荐直接修改 `),f(`code`,null,`HKEY_CLASSES_ROOT`),s(`，而是修改 `),f(`code`,null,`HKEY_CURRENT_USER\\Software\\Classes`),s(` 或 `),f(`code`,null,`HKEY_LOCAL_MACHINE\\Software\\Classes`),s(`。`)]),f(`p`,null,[f(`code`,null,`HKEY_CLASSES_ROOT`),s(` 是 `),f(`code`,null,`HKEY_LOCAL_MACHINE\\Software\\Classes`),s(` 和 `),f(`code`,null,`HKEY_CURRENT_USER\\Software\\Classes`),s(` 的合并，如果两个节点中都有相同的键，那么 `),f(`code`,null,`HKEY_CURRENT_USER\\Software\\Classes`),s(` 会覆盖 `),f(`code`,null,`HKEY_LOCAL_MACHINE\\Software\\Classes`),s(` 中的键。`)]),f(`p`,null,[s(`本文为了表述方便，都直接使用 `),f(`code`,null,`HKEY_CLASSES_ROOT`),s(`。`)])],-1),d[33]||=f(`p`,null,[s(`打开“注册表编辑器”，找到其中 `),f(`code`,null,`HKEY_CLASSES_ROOT\\.js`),s(` 节点，该节点存储了 `),f(`code`,null,`.js`),s(` 文件类型的关联信息；`),f(`code`,null,`HKEY_CLASSES_ROOT\\VSCode.js`),s(` 节点存储了 `),f(`code`,null,`.js`),s(` 文件类型的默认应用信息。`)],-1),d[34]||=f(`blockquote`,null,[f(`p`,null,`注：这里是以 vscode 的注册表信息为例，需要安装了 vscode 才会有这些内容。`)],-1),d[35]||=f(`p`,null,[f(`img`,{alt:`1-registry-js.png`,loading:`lazy`,title:`1-registry-js.png`,class:`post-image`,src:`/assets/1-registry-js-BQfYOQbA.png`,onerror:`this.onerror=null;this.src='/images/image-error.jpg';`})],-1),d[36]||=f(`p`,null,`要实现文件关联，就要做到图中的效果，根据理解，主要包含两个步骤：`,-1),d[37]||=f(`ol`,null,[f(`li`,null,[f(`p`,null,[s(`注册应用程序 ProgId，即图中的 `),f(`code`,null,`VSCode.js`)]),f(`ul`,null,[f(`li`,null,`DefaultIcon：设置文件图标`),f(`li`,null,[s(`shell\\open\\command：设置通过文件打开时的命令，`),f(`code`,null,`%1`),s(` 就是目标文件的路径，这里会影响程序中的读取`)])])]),f(`li`,null,[f(`p`,null,[s(`注册文件扩展名关联信息，即图中的 `),f(`code`,null,`.js`),s(`，在 `),f(`code`,null,`OpenWithProgids`),s(` 中设置关联的应用程序，上图中的 `),f(`code`,null,`VSCode.js`),s(` 就是关联的目标应用`)])])],-1),d[38]||=f(`p`,null,[s(`我的应用程序使用 `),f(`code`,null,`Inno Setup`),s(` 制作安装程序，基于 `),f(`code`,null,`Inno Setup`),s(` 可以很方便地在安装/卸载过程修改注册表。`)],-1),d[39]||=f(`p`,null,[s(`比如有一个 `),f(`code`,null,`MyProg.exe`),s(` 程序，想要关联 `),f(`code`,null,`.myp`),s(` 后缀的文件，那么 Inno Setup 脚本可以是这样（只保留了关键信息）：`)],-1),d[40]||=f(`pre`,{class:`shiki shiki-themes min-light night-owl`,style:{"--shiki-light":`#24292eff`,"--shiki-dark":`#d6deeb`,"--shiki-light-bg":`#ffffff`,"--shiki-dark-bg":`#011627`},tabindex:`0`},[f(`code`,null,[f(`span`,{class:`line`},[f(`span`,{style:{"--shiki-light":`#24292EFF`,"--shiki-dark":`#D6DEEB`}},`[Setup]`)]),s(`
`),f(`span`,{class:`line`},[f(`span`,{style:{"--shiki-light":`#C2C3C5`,"--shiki-light-font-style":`inherit`,"--shiki-dark":`#637777`,"--shiki-dark-font-style":`italic`}},`; 这一行能在安装/卸载之后自动刷新资源管理器，避免图标缓存的问题`)]),s(`
`),f(`span`,{class:`line`},[f(`span`,{style:{"--shiki-light":`#D32F2F`,"--shiki-dark":`#C792EA`}},`ChangesAssociations`),f(`span`,{style:{"--shiki-light":`#D32F2F`,"--shiki-dark":`#D6DEEB`}},`=`),f(`span`,{style:{"--shiki-light":`#24292EFF`,"--shiki-dark":`#D6DEEB`}},`yes`)]),s(`
`),f(`span`,{class:`line`}),s(`
`),f(`span`,{class:`line`},[f(`span`,{style:{"--shiki-light":`#24292EFF`,"--shiki-dark":`#D6DEEB`}},`[Registry]`)]),s(`
`),f(`span`,{class:`line`},[f(`span`,{style:{"--shiki-light":`#C2C3C5`,"--shiki-light-font-style":`inherit`,"--shiki-dark":`#637777`,"--shiki-dark-font-style":`italic`}},`; 创建 ProgID`)]),s(`
`),f(`span`,{class:`line`},[f(`span`,{style:{"--shiki-light":`#24292EFF`,"--shiki-dark":`#D6DEEB`}},`Root: HKCR`),f(`span`,{style:{"--shiki-light":`#C2C3C5`,"--shiki-light-font-style":`inherit`,"--shiki-dark":`#637777`,"--shiki-dark-font-style":`italic`}},`; SubKey: "MyProg.myp"; ValueData: "myp 自定义文件"; ValueType: string; Flags: uninsdeletekey noerror;`)]),s(`
`),f(`span`,{class:`line`}),s(`
`),f(`span`,{class:`line`},[f(`span`,{style:{"--shiki-light":`#C2C3C5`,"--shiki-light-font-style":`inherit`,"--shiki-dark":`#637777`,"--shiki-dark-font-style":`italic`}},`; 图标设置成应用程序的图标`)]),s(`
`),f(`span`,{class:`line`},[f(`span`,{style:{"--shiki-light":`#24292EFF`,"--shiki-dark":`#D6DEEB`}},`Root: HKCR`),f(`span`,{style:{"--shiki-light":`#C2C3C5`,"--shiki-light-font-style":`inherit`,"--shiki-dark":`#637777`,"--shiki-dark-font-style":`italic`}},`; SubKey: "MyProg.myp\\DefaultIcon"; ValueData: "{app}\\{#appExe}"; ValueType: string; Flags: uninsdeletekey noerror;`)]),s(`
`),f(`span`,{class:`line`}),s(`
`),f(`span`,{class:`line`},[f(`span`,{style:{"--shiki-light":`#C2C3C5`,"--shiki-light-font-style":`inherit`,"--shiki-dark":`#637777`,"--shiki-dark-font-style":`italic`}},`; 指定打开文件的命令，设置传参方式`)]),s(`
`),f(`span`,{class:`line`},[f(`span`,{style:{"--shiki-light":`#24292EFF`,"--shiki-dark":`#D6DEEB`}},`Root: HKCR`),f(`span`,{style:{"--shiki-light":`#C2C3C5`,"--shiki-light-font-style":`inherit`,"--shiki-dark":`#637777`,"--shiki-dark-font-style":`italic`}},`; Subkey: "MyProg.myp\\shell\\open\\command"; ValueType: string; ValueName: ""; ValueData: "{app}\\{#appExe} --open-file=""%1"""; Flags: uninsdeletekey`)]),s(`
`),f(`span`,{class:`line`}),s(`
`),f(`span`,{class:`line`},[f(`span`,{style:{"--shiki-light":`#C2C3C5`,"--shiki-light-font-style":`inherit`,"--shiki-dark":`#637777`,"--shiki-dark-font-style":`italic`}},`; 指定 .myp 文件的 ProgID`)]),s(`
`),f(`span`,{class:`line`},[f(`span`,{style:{"--shiki-light":`#24292EFF`,"--shiki-dark":`#D6DEEB`}},`Root: HKCR`),f(`span`,{style:{"--shiki-light":`#C2C3C5`,"--shiki-light-font-style":`inherit`,"--shiki-dark":`#637777`,"--shiki-dark-font-style":`italic`}},`; Subkey: ".myp\\OpenWithProgids"; ValueType: string; ValueName: "MyProg.myp"; ValueData: ""; Flags: uninsdeletekey`)])])],-1),d[41]||=f(`blockquote`,null,[f(`p`,null,`实际上对于文件关联功能，可以使用 Inno Setup 的可视化操作设置关联信息，设置完之后生成脚本、再进行修改`)],-1),d[42]||=f(`p`,null,[s(`如此便完成了文件关联的设置，安装完成后，`),f(`code`,null,`.myp`),s(` 文件会自动关联到 `),f(`code`,null,`MyProg.exe`),s(` 上，双击文件就可以直接打开应用了。除此之外，还可以在右键菜单上透出应用信息，当默认关联的程序不是目标程序时，可以快速找到目标程序，效果以及相应的注册表信息如下：`)],-1),d[43]||=f(`p`,null,[f(`img`,{alt:`2-rightclick-open.png`,loading:`lazy`,title:`2-rightclick-open.png`,class:`post-image`,src:`/assets/2-rightclick-open-oBrMmyc-.png`,onerror:`this.onerror=null;this.src='/images/image-error.jpg';`})],-1),d[44]||=f(`p`,null,`相应脚本逻辑如下：`,-1),d[45]||=f(`pre`,{class:`shiki shiki-themes min-light night-owl`,style:{"--shiki-light":`#24292eff`,"--shiki-dark":`#d6deeb`,"--shiki-light-bg":`#ffffff`,"--shiki-dark-bg":`#011627`},tabindex:`0`},[f(`code`,null,[f(`span`,{class:`line`},[f(`span`,{style:{"--shiki-light":`#24292EFF`,"--shiki-dark":`#D6DEEB`}},`[Registry]`)]),s(`
`),f(`span`,{class:`line`},[f(`span`,{style:{"--shiki-light":`#C2C3C5`,"--shiki-light-font-style":`inherit`,"--shiki-dark":`#637777`,"--shiki-dark-font-style":`italic`}},`; 设置右键内容`)]),s(`
`),f(`span`,{class:`line`},[f(`span`,{style:{"--shiki-light":`#24292EFF`,"--shiki-dark":`#D6DEEB`}},`Root: HKCR`),f(`span`,{style:{"--shiki-light":`#C2C3C5`,"--shiki-light-font-style":`inherit`,"--shiki-dark":`#637777`,"--shiki-dark-font-style":`italic`}},`; Subkey: "*\\shell\\MyProg"; ValueType: string; ValueName: ""; ValueData: "通过 MyProg 打开"; Flags: uninsdeletekey`)]),s(`
`),f(`span`,{class:`line`}),s(`
`),f(`span`,{class:`line`},[f(`span`,{style:{"--shiki-light":`#C2C3C5`,"--shiki-light-font-style":`inherit`,"--shiki-dark":`#637777`,"--shiki-dark-font-style":`italic`}},`; 设置右键打开的命令`)]),s(`
`),f(`span`,{class:`line`},[f(`span`,{style:{"--shiki-light":`#24292EFF`,"--shiki-dark":`#D6DEEB`}},`Root: HKCR`),f(`span`,{style:{"--shiki-light":`#C2C3C5`,"--shiki-light-font-style":`inherit`,"--shiki-dark":`#637777`,"--shiki-dark-font-style":`italic`}},`; Subkey: "*\\shell\\MyProg\\command"; ValueType: string; ValueName: ""; ValueData: "{app}\\{#appExe} --open-file=""%1"""; Flags: uninsdeletekey`)]),s(`
`),f(`span`,{class:`line`}),s(`
`),f(`span`,{class:`line`},[f(`span`,{style:{"--shiki-light":`#C2C3C5`,"--shiki-light-font-style":`inherit`,"--shiki-dark":`#637777`,"--shiki-dark-font-style":`italic`}},`; 设置右键的图标`)]),s(`
`),f(`span`,{class:`line`},[f(`span`,{style:{"--shiki-light":`#24292EFF`,"--shiki-dark":`#D6DEEB`}},`Root: HKCR`),f(`span`,{style:{"--shiki-light":`#C2C3C5`,"--shiki-light-font-style":`inherit`,"--shiki-dark":`#637777`,"--shiki-dark-font-style":`italic`}},`; Subkey: "*\\shell\\MyProg"; ValueType: string; ValueName: "Icon"; ValueData: "{app}\\{#appExe}"; Flags: uninsdeletekey`)])])],-1),d[46]||=f(`h4`,{id:`%E5%88%B7%E6%96%B0%E5%9B%BE%E6%A0%87`},[s(`刷新图标`),f(`a`,{name:`%E5%88%B7%E6%96%B0%E5%9B%BE%E6%A0%87`,class:`headerlink`,href:`#%E5%88%B7%E6%96%B0%E5%9B%BE%E6%A0%87`})],-1),d[47]||=f(`p`,null,[s(`基于 Inno Setup，通过设置 `),f(`code`,null,`ChangesAssociations=yes`),s(`，可以在安装/卸载之后自动刷新资源管理器，避免图标缓存的问题。`)],-1),f(`p`,null,[d[11]||=s(`如果不是使用 Inno Setup 或是其他不支持这种快捷方式的工具，可以通过调用 `,-1),a(c,{target:`_blank`,href:`https://github.com/crazy-max/IconsRefresh/`},{default:o(()=>[...d[10]||=[s(`IconsRefresh`,-1)]]),_:1}),d[12]||=s(` 来实现刷新。`,-1)]),d[48]||=f(`p`,null,`网上的一些实现都需要重启电脑或资源管理器，体验不是很好。这个工具无需任何重启，通过调用系统 API 来通知资源管理器刷新。`,-1),d[49]||=f(`h3`,{id:`Mac`},[s(`Mac`),f(`a`,{name:`Mac`,class:`headerlink`,href:`#Mac`})],-1),d[50]||=f(`p`,null,[s(`在 Mac 上实现文件关联就比较简单了，对于应用程序，相关内容都在程序清单中，只需要在 `),f(`code`,null,`Info.plist`),s(` 中添加 `),f(`code`,null,`CFBundleDocumentTypes`),s(` 节点即可，如下：`)],-1),d[51]||=f(`pre`,{class:`shiki shiki-themes min-light night-owl`,style:{"--shiki-light":`#24292eff`,"--shiki-dark":`#d6deeb`,"--shiki-light-bg":`#ffffff`,"--shiki-dark-bg":`#011627`},tabindex:`0`},[f(`code`,null,[f(`span`,{class:`line`},[f(`span`,{style:{"--shiki-light":`#24292EFF`,"--shiki-dark":`#7FDBCA`}},`<`),f(`span`,{style:{"--shiki-light":`#22863A`,"--shiki-dark":`#CAECE6`}},`key`),f(`span`,{style:{"--shiki-light":`#24292EFF`,"--shiki-dark":`#7FDBCA`}},`>`),f(`span`,{style:{"--shiki-light":`#24292EFF`,"--shiki-dark":`#D6DEEB`}},`CFBundleDocumentTypes`),f(`span`,{style:{"--shiki-light":`#24292EFF`,"--shiki-dark":`#7FDBCA`}},`</`),f(`span`,{style:{"--shiki-light":`#22863A`,"--shiki-dark":`#CAECE6`}},`key`),f(`span`,{style:{"--shiki-light":`#24292EFF`,"--shiki-dark":`#7FDBCA`}},`>`)]),s(`
`),f(`span`,{class:`line`},[f(`span`,{style:{"--shiki-light":`#24292EFF`,"--shiki-dark":`#7FDBCA`}},`<`),f(`span`,{style:{"--shiki-light":`#22863A`,"--shiki-dark":`#CAECE6`}},`array`),f(`span`,{style:{"--shiki-light":`#24292EFF`,"--shiki-dark":`#7FDBCA`}},`>`)]),s(`
`),f(`span`,{class:`line`},[f(`span`,{style:{"--shiki-light":`#24292EFF`,"--shiki-dark":`#7FDBCA`}},`  <`),f(`span`,{style:{"--shiki-light":`#22863A`,"--shiki-dark":`#CAECE6`}},`dict`),f(`span`,{style:{"--shiki-light":`#24292EFF`,"--shiki-dark":`#7FDBCA`}},`>`)]),s(`
`),f(`span`,{class:`line`},[f(`span`,{style:{"--shiki-light":`#C2C3C5`,"--shiki-light-font-style":`inherit`,"--shiki-dark":`#637777`,"--shiki-dark-font-style":`italic`}},`    <!-- 定义后缀 -->`)]),s(`
`),f(`span`,{class:`line`},[f(`span`,{style:{"--shiki-light":`#24292EFF`,"--shiki-dark":`#7FDBCA`}},`    <`),f(`span`,{style:{"--shiki-light":`#22863A`,"--shiki-dark":`#CAECE6`}},`key`),f(`span`,{style:{"--shiki-light":`#24292EFF`,"--shiki-dark":`#7FDBCA`}},`>`),f(`span`,{style:{"--shiki-light":`#24292EFF`,"--shiki-dark":`#D6DEEB`}},`CFBundleTypeExtensions`),f(`span`,{style:{"--shiki-light":`#24292EFF`,"--shiki-dark":`#7FDBCA`}},`</`),f(`span`,{style:{"--shiki-light":`#22863A`,"--shiki-dark":`#CAECE6`}},`key`),f(`span`,{style:{"--shiki-light":`#24292EFF`,"--shiki-dark":`#7FDBCA`}},`>`)]),s(`
`),f(`span`,{class:`line`},[f(`span`,{style:{"--shiki-light":`#24292EFF`,"--shiki-dark":`#7FDBCA`}},`    <`),f(`span`,{style:{"--shiki-light":`#22863A`,"--shiki-dark":`#CAECE6`}},`array`),f(`span`,{style:{"--shiki-light":`#24292EFF`,"--shiki-dark":`#7FDBCA`}},`>`)]),s(`
`),f(`span`,{class:`line`},[f(`span`,{style:{"--shiki-light":`#24292EFF`,"--shiki-dark":`#7FDBCA`}},`      <`),f(`span`,{style:{"--shiki-light":`#22863A`,"--shiki-dark":`#CAECE6`}},`string`),f(`span`,{style:{"--shiki-light":`#24292EFF`,"--shiki-dark":`#7FDBCA`}},`>`),f(`span`,{style:{"--shiki-light":`#24292EFF`,"--shiki-dark":`#D6DEEB`}},`js`),f(`span`,{style:{"--shiki-light":`#24292EFF`,"--shiki-dark":`#7FDBCA`}},`</`),f(`span`,{style:{"--shiki-light":`#22863A`,"--shiki-dark":`#CAECE6`}},`string`),f(`span`,{style:{"--shiki-light":`#24292EFF`,"--shiki-dark":`#7FDBCA`}},`>`)]),s(`
`),f(`span`,{class:`line`},[f(`span`,{style:{"--shiki-light":`#24292EFF`,"--shiki-dark":`#7FDBCA`}},`    </`),f(`span`,{style:{"--shiki-light":`#22863A`,"--shiki-dark":`#CAECE6`}},`array`),f(`span`,{style:{"--shiki-light":`#24292EFF`,"--shiki-dark":`#7FDBCA`}},`>`)]),s(`
`),f(`span`,{class:`line`}),s(`
`),f(`span`,{class:`line`},[f(`span`,{style:{"--shiki-light":`#C2C3C5`,"--shiki-light-font-style":`inherit`,"--shiki-dark":`#637777`,"--shiki-dark-font-style":`italic`}},`    <!-- 定义图标 -->`)]),s(`
`),f(`span`,{class:`line`},[f(`span`,{style:{"--shiki-light":`#24292EFF`,"--shiki-dark":`#7FDBCA`}},`    <`),f(`span`,{style:{"--shiki-light":`#22863A`,"--shiki-dark":`#CAECE6`}},`key`),f(`span`,{style:{"--shiki-light":`#24292EFF`,"--shiki-dark":`#7FDBCA`}},`>`),f(`span`,{style:{"--shiki-light":`#24292EFF`,"--shiki-dark":`#D6DEEB`}},`CFBundleTypeIconFile`),f(`span`,{style:{"--shiki-light":`#24292EFF`,"--shiki-dark":`#7FDBCA`}},`</`),f(`span`,{style:{"--shiki-light":`#22863A`,"--shiki-dark":`#CAECE6`}},`key`),f(`span`,{style:{"--shiki-light":`#24292EFF`,"--shiki-dark":`#7FDBCA`}},`>`)]),s(`
`),f(`span`,{class:`line`},[f(`span`,{style:{"--shiki-light":`#24292EFF`,"--shiki-dark":`#7FDBCA`}},`    <`),f(`span`,{style:{"--shiki-light":`#22863A`,"--shiki-dark":`#CAECE6`}},`string`),f(`span`,{style:{"--shiki-light":`#24292EFF`,"--shiki-dark":`#7FDBCA`}},`>`),f(`span`,{style:{"--shiki-light":`#24292EFF`,"--shiki-dark":`#D6DEEB`}},`icon.icns`),f(`span`,{style:{"--shiki-light":`#24292EFF`,"--shiki-dark":`#7FDBCA`}},`</`),f(`span`,{style:{"--shiki-light":`#22863A`,"--shiki-dark":`#CAECE6`}},`string`),f(`span`,{style:{"--shiki-light":`#24292EFF`,"--shiki-dark":`#7FDBCA`}},`>`)]),s(`
`),f(`span`,{class:`line`}),s(`
`),f(`span`,{class:`line`},[f(`span`,{style:{"--shiki-light":`#C2C3C5`,"--shiki-light-font-style":`inherit`,"--shiki-dark":`#637777`,"--shiki-dark-font-style":`italic`}},`    <!-- 定义描述 -->`)]),s(`
`),f(`span`,{class:`line`},[f(`span`,{style:{"--shiki-light":`#24292EFF`,"--shiki-dark":`#7FDBCA`}},`    <`),f(`span`,{style:{"--shiki-light":`#22863A`,"--shiki-dark":`#CAECE6`}},`key`),f(`span`,{style:{"--shiki-light":`#24292EFF`,"--shiki-dark":`#7FDBCA`}},`>`),f(`span`,{style:{"--shiki-light":`#24292EFF`,"--shiki-dark":`#D6DEEB`}},`CFBundleTypeName`),f(`span`,{style:{"--shiki-light":`#24292EFF`,"--shiki-dark":`#7FDBCA`}},`</`),f(`span`,{style:{"--shiki-light":`#22863A`,"--shiki-dark":`#CAECE6`}},`key`),f(`span`,{style:{"--shiki-light":`#24292EFF`,"--shiki-dark":`#7FDBCA`}},`>`)]),s(`
`),f(`span`,{class:`line`},[f(`span`,{style:{"--shiki-light":`#24292EFF`,"--shiki-dark":`#7FDBCA`}},`    <`),f(`span`,{style:{"--shiki-light":`#22863A`,"--shiki-dark":`#CAECE6`}},`string`),f(`span`,{style:{"--shiki-light":`#24292EFF`,"--shiki-dark":`#7FDBCA`}},`>`),f(`span`,{style:{"--shiki-light":`#24292EFF`,"--shiki-dark":`#D6DEEB`}},`JavaScript File`),f(`span`,{style:{"--shiki-light":`#24292EFF`,"--shiki-dark":`#7FDBCA`}},`</`),f(`span`,{style:{"--shiki-light":`#22863A`,"--shiki-dark":`#CAECE6`}},`string`),f(`span`,{style:{"--shiki-light":`#24292EFF`,"--shiki-dark":`#7FDBCA`}},`>`)]),s(`
`),f(`span`,{class:`line`}),s(`
`),f(`span`,{class:`line`},[f(`span`,{style:{"--shiki-light":`#C2C3C5`,"--shiki-light-font-style":`inherit`,"--shiki-dark":`#637777`,"--shiki-dark-font-style":`italic`}},`    <!-- 定义类型，可选为 Viewer | Editor | Shell | None -->`)]),s(`
`),f(`span`,{class:`line`},[f(`span`,{style:{"--shiki-light":`#24292EFF`,"--shiki-dark":`#7FDBCA`}},`    <`),f(`span`,{style:{"--shiki-light":`#22863A`,"--shiki-dark":`#CAECE6`}},`key`),f(`span`,{style:{"--shiki-light":`#24292EFF`,"--shiki-dark":`#7FDBCA`}},`>`),f(`span`,{style:{"--shiki-light":`#24292EFF`,"--shiki-dark":`#D6DEEB`}},`CFBundleTypeRole`),f(`span`,{style:{"--shiki-light":`#24292EFF`,"--shiki-dark":`#7FDBCA`}},`</`),f(`span`,{style:{"--shiki-light":`#22863A`,"--shiki-dark":`#CAECE6`}},`key`),f(`span`,{style:{"--shiki-light":`#24292EFF`,"--shiki-dark":`#7FDBCA`}},`>`)]),s(`
`),f(`span`,{class:`line`},[f(`span`,{style:{"--shiki-light":`#24292EFF`,"--shiki-dark":`#7FDBCA`}},`    <`),f(`span`,{style:{"--shiki-light":`#22863A`,"--shiki-dark":`#CAECE6`}},`string`),f(`span`,{style:{"--shiki-light":`#24292EFF`,"--shiki-dark":`#7FDBCA`}},`>`),f(`span`,{style:{"--shiki-light":`#24292EFF`,"--shiki-dark":`#D6DEEB`}},`Editor`),f(`span`,{style:{"--shiki-light":`#24292EFF`,"--shiki-dark":`#7FDBCA`}},`</`),f(`span`,{style:{"--shiki-light":`#22863A`,"--shiki-dark":`#CAECE6`}},`string`),f(`span`,{style:{"--shiki-light":`#24292EFF`,"--shiki-dark":`#7FDBCA`}},`>`)]),s(`
`),f(`span`,{class:`line`}),s(`
`),f(`span`,{class:`line`},[f(`span`,{style:{"--shiki-light":`#C2C3C5`,"--shiki-light-font-style":`inherit`,"--shiki-dark":`#637777`,"--shiki-dark-font-style":`italic`}},`    <!-- 定义优先级，可选为 Owner | Alternate | None -->`)]),s(`
`),f(`span`,{class:`line`},[f(`span`,{style:{"--shiki-light":`#24292EFF`,"--shiki-dark":`#7FDBCA`}},`    <`),f(`span`,{style:{"--shiki-light":`#22863A`,"--shiki-dark":`#CAECE6`}},`key`),f(`span`,{style:{"--shiki-light":`#24292EFF`,"--shiki-dark":`#7FDBCA`}},`>`),f(`span`,{style:{"--shiki-light":`#24292EFF`,"--shiki-dark":`#D6DEEB`}},`LSHandlerRank`),f(`span`,{style:{"--shiki-light":`#24292EFF`,"--shiki-dark":`#7FDBCA`}},`</`),f(`span`,{style:{"--shiki-light":`#22863A`,"--shiki-dark":`#CAECE6`}},`key`),f(`span`,{style:{"--shiki-light":`#24292EFF`,"--shiki-dark":`#7FDBCA`}},`>`)]),s(`
`),f(`span`,{class:`line`},[f(`span`,{style:{"--shiki-light":`#24292EFF`,"--shiki-dark":`#7FDBCA`}},`    <`),f(`span`,{style:{"--shiki-light":`#22863A`,"--shiki-dark":`#CAECE6`}},`string`),f(`span`,{style:{"--shiki-light":`#24292EFF`,"--shiki-dark":`#7FDBCA`}},`>`),f(`span`,{style:{"--shiki-light":`#24292EFF`,"--shiki-dark":`#D6DEEB`}},`Owner`),f(`span`,{style:{"--shiki-light":`#24292EFF`,"--shiki-dark":`#7FDBCA`}},`</`),f(`span`,{style:{"--shiki-light":`#22863A`,"--shiki-dark":`#CAECE6`}},`string`),f(`span`,{style:{"--shiki-light":`#24292EFF`,"--shiki-dark":`#7FDBCA`}},`>`)]),s(`
`),f(`span`,{class:`line`},[f(`span`,{style:{"--shiki-light":`#24292EFF`,"--shiki-dark":`#7FDBCA`}},`  </`),f(`span`,{style:{"--shiki-light":`#22863A`,"--shiki-dark":`#CAECE6`}},`dict`),f(`span`,{style:{"--shiki-light":`#24292EFF`,"--shiki-dark":`#7FDBCA`}},`>`)]),s(`
`),f(`span`,{class:`line`},[f(`span`,{style:{"--shiki-light":`#24292EFF`,"--shiki-dark":`#7FDBCA`}},`</`),f(`span`,{style:{"--shiki-light":`#22863A`,"--shiki-dark":`#CAECE6`}},`array`),f(`span`,{style:{"--shiki-light":`#24292EFF`,"--shiki-dark":`#7FDBCA`}},`>`)])])],-1),d[52]||=f(`p`,null,`我没有找到在 Mac 上任何通过脚本或用户操作去主动刷新图标的方式，当然对于 Mac 原生开发了解不多，也许有我不知道的方式。但经过实际测试，应用程序安装之后是可以直接生效的。`,-1),d[53]||=f(`blockquote`,null,[f(`p`,null,`在测试的过程中发现设置的图标始终不生效（即使删除重装也没效果），不知道是不是玄学，把 CFBundleTypeIconFile 调整为紧跟在 CFBundleTypeExtensions 后面，重新打包安装后就立刻生效了。`)],-1),d[54]||=f(`h2`,{id:`Electron%20%E8%AF%BB%E5%8F%96%E6%96%87%E4%BB%B6`},[s(`Electron 读取文件`),f(`a`,{name:`Electron%20%E8%AF%BB%E5%8F%96%E6%96%87%E4%BB%B6`,class:`headerlink`,href:`#Electron%20%E8%AF%BB%E5%8F%96%E6%96%87%E4%BB%B6`})],-1),d[55]||=f(`p`,null,`因为实现方式的不同，导致 Electron 在不同系统上读取文件的方式也有所不同。`,-1),d[56]||=f(`p`,null,[s(`对于 Windows，前文在注册表的打开方式中都定义了 `),f(`code`,null,`--open-file="%1"`),s(`，这样在应用程序启动时，就会接收到一个 `),f(`code`,null,`--open-file="C:\\Users\\XXX\\Desktop\\test.myp"`),s(` 的参数，通过 `),f(`code`,null,`process.argv`),s(` 的具名参数就可以获取到文件路径了。`)],-1),d[57]||=f(`p`,null,[s(`不少 Electron 应用会保持单例的模式，即当 `),f(`code`,null,`app.requestSingleInstanceLock()`),s(` 为非时，退出 app。而当应用程序已经启动时，再次打开文件，就会进入这个逻辑，这时候需要把参数进行透传，即：`)],-1),d[58]||=f(`pre`,{class:`shiki shiki-themes min-light night-owl`,style:{"--shiki-light":`#24292eff`,"--shiki-dark":`#d6deeb`,"--shiki-light-bg":`#ffffff`,"--shiki-dark-bg":`#011627`},tabindex:`0`},[f(`code`,null,[f(`span`,{class:`line`},[f(`span`,{style:{"--shiki-light":`#D32F2F`,"--shiki-dark":`#C792EA`}},`if`),f(`span`,{style:{"--shiki-light":`#24292EFF`,"--shiki-dark":`#D6DEEB`}},` (`)]),s(`
`),f(`span`,{class:`line`},[f(`span`,{style:{"--shiki-light":`#D32F2F`,"--shiki-dark":`#C792EA`}},`  !`),f(`span`,{style:{"--shiki-light":`#1976D2`,"--shiki-light-font-style":`inherit`,"--shiki-dark":`#7FDBCA`,"--shiki-dark-font-style":`italic`}},`app`),f(`span`,{style:{"--shiki-light":`#6F42C1`,"--shiki-light-font-style":`inherit`,"--shiki-dark":`#C792EA`,"--shiki-dark-font-style":`italic`}},`.`),f(`span`,{style:{"--shiki-light":`#6F42C1`,"--shiki-light-font-style":`inherit`,"--shiki-dark":`#82AAFF`,"--shiki-dark-font-style":`italic`}},`requestSingleInstanceLock`),f(`span`,{style:{"--shiki-light":`#24292EFF`,"--shiki-dark":`#D6DEEB`}},`({`)]),s(`
`),f(`span`,{class:`line`},[f(`span`,{style:{"--shiki-light":`#24292EFF`,"--shiki-dark":`#D6DEEB`}},`    openFile`),f(`span`,{style:{"--shiki-light":`#D32F2F`,"--shiki-dark":`#D6DEEB`}},`:`),f(`span`,{style:{"--shiki-light":`#1976D2`,"--shiki-light-font-style":`inherit`,"--shiki-dark":`#7FDBCA`,"--shiki-dark-font-style":`italic`}},` argv`),f(`span`,{style:{"--shiki-light":`#24292EFF`,"--shiki-light-font-style":`inherit`,"--shiki-dark":`#C792EA`,"--shiki-dark-font-style":`italic`}},`.`),f(`span`,{style:{"--shiki-light":`#24292EFF`,"--shiki-dark":`#BAEBE2`}},`openFile`),f(`span`,{style:{"--shiki-light":`#212121`,"--shiki-dark":`#D6DEEB`}},`,`)]),s(`
`),f(`span`,{class:`line`},[f(`span`,{style:{"--shiki-light":`#24292EFF`,"--shiki-dark":`#D6DEEB`}},`  })`)]),s(`
`),f(`span`,{class:`line`},[f(`span`,{style:{"--shiki-light":`#24292EFF`,"--shiki-dark":`#D6DEEB`}},`) {`)]),s(`
`),f(`span`,{class:`line`},[f(`span`,{style:{"--shiki-light":`#1976D2`,"--shiki-light-font-style":`inherit`,"--shiki-dark":`#7FDBCA`,"--shiki-dark-font-style":`italic`}},`  app`),f(`span`,{style:{"--shiki-light":`#6F42C1`,"--shiki-light-font-style":`inherit`,"--shiki-dark":`#C792EA`,"--shiki-dark-font-style":`italic`}},`.`),f(`span`,{style:{"--shiki-light":`#6F42C1`,"--shiki-light-font-style":`inherit`,"--shiki-dark":`#82AAFF`,"--shiki-dark-font-style":`italic`}},`exit`),f(`span`,{style:{"--shiki-light":`#24292EFF`,"--shiki-dark":`#D6DEEB`}},`();`)]),s(`
`),f(`span`,{class:`line`},[f(`span`,{style:{"--shiki-light":`#24292EFF`,"--shiki-dark":`#D6DEEB`}},`} `),f(`span`,{style:{"--shiki-light":`#D32F2F`,"--shiki-dark":`#C792EA`}},`else`),f(`span`,{style:{"--shiki-light":`#24292EFF`,"--shiki-dark":`#D6DEEB`}},` {`)]),s(`
`),f(`span`,{class:`line`},[f(`span`,{style:{"--shiki-light":`#C2C3C5`,"--shiki-light-font-style":`inherit`,"--shiki-dark":`#637777`,"--shiki-dark-font-style":`italic`}},`  // ...`)]),s(`
`),f(`span`,{class:`line`},[f(`span`,{style:{"--shiki-light":`#24292EFF`,"--shiki-dark":`#D6DEEB`}},`}`)])])],-1),d[59]||=f(`p`,null,[s(`同时会触发 `),f(`code`,null,`second-instance`),s(` 事件，通过回调参数获取文件路径。`)],-1),d[60]||=f(`p`,null,[s(`对于 Mac，事情又简单了，监听 `),f(`code`,null,`open-file`),s(` 事件即可，通过回调参数获取文件路径。`)],-1),d[61]||=f(`p`,null,`总体逻辑大概如下：`,-1),d[62]||=f(`pre`,{class:`shiki shiki-themes min-light night-owl`,style:{"--shiki-light":`#24292eff`,"--shiki-dark":`#d6deeb`,"--shiki-light-bg":`#ffffff`,"--shiki-dark-bg":`#011627`},tabindex:`0`},[f(`code`,null,[f(`span`,{class:`line`},[f(`span`,{style:{"--shiki-light":`#D32F2F`,"--shiki-dark":`#C792EA`}},`const`),f(`span`,{style:{"--shiki-light":`#24292EFF`,"--shiki-dark":`#C792EA`}},` {`),f(`span`,{style:{"--shiki-light":`#1976D2`,"--shiki-light-font-style":`inherit`,"--shiki-dark":`#82AAFF`,"--shiki-dark-font-style":`italic`}},` argv`),f(`span`,{style:{"--shiki-light":`#24292EFF`,"--shiki-dark":`#C792EA`}},` }`),f(`span`,{style:{"--shiki-light":`#D32F2F`,"--shiki-dark":`#C792EA`}},` =`),f(`span`,{style:{"--shiki-light":`#6F42C1`,"--shiki-light-font-style":`inherit`,"--shiki-dark":`#82AAFF`,"--shiki-dark-font-style":`italic`}},` require`),f(`span`,{style:{"--shiki-light":`#24292EFF`,"--shiki-dark":`#D6DEEB`}},`(`),f(`span`,{style:{"--shiki-light":`#22863A`,"--shiki-dark":`#D9F5DD`}},`'`),f(`span`,{style:{"--shiki-light":`#22863A`,"--shiki-dark":`#ECC48D`}},`yargs`),f(`span`,{style:{"--shiki-light":`#22863A`,"--shiki-dark":`#D9F5DD`}},`'`),f(`span`,{style:{"--shiki-light":`#24292EFF`,"--shiki-dark":`#D6DEEB`}},`);`)]),s(`
`),f(`span`,{class:`line`},[f(`span`,{style:{"--shiki-light":`#D32F2F`,"--shiki-dark":`#C792EA`}},`const`),f(`span`,{style:{"--shiki-light":`#1976D2`,"--shiki-light-font-style":`inherit`,"--shiki-dark":`#82AAFF`,"--shiki-dark-font-style":`italic`}},` argvParser`),f(`span`,{style:{"--shiki-light":`#D32F2F`,"--shiki-dark":`#C792EA`}},` =`),f(`span`,{style:{"--shiki-light":`#6F42C1`,"--shiki-light-font-style":`inherit`,"--shiki-dark":`#82AAFF`,"--shiki-dark-font-style":`italic`}},` require`),f(`span`,{style:{"--shiki-light":`#24292EFF`,"--shiki-dark":`#D6DEEB`}},`(`),f(`span`,{style:{"--shiki-light":`#22863A`,"--shiki-dark":`#D9F5DD`}},`'`),f(`span`,{style:{"--shiki-light":`#22863A`,"--shiki-dark":`#ECC48D`}},`yargs-parser`),f(`span`,{style:{"--shiki-light":`#22863A`,"--shiki-dark":`#D9F5DD`}},`'`),f(`span`,{style:{"--shiki-light":`#24292EFF`,"--shiki-dark":`#D6DEEB`}},`);`)]),s(`
`),f(`span`,{class:`line`}),s(`
`),f(`span`,{class:`line`},[f(`span`,{style:{"--shiki-light":`#D32F2F`,"--shiki-dark":`#C792EA`}},`const`),f(`span`,{style:{"--shiki-light":`#6F42C1`,"--shiki-light-font-style":`inherit`,"--shiki-dark":`#82AAFF`,"--shiki-dark-font-style":`italic`}},` main`),f(`span`,{style:{"--shiki-light":`#D32F2F`,"--shiki-dark":`#C792EA`}},` =`),f(`span`,{style:{"--shiki-light":`#24292EFF`,"--shiki-dark":`#D9F5DD`}},` ()`),f(`span`,{style:{"--shiki-light":`#D32F2F`,"--shiki-dark":`#C792EA`}},` =>`),f(`span`,{style:{"--shiki-light":`#24292EFF`,"--shiki-dark":`#C792EA`}},` {`)]),s(`
`),f(`span`,{class:`line`},[f(`span`,{style:{"--shiki-light":`#C2C3C5`,"--shiki-light-font-style":`inherit`,"--shiki-dark":`#637777`,"--shiki-dark-font-style":`italic`}},`  // 控制单例`)]),s(`
`),f(`span`,{class:`line`},[f(`span`,{style:{"--shiki-light":`#D32F2F`,"--shiki-dark":`#C792EA`}},`  if`),f(`span`,{style:{"--shiki-light":`#24292EFF`,"--shiki-dark":`#D6DEEB`}},` (`)]),s(`
`),f(`span`,{class:`line`},[f(`span`,{style:{"--shiki-light":`#D32F2F`,"--shiki-dark":`#C792EA`}},`    !`),f(`span`,{style:{"--shiki-light":`#1976D2`,"--shiki-light-font-style":`inherit`,"--shiki-dark":`#7FDBCA`,"--shiki-dark-font-style":`italic`}},`app`),f(`span`,{style:{"--shiki-light":`#6F42C1`,"--shiki-light-font-style":`inherit`,"--shiki-dark":`#C792EA`,"--shiki-dark-font-style":`italic`}},`.`),f(`span`,{style:{"--shiki-light":`#6F42C1`,"--shiki-light-font-style":`inherit`,"--shiki-dark":`#82AAFF`,"--shiki-dark-font-style":`italic`}},`requestSingleInstanceLock`),f(`span`,{style:{"--shiki-light":`#24292EFF`,"--shiki-dark":`#D6DEEB`}},`(`),f(`span`,{style:{"--shiki-light":`#24292EFF`,"--shiki-dark":`#C792EA`}},`{`)]),s(`
`),f(`span`,{class:`line`},[f(`span`,{style:{"--shiki-light":`#24292EFF`,"--shiki-light-font-style":`inherit`,"--shiki-dark":`#C792EA`,"--shiki-dark-font-style":`italic`}},`      openFile`),f(`span`,{style:{"--shiki-light":`#D32F2F`,"--shiki-dark":`#C792EA`}},`:`),f(`span`,{style:{"--shiki-light":`#1976D2`,"--shiki-light-font-style":`inherit`,"--shiki-dark":`#7FDBCA`,"--shiki-dark-font-style":`italic`}},` argv`),f(`span`,{style:{"--shiki-light":`#24292EFF`,"--shiki-light-font-style":`inherit`,"--shiki-dark":`#C792EA`,"--shiki-dark-font-style":`italic`}},`.`),f(`span`,{style:{"--shiki-light":`#24292EFF`,"--shiki-light-font-style":`inherit`,"--shiki-dark":`#BAEBE2`,"--shiki-dark-font-style":`italic`}},`openFile`),f(`span`,{style:{"--shiki-light":`#212121`,"--shiki-dark":`#C792EA`}},`,`)]),s(`
`),f(`span`,{class:`line`},[f(`span`,{style:{"--shiki-light":`#24292EFF`,"--shiki-dark":`#C792EA`}},`    }`),f(`span`,{style:{"--shiki-light":`#24292EFF`,"--shiki-dark":`#D6DEEB`}},`)`)]),s(`
`),f(`span`,{class:`line`},[f(`span`,{style:{"--shiki-light":`#24292EFF`,"--shiki-dark":`#D6DEEB`}},`  )`),f(`span`,{style:{"--shiki-light":`#24292EFF`,"--shiki-dark":`#C792EA`}},` {`)]),s(`
`),f(`span`,{class:`line`},[f(`span`,{style:{"--shiki-light":`#1976D2`,"--shiki-light-font-style":`inherit`,"--shiki-dark":`#7FDBCA`,"--shiki-dark-font-style":`italic`}},`    app`),f(`span`,{style:{"--shiki-light":`#6F42C1`,"--shiki-light-font-style":`inherit`,"--shiki-dark":`#C792EA`,"--shiki-dark-font-style":`italic`}},`.`),f(`span`,{style:{"--shiki-light":`#6F42C1`,"--shiki-light-font-style":`inherit`,"--shiki-dark":`#82AAFF`,"--shiki-dark-font-style":`italic`}},`exit`),f(`span`,{style:{"--shiki-light":`#24292EFF`,"--shiki-dark":`#D6DEEB`}},`()`),f(`span`,{style:{"--shiki-light":`#24292EFF`,"--shiki-dark":`#C792EA`}},`;`)]),s(`
`),f(`span`,{class:`line`},[f(`span`,{style:{"--shiki-light":`#D32F2F`,"--shiki-light-font-style":`inherit`,"--shiki-dark":`#C792EA`,"--shiki-dark-font-style":`italic`}},`    return`),f(`span`,{style:{"--shiki-light":`#24292EFF`,"--shiki-dark":`#C792EA`}},`;`)]),s(`
`),f(`span`,{class:`line`},[f(`span`,{style:{"--shiki-light":`#24292EFF`,"--shiki-dark":`#C792EA`}},`  }`)]),s(`
`),f(`span`,{class:`line`}),s(`
`),f(`span`,{class:`line`},[f(`span`,{style:{"--shiki-light":`#D32F2F`,"--shiki-dark":`#C792EA`}},`  if`),f(`span`,{style:{"--shiki-light":`#24292EFF`,"--shiki-dark":`#D6DEEB`}},` (`),f(`span`,{style:{"--shiki-light":`#1976D2`,"--shiki-light-font-style":`inherit`,"--shiki-dark":`#7FDBCA`,"--shiki-dark-font-style":`italic`}},`process`),f(`span`,{style:{"--shiki-light":`#24292EFF`,"--shiki-light-font-style":`inherit`,"--shiki-dark":`#C792EA`,"--shiki-dark-font-style":`italic`}},`.`),f(`span`,{style:{"--shiki-light":`#24292EFF`,"--shiki-light-font-style":`inherit`,"--shiki-dark":`#BAEBE2`,"--shiki-dark-font-style":`italic`}},`platform`),f(`span`,{style:{"--shiki-light":`#D32F2F`,"--shiki-dark":`#C792EA`}},` ===`),f(`span`,{style:{"--shiki-light":`#22863A`,"--shiki-dark":`#D9F5DD`}},` '`),f(`span`,{style:{"--shiki-light":`#22863A`,"--shiki-dark":`#ECC48D`}},`darwin`),f(`span`,{style:{"--shiki-light":`#22863A`,"--shiki-dark":`#D9F5DD`}},`'`),f(`span`,{style:{"--shiki-light":`#24292EFF`,"--shiki-dark":`#D6DEEB`}},`)`),f(`span`,{style:{"--shiki-light":`#24292EFF`,"--shiki-dark":`#C792EA`}},` {`)]),s(`
`),f(`span`,{class:`line`},[f(`span`,{style:{"--shiki-light":`#C2C3C5`,"--shiki-light-font-style":`inherit`,"--shiki-dark":`#637777`,"--shiki-dark-font-style":`italic`}},`    // Mac`)]),s(`
`),f(`span`,{class:`line`},[f(`span`,{style:{"--shiki-light":`#1976D2`,"--shiki-light-font-style":`inherit`,"--shiki-dark":`#7FDBCA`,"--shiki-dark-font-style":`italic`}},`    app`),f(`span`,{style:{"--shiki-light":`#6F42C1`,"--shiki-light-font-style":`inherit`,"--shiki-dark":`#C792EA`,"--shiki-dark-font-style":`italic`}},`.`),f(`span`,{style:{"--shiki-light":`#6F42C1`,"--shiki-light-font-style":`inherit`,"--shiki-dark":`#82AAFF`,"--shiki-dark-font-style":`italic`}},`on`),f(`span`,{style:{"--shiki-light":`#24292EFF`,"--shiki-dark":`#D6DEEB`}},`(`),f(`span`,{style:{"--shiki-light":`#22863A`,"--shiki-dark":`#D9F5DD`}},`'`),f(`span`,{style:{"--shiki-light":`#22863A`,"--shiki-dark":`#ECC48D`}},`open-file`),f(`span`,{style:{"--shiki-light":`#22863A`,"--shiki-dark":`#D9F5DD`}},`'`),f(`span`,{style:{"--shiki-light":`#212121`,"--shiki-dark":`#C792EA`}},`,`),f(`span`,{style:{"--shiki-light":`#24292EFF`,"--shiki-dark":`#D9F5DD`}},` (`),f(`span`,{style:{"--shiki-light":`#24292EFF`,"--shiki-light-font-style":`inherit`,"--shiki-dark":`#D7DBE0`,"--shiki-dark-font-style":`italic`}},`e`),f(`span`,{style:{"--shiki-light":`#212121`,"--shiki-dark":`#C792EA`}},`,`),f(`span`,{style:{"--shiki-light":`#24292EFF`,"--shiki-light-font-style":`inherit`,"--shiki-dark":`#D7DBE0`,"--shiki-dark-font-style":`italic`}},` filepath`),f(`span`,{style:{"--shiki-light":`#24292EFF`,"--shiki-dark":`#D9F5DD`}},`)`),f(`span`,{style:{"--shiki-light":`#D32F2F`,"--shiki-dark":`#C792EA`}},` =>`),f(`span`,{style:{"--shiki-light":`#24292EFF`,"--shiki-dark":`#C792EA`}},` {`)]),s(`
`),f(`span`,{class:`line`},[f(`span`,{style:{"--shiki-light":`#C2C3C5`,"--shiki-light-font-style":`inherit`,"--shiki-dark":`#637777`,"--shiki-dark-font-style":`italic`}},`      // ...`)]),s(`
`),f(`span`,{class:`line`},[f(`span`,{style:{"--shiki-light":`#24292EFF`,"--shiki-dark":`#C792EA`}},`    }`),f(`span`,{style:{"--shiki-light":`#24292EFF`,"--shiki-dark":`#D6DEEB`}},`)`),f(`span`,{style:{"--shiki-light":`#24292EFF`,"--shiki-dark":`#C792EA`}},`;`)]),s(`
`),f(`span`,{class:`line`},[f(`span`,{style:{"--shiki-light":`#24292EFF`,"--shiki-dark":`#C792EA`}},`  }`),f(`span`,{style:{"--shiki-light":`#D32F2F`,"--shiki-dark":`#C792EA`}},` else`),f(`span`,{style:{"--shiki-light":`#24292EFF`,"--shiki-dark":`#C792EA`}},` {`)]),s(`
`),f(`span`,{class:`line`},[f(`span`,{style:{"--shiki-light":`#C2C3C5`,"--shiki-light-font-style":`inherit`,"--shiki-dark":`#637777`,"--shiki-dark-font-style":`italic`}},`    // Windows`)]),s(`
`),f(`span`,{class:`line`},[f(`span`,{style:{"--shiki-light":`#C2C3C5`,"--shiki-light-font-style":`inherit`,"--shiki-dark":`#637777`,"--shiki-dark-font-style":`italic`}},`    // 第一次启动`)]),s(`
`),f(`span`,{class:`line`},[f(`span`,{style:{"--shiki-light":`#D32F2F`,"--shiki-dark":`#C792EA`}},`    const`),f(`span`,{style:{"--shiki-light":`#1976D2`,"--shiki-light-font-style":`inherit`,"--shiki-dark":`#82AAFF`,"--shiki-dark-font-style":`italic`}},` filepath`),f(`span`,{style:{"--shiki-light":`#D32F2F`,"--shiki-dark":`#C792EA`}},` =`),f(`span`,{style:{"--shiki-light":`#1976D2`,"--shiki-light-font-style":`inherit`,"--shiki-dark":`#7FDBCA`,"--shiki-dark-font-style":`italic`}},` argv`),f(`span`,{style:{"--shiki-light":`#24292EFF`,"--shiki-light-font-style":`inherit`,"--shiki-dark":`#C792EA`,"--shiki-dark-font-style":`italic`}},`.`),f(`span`,{style:{"--shiki-light":`#24292EFF`,"--shiki-light-font-style":`inherit`,"--shiki-dark":`#BAEBE2`,"--shiki-dark-font-style":`italic`}},`openFile`),f(`span`,{style:{"--shiki-light":`#24292EFF`,"--shiki-dark":`#C792EA`}},`;`)]),s(`
`),f(`span`,{class:`line`}),s(`
`),f(`span`,{class:`line`},[f(`span`,{style:{"--shiki-light":`#C2C3C5`,"--shiki-light-font-style":`inherit`,"--shiki-dark":`#637777`,"--shiki-dark-font-style":`italic`}},`    // 运行状态再次打开`)]),s(`
`),f(`span`,{class:`line`},[f(`span`,{style:{"--shiki-light":`#1976D2`,"--shiki-light-font-style":`inherit`,"--shiki-dark":`#7FDBCA`,"--shiki-dark-font-style":`italic`}},`    app`),f(`span`,{style:{"--shiki-light":`#6F42C1`,"--shiki-light-font-style":`inherit`,"--shiki-dark":`#C792EA`,"--shiki-dark-font-style":`italic`}},`.`),f(`span`,{style:{"--shiki-light":`#6F42C1`,"--shiki-light-font-style":`inherit`,"--shiki-dark":`#82AAFF`,"--shiki-dark-font-style":`italic`}},`on`),f(`span`,{style:{"--shiki-light":`#24292EFF`,"--shiki-dark":`#D6DEEB`}},`(`),f(`span`,{style:{"--shiki-light":`#22863A`,"--shiki-dark":`#D9F5DD`}},`'`),f(`span`,{style:{"--shiki-light":`#22863A`,"--shiki-dark":`#ECC48D`}},`second-instance`),f(`span`,{style:{"--shiki-light":`#22863A`,"--shiki-dark":`#D9F5DD`}},`'`),f(`span`,{style:{"--shiki-light":`#212121`,"--shiki-dark":`#C792EA`}},`,`),f(`span`,{style:{"--shiki-light":`#24292EFF`,"--shiki-dark":`#D9F5DD`}},` (`),f(`span`,{style:{"--shiki-light":`#24292EFF`,"--shiki-light-font-style":`inherit`,"--shiki-dark":`#D7DBE0`,"--shiki-dark-font-style":`italic`}},`e`),f(`span`,{style:{"--shiki-light":`#212121`,"--shiki-dark":`#C792EA`}},`,`),f(`span`,{style:{"--shiki-light":`#24292EFF`,"--shiki-light-font-style":`inherit`,"--shiki-dark":`#D7DBE0`,"--shiki-dark-font-style":`italic`}},` argvs`),f(`span`,{style:{"--shiki-light":`#24292EFF`,"--shiki-dark":`#D9F5DD`}},`)`),f(`span`,{style:{"--shiki-light":`#D32F2F`,"--shiki-dark":`#C792EA`}},` =>`),f(`span`,{style:{"--shiki-light":`#24292EFF`,"--shiki-dark":`#C792EA`}},` {`)]),s(`
`),f(`span`,{class:`line`},[f(`span`,{style:{"--shiki-light":`#D32F2F`,"--shiki-dark":`#C792EA`}},`      const`),f(`span`,{style:{"--shiki-light":`#1976D2`,"--shiki-light-font-style":`inherit`,"--shiki-dark":`#82AAFF`,"--shiki-dark-font-style":`italic`}},` argvObject`),f(`span`,{style:{"--shiki-light":`#D32F2F`,"--shiki-dark":`#C792EA`}},` =`),f(`span`,{style:{"--shiki-light":`#6F42C1`,"--shiki-light-font-style":`inherit`,"--shiki-dark":`#82AAFF`,"--shiki-dark-font-style":`italic`}},` argvParser`),f(`span`,{style:{"--shiki-light":`#24292EFF`,"--shiki-dark":`#D6DEEB`}},`(`),f(`span`,{style:{"--shiki-light":`#24292EFF`,"--shiki-dark":`#D7DBE0`}},`argvs`),f(`span`,{style:{"--shiki-light":`#24292EFF`,"--shiki-dark":`#D6DEEB`}},`)`),f(`span`,{style:{"--shiki-light":`#24292EFF`,"--shiki-dark":`#C792EA`}},`;`)]),s(`
`),f(`span`,{class:`line`},[f(`span`,{style:{"--shiki-light":`#D32F2F`,"--shiki-dark":`#C792EA`}},`      const`),f(`span`,{style:{"--shiki-light":`#1976D2`,"--shiki-light-font-style":`inherit`,"--shiki-dark":`#82AAFF`,"--shiki-dark-font-style":`italic`}},` secondFilepath`),f(`span`,{style:{"--shiki-light":`#D32F2F`,"--shiki-dark":`#C792EA`}},` =`),f(`span`,{style:{"--shiki-light":`#1976D2`,"--shiki-light-font-style":`inherit`,"--shiki-dark":`#7FDBCA`,"--shiki-dark-font-style":`italic`}},` argvObject`),f(`span`,{style:{"--shiki-light":`#24292EFF`,"--shiki-light-font-style":`inherit`,"--shiki-dark":`#C792EA`,"--shiki-dark-font-style":`italic`}},`.`),f(`span`,{style:{"--shiki-light":`#24292EFF`,"--shiki-light-font-style":`inherit`,"--shiki-dark":`#BAEBE2`,"--shiki-dark-font-style":`italic`}},`openFile`),f(`span`,{style:{"--shiki-light":`#24292EFF`,"--shiki-dark":`#C792EA`}},`;`)]),s(`
`),f(`span`,{class:`line`},[f(`span`,{style:{"--shiki-light":`#24292EFF`,"--shiki-dark":`#C792EA`}},`    }`),f(`span`,{style:{"--shiki-light":`#24292EFF`,"--shiki-dark":`#D6DEEB`}},`)`),f(`span`,{style:{"--shiki-light":`#24292EFF`,"--shiki-dark":`#C792EA`}},`;`)]),s(`
`),f(`span`,{class:`line`},[f(`span`,{style:{"--shiki-light":`#24292EFF`,"--shiki-dark":`#C792EA`}},`  }`)]),s(`
`),f(`span`,{class:`line`},[f(`span`,{style:{"--shiki-light":`#24292EFF`,"--shiki-dark":`#C792EA`}},`}`),f(`span`,{style:{"--shiki-light":`#24292EFF`,"--shiki-dark":`#D6DEEB`}},`;`)]),s(`
`),f(`span`,{class:`line`}),s(`
`),f(`span`,{class:`line`},[f(`span`,{style:{"--shiki-light":`#6F42C1`,"--shiki-light-font-style":`inherit`,"--shiki-dark":`#82AAFF`,"--shiki-dark-font-style":`italic`}},`main`),f(`span`,{style:{"--shiki-light":`#24292EFF`,"--shiki-dark":`#D6DEEB`}},`();`)])])],-1),d[63]||=f(`h2`,{id:`%E7%BB%93%E8%AF%AD`},[s(`结语`),f(`a`,{name:`%E7%BB%93%E8%AF%AD`,class:`headerlink`,href:`#%E7%BB%93%E8%AF%AD`})],-1),d[64]||=f(`p`,null,`文件关联是常见的需求，本身并不复杂，但由于原生应用开发知识的匮乏，期间找了不少资料、也问了 GPT，从完全不了解到有了头绪，总归是有了一些收获。`,-1),d[65]||=f(`p`,null,`期间在图标缓存问题上搞了很久，一开始并不知道 Inno Setup 可以设置 ChangeAssociations 来实现资源管理器的刷新，而是找了很多资料、尝试去自行现实，而各种方式的效果还都不理想。再后来找到了 IconsRefresh，发现这个工具的效果是我想要的，并进行了接入。完了之后看到 Inno Setup 直接有这个属性，一口老血，多费了不少时间。`,-1),d[66]||=f(`hr`,null,null,-1),d[67]||=f(`p`,null,`参考资料：`,-1),f(`ul`,null,[f(`li`,null,[d[14]||=s(`注册表：`,-1),a(c,{target:`_blank`,href:`https://learn.microsoft.com/zh-cn/windows/win32/sysinfo/registry`},{default:o(()=>[...d[13]||=[s(`https://learn.microsoft.com/zh-cn/windows/win32/sysinfo/registry`,-1)]]),_:1})]),f(`li`,null,[d[16]||=s(`文件类型：`,-1),a(c,{target:`_blank`,href:`https://learn.microsoft.com/zh-cn/windows/win32/shell/fa-file-types`},{default:o(()=>[...d[15]||=[s(`https://learn.microsoft.com/zh-cn/windows/win32/shell/fa-file-types`,-1)]]),_:1})]),f(`li`,null,[d[18]||=s(`“黑客”入门学习之“Windows 注册表”：`,-1),a(c,{target:`_blank`,href:`https://www.toutiao.com/article/6633692159113429512/`},{default:o(()=>[...d[17]||=[s(`https://www.toutiao.com/article/6633692159113429512/`,-1)]]),_:1})]),f(`li`,null,[d[20]||=s(`“打开方式”的“打开方式”：`,-1),a(c,{target:`_blank`,href:`https://geelaw.blog/entries/windows-fileassoc-walkthru/#register-fileassoc`},{default:o(()=>[...d[19]||=[s(`https://geelaw.blog/entries/windows-fileassoc-walkthru/#register-fileassoc`,-1)]]),_:1})]),f(`li`,null,[d[22]||=s(`如何自定义右键菜单：`,-1),a(c,{target:`_blank`,href:`https://answers.microsoft.com/zh-hans/windows/forum/all/%E5%A6%82%E4%BD%95%E8%87%AA%E5%AE%9A%E4%B9%89win11/c1050975-64cf-425c-b940-9aeda0ed714c`},{default:o(()=>[...d[21]||=[s(`https://answers.microsoft.com/zh-hans/windows/forum/all/%E5%A6%82%E4%BD%95%E8%87%AA%E5%AE%9A%E4%B9%89win11/c1050975-64cf-425c-b940-9aeda0ed714c`,-1)]]),_:1})]),f(`li`,null,[d[24]||=s(`如何刷新 explorer.exe 图标缓存：`,-1),a(c,{target:`_blank`,href:`https://lazywang.life/2022/05/23/how-to-refresh-explorer-icon-cache/`},{default:o(()=>[...d[23]||=[s(`https://lazywang.life/2022/05/23/how-to-refresh-explorer-icon-cache/`,-1)]]),_:1})])])]),_:1})]),e(x).length?(n(),u(`aside`,{key:0,class:t([e(S).showIndexSidebar?`bg-[#00000080]`:`pointer-events-none`,`fixed z-20 top-0 w-full h-full left-0 overscroll-contain transition-300`,`lg:pointer-events-auto`,`lg:absolute lg:w-auto lg:bg-transparent lg:left-[calc(100%+clamp(6px,17.1875vw-176px,50px))]`]),onClick:d[0]||=(...e)=>l.hideIndexSidebar&&l.hideIndexSidebar(...e)},[f(`nav`,{class:t([`overflow-y-auto text-foreground overscroll-contain bg-background`,`w-74 max-w-4/5 h-full py-8 px-6 rounded-tl-xl rounded-bl-xl`,`absolute top-0 transition-300 right-0`,e(S).showIndexSidebar?`translate-x-0`:`translate-x-full`,`lg:p-0 lg:max-w-44 xl:max-w-50 lg:h-auto lg:max-h-[calc(100vh-130px)] lg:rounded-none`,`lg:sticky lg:top-10 lg:right-auto lg:translate-x-0 lg:bg-transparent lg:ml-0`])},[d[68]||=f(`h2`,{class:`mb-2 font-bold lg:hidden`},`TABLE OF CONTENTS`,-1),a(m,{toc:e(x)},null,8,[`toc`])],2)],2)):i(``,!0)]),d[69]||=f(`hr`,{class:`border-border mt-10`},null,-1),e(b).comments?(n(),u(`div`,y,[a(p)])):i(``,!0)],64))}}),[[`__scopeId`,`data-v-de2a0df0`]]);export{b as default};