import{L as e,R as t,T as n,c as r,f as i,h as a,j as o,m as s,n as c,o as l,p as u,t as d,u as f}from"./app-DvX1Smg_.js";import"./isObject-STXFNBUz.js";import"./isSymbol-CUbBZ03s.js";import"./toNumber-CiYTsHHK.js";import"./now-BXsIGwzm.js";import{n as p,t as m}from"./toc-DNILfFl5.js";import{n as h,t as g}from"./meta-info-C-tMy3g2.js";import{t as _}from"./use-page-title-CHxbaOlI.js";var v={class:`relative`},y={key:0,class:`mt-10`},b=l(Object.assign({name:`Article`},{__name:`vm:_post_try-to-improve-spa-load-performance_`,setup(l){_({title:`记一次单页应用的加载优化`,description:``});let{meta:b,toc:x}={meta:{title:`记一次单页应用的加载优化`,date:`2018-12-25T23:54:23.000Z`,id:`try-to-improve-spa-load-performance`,categories:`前端`,keywords:null,description:null,tags:[`SPA`,`performance`],sort:0,comments:!0,draft:!1},toc:[{id:`%E4%B8%80%E6%AC%A1%E9%A1%B5%E9%9D%A2%EF%BC%88SPA%EF%BC%89%E5%8A%A0%E8%BD%BD%E8%BF%87%E7%A8%8B`,text:`一次页面（SPA）加载过程`,level:2,children:[],parent:``},{id:`%E4%BC%98%E5%8C%96%E6%96%B9%E5%90%91`,text:`优化方向`,level:2,children:[],parent:``},{id:`%E5%87%8F%E5%B0%8F%E8%B5%84%E6%BA%90%E5%A4%A7%E5%B0%8F`,text:`减小资源大小`,level:2,children:[{id:`%E4%BB%A3%E7%A0%81%E6%8B%86%E5%88%86%E3%80%81%E5%8A%A8%E6%80%81%E5%8A%A0%E8%BD%BD`,text:`代码拆分、动态加载`,level:3,children:[],parent:`%E5%87%8F%E5%B0%8F%E8%B5%84%E6%BA%90%E5%A4%A7%E5%B0%8F`},{id:`%E5%87%8F%E5%B0%91%E4%BB%A3%E7%A0%81%E4%BD%93%E7%A7%AF`,text:`减少代码体积`,level:3,children:[],parent:`%E5%87%8F%E5%B0%8F%E8%B5%84%E6%BA%90%E5%A4%A7%E5%B0%8F`}],parent:``},{id:`%E6%B5%8F%E8%A7%88%E5%99%A8%E8%B5%84%E6%BA%90%E5%8A%A0%E8%BD%BD%E4%BC%98%E5%8C%96`,text:`浏览器资源加载优化`,level:2,children:[{id:`%E5%8A%A8%E6%80%81%E5%8A%A0%E8%BD%BD%E4%B8%8E%E5%85%B3%E9%94%AE%E8%AF%B7%E6%B1%82%E9%93%BE`,text:`动态加载与关键请求链`,level:3,children:[],parent:`%E6%B5%8F%E8%A7%88%E5%99%A8%E8%B5%84%E6%BA%90%E5%8A%A0%E8%BD%BD%E4%BC%98%E5%8C%96`},{id:`%E5%BB%B6%E8%BF%9F%E9%9D%9E%E5%85%B3%E9%94%AE%E8%B5%84%E6%BA%90`,text:`延迟非关键资源`,level:3,children:[],parent:`%E6%B5%8F%E8%A7%88%E5%99%A8%E8%B5%84%E6%BA%90%E5%8A%A0%E8%BD%BD%E4%BC%98%E5%8C%96`},{id:`%E5%87%8F%E5%B0%91%E8%AF%B7%E6%B1%82`,text:`减少请求`,level:3,children:[],parent:`%E6%B5%8F%E8%A7%88%E5%99%A8%E8%B5%84%E6%BA%90%E5%8A%A0%E8%BD%BD%E4%BC%98%E5%8C%96`}],parent:``},{id:`%E9%A6%96%E5%B1%8F%E7%A9%BA%E7%99%BD%E4%BC%98%E5%8C%96`,text:`首屏空白优化`,level:2,children:[{id:`%E9%80%9A%E7%94%A8%20Loading%20%E6%A0%B7%E5%BC%8F`,text:`通用 Loading 样式`,level:3,children:[],parent:`%E9%A6%96%E5%B1%8F%E7%A9%BA%E7%99%BD%E4%BC%98%E5%8C%96`},{id:`%E5%A4%9A%E9%A1%B5%E9%9D%A2%E5%AE%9A%E5%88%B6%E7%9A%84%E9%A2%84%E6%B8%B2%E6%9F%93%E6%A0%B7%E5%BC%8F`,text:`多页面定制的预渲染样式`,level:3,children:[{id:`step%201`,text:`step 1`,level:4,children:[],parent:`%E5%A4%9A%E9%A1%B5%E9%9D%A2%E5%AE%9A%E5%88%B6%E7%9A%84%E9%A2%84%E6%B8%B2%E6%9F%93%E6%A0%B7%E5%BC%8F`},{id:`step%202`,text:`step 2`,level:4,children:[],parent:`%E5%A4%9A%E9%A1%B5%E9%9D%A2%E5%AE%9A%E5%88%B6%E7%9A%84%E9%A2%84%E6%B8%B2%E6%9F%93%E6%A0%B7%E5%BC%8F`},{id:`step%203`,text:`step 3`,level:4,children:[{id:`3.1`,text:`3.1`,level:5,children:[],parent:`step%203`},{id:`3.2`,text:`3.2`,level:5,children:[],parent:`step%203`}],parent:`%E5%A4%9A%E9%A1%B5%E9%9D%A2%E5%AE%9A%E5%88%B6%E7%9A%84%E9%A2%84%E6%B8%B2%E6%9F%93%E6%A0%B7%E5%BC%8F`}],parent:`%E9%A6%96%E5%B1%8F%E7%A9%BA%E7%99%BD%E4%BC%98%E5%8C%96`}],parent:``},{id:`%E5%85%B6%E4%BB%96%E6%96%B9%E9%9D%A2`,text:`其他方面`,level:2,children:[],parent:``}]},{appState:S}=d();return(l,d)=>(n(),u(r,null,[f(`div`,v,[f(`article`,null,[f(`header`,null,[d[1]||=f(`h1`,{class:`text-foreground text-3xl font-bold mb-4`},` 记一次单页应用的加载优化 `,-1),a(g,{meta:e(b)},null,8,[`meta`])]),a(h,{class:`mt-6`},{default:o(()=>[d[33]||=f(`p`,null,`如今的前端页面越来越丰富了，承载着各种功能。而随之增长的则是相应的代码量，加上三方 SDK 的接入以及单页应用（SPA）的特性，一次页面访问会出现慢的感觉，是时候来关注页面的加载优化了。`,-1),d[34]||=f(`p`,null,`本文简略描述关于 React 单页应用的加载优化，下文所指加载一般包括下载、执行两个步骤。`,-1),d[35]||=f(`a`,{id:`more`,href:`#more`,class:`block`},null,-1),d[36]||=f(`h2`,{id:`%E4%B8%80%E6%AC%A1%E9%A1%B5%E9%9D%A2%EF%BC%88SPA%EF%BC%89%E5%8A%A0%E8%BD%BD%E8%BF%87%E7%A8%8B`},[s(`一次页面（SPA）加载过程`),f(`a`,{name:`%E4%B8%80%E6%AC%A1%E9%A1%B5%E9%9D%A2%EF%BC%88SPA%EF%BC%89%E5%8A%A0%E8%BD%BD%E8%BF%87%E7%A8%8B`,class:`headerlink`,href:`#%E4%B8%80%E6%AC%A1%E9%A1%B5%E9%9D%A2%EF%BC%88SPA%EF%BC%89%E5%8A%A0%E8%BD%BD%E8%BF%87%E7%A8%8B`})],-1),d[37]||=f(`ol`,null,[f(`li`,null,`下载 HTML 文档，开始解析；`),f(`li`,null,`由上至下下载 HTML 文档中引入的资源（CSS、JS），当 CSS 加载完毕可认为完成首次渲染绘制；`),f(`li`,null,`等待 JS 下载、执行，完成 SDK 加载、React 框架加载；`),f(`li`,null,`业务代码加载、初始化、页面拉取数据、事件响应等，完毕后可认为此时为首次有效绘制；`),f(`li`,null,`其他图片、媒体等加载，至此页面基本加载完毕。`)],-1),d[38]||=f(`p`,null,[f(`img`,{alt:`5c224eb0c4ff9e2b4d699618`,loading:`lazy`,title:`5c224eb0c4ff9e2b4d699618`,class:`post-image`,src:`https://www.superbed.cn/pic/5c224eb0c4ff9e2b4d699618`,onerror:`this.onerror=null;this.src='/images/image-error.jpg';`})],-1),d[39]||=f(`h2`,{id:`%E4%BC%98%E5%8C%96%E6%96%B9%E5%90%91`},[s(`优化方向`),f(`a`,{name:`%E4%BC%98%E5%8C%96%E6%96%B9%E5%90%91`,class:`headerlink`,href:`#%E4%BC%98%E5%8C%96%E6%96%B9%E5%90%91`})],-1),d[40]||=f(`p`,null,`针对上述过程以及页面特性，以前端手段，接下来从以下四个个方面入手优化：`,-1),d[41]||=f(`ol`,null,[f(`li`,null,`资源大小方面。只要资源更小，下载速度和执行速度都将获得提升；`),f(`li`,null,`资源加载，浏览器方面；`),f(`li`,null,`首屏方面优化，避免展示空白给用户；`),f(`li`,null,`CDN 加速、图片显示优化、缓存等其他方面。`)],-1),d[42]||=f(`h2`,{id:`%E5%87%8F%E5%B0%8F%E8%B5%84%E6%BA%90%E5%A4%A7%E5%B0%8F`},[s(`减小资源大小`),f(`a`,{name:`%E5%87%8F%E5%B0%8F%E8%B5%84%E6%BA%90%E5%A4%A7%E5%B0%8F`,class:`headerlink`,href:`#%E5%87%8F%E5%B0%8F%E8%B5%84%E6%BA%90%E5%A4%A7%E5%B0%8F`})],-1),d[43]||=f(`p`,null,`性能提升很多时候就是一门做减法的艺术。`,-1),d[44]||=f(`h3`,{id:`%E4%BB%A3%E7%A0%81%E6%8B%86%E5%88%86%E3%80%81%E5%8A%A8%E6%80%81%E5%8A%A0%E8%BD%BD`},[s(`代码拆分、动态加载`),f(`a`,{name:`%E4%BB%A3%E7%A0%81%E6%8B%86%E5%88%86%E3%80%81%E5%8A%A8%E6%80%81%E5%8A%A0%E8%BD%BD`,class:`headerlink`,href:`#%E4%BB%A3%E7%A0%81%E6%8B%86%E5%88%86%E3%80%81%E5%8A%A8%E6%80%81%E5%8A%A0%E8%BD%BD`})],-1),d[45]||=f(`p`,null,`一般情况下，SPA 的一个特点就是借助 webpack 等工具将最终代码打包在一个或两类（main.js、vendor.js）文件中，这些文件实际上包含了一整个应用的内容。这样带来了一个问题，当只访问其中一个路由页面时，加载了很多不必要的代码。`,-1),d[46]||=f(`p`,null,[s(`那么，很自然地，可以选择把不属于当前页面的模块分离出去，等用到之时，再进行获取。幸运的是，在 webpack 的打包环境中，只需要使用动态导入的语法就能自动实现代码分离：`),f(`code`,null,`import x from 'x'`),s(` => `),f(`code`,null,`import('x').then(x => { /* */ })`),s(`。`)],-1),d[47]||=f(`p`,null,[f(`img`,{alt:`5c224d3dc4ff9e2b4d699612`,loading:`lazy`,title:`5c224d3dc4ff9e2b4d699612`,class:`post-image`,src:`https://www.superbed.cn/pic/5c224d3dc4ff9e2b4d699612`,onerror:`this.onerror=null;this.src='/images/image-error.jpg';`})],-1),f(`p`,null,[d[3]||=s(`对于 React 应用，有一个十分好用的库 `,-1),a(c,{target:`_blank`,href:`https://github.com/jamiebuilds/react-loadable`},{default:o(()=>[...d[2]||=[s(`react-loadable`,-1)]]),_:1}),d[4]||=s(`，基于动态导入语法封装。使用官方的介绍，用于装载具有动态导入组件的高阶组件。该库实现基于组件粒度的拆分，将动态导入的过程、结果都包装成了组件，使用也十分简单，来看下具体使用：`,-1)]),d[48]||=f(`pre`,{class:`shiki shiki-themes min-light night-owl`,style:{"--shiki-light":`#24292eff`,"--shiki-dark":`#d6deeb`,"--shiki-light-bg":`#ffffff`,"--shiki-dark-bg":`#011627`},tabindex:`0`},[f(`code`,null,[f(`span`,{class:`line`},[f(`span`,{style:{"--shiki-light":`#D32F2F`,"--shiki-light-font-style":`inherit`,"--shiki-dark":`#C792EA`,"--shiki-dark-font-style":`italic`}},`import`),f(`span`,{style:{"--shiki-light":`#24292EFF`,"--shiki-dark":`#D6DEEB`}},` Loadable `),f(`span`,{style:{"--shiki-light":`#D32F2F`,"--shiki-light-font-style":`inherit`,"--shiki-dark":`#C792EA`,"--shiki-dark-font-style":`italic`}},`from`),f(`span`,{style:{"--shiki-light":`#22863A`,"--shiki-dark":`#D9F5DD`}},` '`),f(`span`,{style:{"--shiki-light":`#22863A`,"--shiki-dark":`#ECC48D`}},`react-loadable`),f(`span`,{style:{"--shiki-light":`#22863A`,"--shiki-dark":`#D9F5DD`}},`'`),f(`span`,{style:{"--shiki-light":`#24292EFF`,"--shiki-dark":`#D6DEEB`}},`;`)]),s(`
`),f(`span`,{class:`line`},[f(`span`,{style:{"--shiki-light":`#D32F2F`,"--shiki-light-font-style":`inherit`,"--shiki-dark":`#C792EA`,"--shiki-dark-font-style":`italic`}},`import`),f(`span`,{style:{"--shiki-light":`#24292EFF`,"--shiki-dark":`#D6DEEB`}},` Loading `),f(`span`,{style:{"--shiki-light":`#D32F2F`,"--shiki-light-font-style":`inherit`,"--shiki-dark":`#C792EA`,"--shiki-dark-font-style":`italic`}},`from`),f(`span`,{style:{"--shiki-light":`#22863A`,"--shiki-dark":`#D9F5DD`}},` '`),f(`span`,{style:{"--shiki-light":`#22863A`,"--shiki-dark":`#ECC48D`}},`./my-loading-component`),f(`span`,{style:{"--shiki-light":`#22863A`,"--shiki-dark":`#D9F5DD`}},`'`),f(`span`,{style:{"--shiki-light":`#24292EFF`,"--shiki-dark":`#D6DEEB`}},`;`)]),s(`
`),f(`span`,{class:`line`}),s(`
`),f(`span`,{class:`line`},[f(`span`,{style:{"--shiki-light":`#C2C3C5`,"--shiki-light-font-style":`inherit`,"--shiki-dark":`#637777`,"--shiki-dark-font-style":`italic`}},`// 结果是个组件，可直接使用`)]),s(`
`),f(`span`,{class:`line`},[f(`span`,{style:{"--shiki-light":`#C2C3C5`,"--shiki-light-font-style":`inherit`,"--shiki-dark":`#637777`,"--shiki-dark-font-style":`italic`}},`// 加载时自动展示 loading 样式`)]),s(`
`),f(`span`,{class:`line`},[f(`span`,{style:{"--shiki-light":`#D32F2F`,"--shiki-dark":`#C792EA`}},`const`),f(`span`,{style:{"--shiki-light":`#1976D2`,"--shiki-light-font-style":`inherit`,"--shiki-dark":`#82AAFF`,"--shiki-dark-font-style":`italic`}},` LoadableComponent`),f(`span`,{style:{"--shiki-light":`#D32F2F`,"--shiki-dark":`#C792EA`}},` =`),f(`span`,{style:{"--shiki-light":`#6F42C1`,"--shiki-light-font-style":`inherit`,"--shiki-dark":`#82AAFF`,"--shiki-dark-font-style":`italic`}},` Loadable`),f(`span`,{style:{"--shiki-light":`#24292EFF`,"--shiki-dark":`#D6DEEB`}},`(`),f(`span`,{style:{"--shiki-light":`#24292EFF`,"--shiki-dark":`#C792EA`}},`{`)]),s(`
`),f(`span`,{class:`line`},[f(`span`,{style:{"--shiki-light":`#6F42C1`,"--shiki-light-font-style":`inherit`,"--shiki-dark":`#82AAFF`,"--shiki-dark-font-style":`italic`}},`  loader`),f(`span`,{style:{"--shiki-light":`#D32F2F`,"--shiki-dark":`#C792EA`}},`:`),f(`span`,{style:{"--shiki-light":`#24292EFF`,"--shiki-dark":`#D9F5DD`}},` ()`),f(`span`,{style:{"--shiki-light":`#D32F2F`,"--shiki-dark":`#C792EA`}},` =>`),f(`span`,{style:{"--shiki-light":`#D32F2F`,"--shiki-dark":`#7FDBCA`}},` import`),f(`span`,{style:{"--shiki-light":`#24292EFF`,"--shiki-dark":`#D6DEEB`}},`(`),f(`span`,{style:{"--shiki-light":`#22863A`,"--shiki-dark":`#D9F5DD`}},`'`),f(`span`,{style:{"--shiki-light":`#22863A`,"--shiki-dark":`#ECC48D`}},`./my-component`),f(`span`,{style:{"--shiki-light":`#22863A`,"--shiki-dark":`#D9F5DD`}},`'`),f(`span`,{style:{"--shiki-light":`#24292EFF`,"--shiki-dark":`#D6DEEB`}},`)`),f(`span`,{style:{"--shiki-light":`#212121`,"--shiki-dark":`#C792EA`}},`,`)]),s(`
`),f(`span`,{class:`line`},[f(`span`,{style:{"--shiki-light":`#24292EFF`,"--shiki-light-font-style":`inherit`,"--shiki-dark":`#C792EA`,"--shiki-dark-font-style":`italic`}},`  loading`),f(`span`,{style:{"--shiki-light":`#D32F2F`,"--shiki-dark":`#C792EA`}},`:`),f(`span`,{style:{"--shiki-light":`#24292EFF`,"--shiki-dark":`#D7DBE0`}},` Loading`),f(`span`,{style:{"--shiki-light":`#212121`,"--shiki-dark":`#C792EA`}},`,`)]),s(`
`),f(`span`,{class:`line`},[f(`span`,{style:{"--shiki-light":`#24292EFF`,"--shiki-dark":`#C792EA`}},`}`),f(`span`,{style:{"--shiki-light":`#24292EFF`,"--shiki-dark":`#D6DEEB`}},`);`)]),s(`
`),f(`span`,{class:`line`}),s(`
`),f(`span`,{class:`line`},[f(`span`,{style:{"--shiki-light":`#D32F2F`,"--shiki-light-font-style":`inherit`,"--shiki-dark":`#C792EA`,"--shiki-dark-font-style":`italic`}},`export`),f(`span`,{style:{"--shiki-light":`#D32F2F`,"--shiki-light-font-style":`inherit`,"--shiki-dark":`#C792EA`,"--shiki-dark-font-style":`italic`}},` default`),f(`span`,{style:{"--shiki-light":`#D32F2F`,"--shiki-dark":`#C792EA`}},` class`),f(`span`,{style:{"--shiki-light":`#6F42C1`,"--shiki-dark":`#FFCB8B`}},` App`),f(`span`,{style:{"--shiki-light":`#D32F2F`,"--shiki-light-font-style":`inherit`,"--shiki-dark":`#C792EA`,"--shiki-dark-font-style":`italic`}},` extends`),f(`span`,{style:{"--shiki-light":`#6F42C1`,"--shiki-dark":`#FFCB8B`}},` React`),f(`span`,{style:{"--shiki-light":`#24292EFF`,"--shiki-light-font-style":`inherit`,"--shiki-dark":`#C792EA`,"--shiki-dark-font-style":`italic`}},`.`),f(`span`,{style:{"--shiki-light":`#6F42C1`,"--shiki-dark":`#C5E478`}},`Component`),f(`span`,{style:{"--shiki-light":`#24292EFF`,"--shiki-dark":`#D6DEEB`}},` {`)]),s(`
`),f(`span`,{class:`line`},[f(`span`,{style:{"--shiki-light":`#6F42C1`,"--shiki-light-font-style":`inherit`,"--shiki-dark":`#82AAFF`,"--shiki-dark-font-style":`italic`}},`  render`),f(`span`,{style:{"--shiki-light":`#24292EFF`,"--shiki-dark":`#D9F5DD`}},`()`),f(`span`,{style:{"--shiki-light":`#24292EFF`,"--shiki-dark":`#D6DEEB`}},` {`)]),s(`
`),f(`span`,{class:`line`},[f(`span`,{style:{"--shiki-light":`#D32F2F`,"--shiki-light-font-style":`inherit`,"--shiki-dark":`#C792EA`,"--shiki-dark-font-style":`italic`}},`    return`),f(`span`,{style:{"--shiki-light":`#24292EFF`,"--shiki-dark":`#7FDBCA`}},` <`),f(`span`,{style:{"--shiki-light":`#1976D2`,"--shiki-dark":`#F78C6C`}},`LoadableComponent`),f(`span`,{style:{"--shiki-light":`#24292EFF`,"--shiki-dark":`#7FDBCA`}},`/>`),f(`span`,{style:{"--shiki-light":`#24292EFF`,"--shiki-dark":`#D6DEEB`}},`;`)]),s(`
`),f(`span`,{class:`line`},[f(`span`,{style:{"--shiki-light":`#24292EFF`,"--shiki-dark":`#D6DEEB`}},`  }`)]),s(`
`),f(`span`,{class:`line`},[f(`span`,{style:{"--shiki-light":`#24292EFF`,"--shiki-dark":`#D6DEEB`}},`}`)])])],-1),d[49]||=f(`p`,null,`如此一来，再使用 webpack 打包，会发现多了不少用于动态引入的文件。另外，代码的组织对于拆分是有一定影响的。以下分别是未拆分、基于路由拆分、整理代码（期间删了部分无用代码）后基于路由拆分情况下的打包情况。可对比看出每个页面加载的总资源大小减少了。`,-1),d[50]||=f(`p`,null,[f(`img`,{alt:`5c224d3dc4ff9e2b4d699613`,loading:`lazy`,title:`5c224d3dc4ff9e2b4d699613`,class:`post-image`,src:`https://www.superbed.cn/pic/5c224d3dc4ff9e2b4d699613`,onerror:`this.onerror=null;this.src='/images/image-error.jpg';`})],-1),d[51]||=f(`p`,null,[f(`code`,null,`webpack-bundle-analyzer`),s(` 是一个十分有用的打包结果分析插件，能帮助我们直观看出打包结果的具体组成，从而作出进一步调整优化。`)],-1),d[52]||=f(`p`,null,[f(`img`,{alt:`5c224d3dc4ff9e2b4d699614`,loading:`lazy`,title:`5c224d3dc4ff9e2b4d699614`,class:`post-image`,src:`https://www.superbed.cn/pic/5c224d3dc4ff9e2b4d699614`,onerror:`this.onerror=null;this.src='/images/image-error.jpg';`})],-1),d[53]||=f(`p`,null,`温馨提示：`,-1),f(`ul`,null,[f(`li`,null,[d[6]||=s(`TypeScript 中使 `,-1),d[7]||=f(`code`,null,`import()`,-1),d[8]||=s(` 生效，得在 tsconfig.json 中设置 `,-1),d[9]||=f(`code`,null,`"module": "esnext"`,-1),d[10]||=s(`，`,-1),a(c,{target:`_blank`,href:`https://github.com/webpack/webpack/issues/5703#issuecomment-357512412`},{default:o(()=>[...d[5]||=[s(`更多详情`,-1)]]),_:1}),d[11]||=s(`。`,-1)]),d[12]||=f(`li`,null,`该方式对于大型 SPA 的优化效果较为明显。`,-1)]),d[54]||=f(`h3`,{id:`%E5%87%8F%E5%B0%91%E4%BB%A3%E7%A0%81%E4%BD%93%E7%A7%AF`},[s(`减少代码体积`),f(`a`,{name:`%E5%87%8F%E5%B0%91%E4%BB%A3%E7%A0%81%E4%BD%93%E7%A7%AF`,class:`headerlink`,href:`#%E5%87%8F%E5%B0%91%E4%BB%A3%E7%A0%81%E4%BD%93%E7%A7%AF`})],-1),d[55]||=f(`p`,null,`这里所说的主要是一些细节方面的处理，一般效果可能会比较小，往往不需要要太多的改动，能优化一点是一点，秉承蚊子腿也是肉的原则。`,-1),d[56]||=f(`ol`,null,[f(`li`,null,`Webpack 支持摇树（Tree Shaking），借助该特性，能自动优化掉代码中的无用部分。但该特性的使用并不那么简单，以至于实际效果的表现并不理想。简单了解，它是要借助 ES6 的静态导入语法进行分析的，而经常使用的 npm 模块都是 commonjs 方式，不支持 Tree Shaking。这里对此没有过多研究，更多细节可参考文章底部列出的文章。`),f(`li`,null,[s(`注意模块的按需引入。典型的就是 lodash，不要只用到几个方法却全部打包了。当然在插件配置支持的情况下，可直接`),f(`code`,null,`import { throttle } from 'lodash'`),s(`。`)]),f(`li`,null,`有些工具会自动包含部分 polyfill，生产环境又引了一份 polyfill，应注意避免重复引入。`),f(`li`,null,`随着迭代等种种因素，产生了用不到的代码，最后主动删除。`),f(`li`,null,`...`)],-1),d[57]||=f(`h2`,{id:`%E6%B5%8F%E8%A7%88%E5%99%A8%E8%B5%84%E6%BA%90%E5%8A%A0%E8%BD%BD%E4%BC%98%E5%8C%96`},[s(`浏览器资源加载优化`),f(`a`,{name:`%E6%B5%8F%E8%A7%88%E5%99%A8%E8%B5%84%E6%BA%90%E5%8A%A0%E8%BD%BD%E4%BC%98%E5%8C%96`,class:`headerlink`,href:`#%E6%B5%8F%E8%A7%88%E5%99%A8%E8%B5%84%E6%BA%90%E5%8A%A0%E8%BD%BD%E4%BC%98%E5%8C%96`})],-1),d[58]||=f(`p`,null,`在此，引入一个概念：关键请求链（Critical-Request-Chains）。`,-1),d[59]||=f(`blockquote`,null,[f(`p`,null,`关键请求链：可视区域渲染完毕（首屏），并对于用户来说可用时，必须加载的资源请求队列，就叫做关键请求链。`)],-1),d[60]||=f(`p`,null,`简单来说，对于直接在 index.html 文档中引用的 JS、CSS、图片等资源被认为是关键请求链，浏览器会优先进行处理。`,-1),d[61]||=f(`h3`,{id:`%E5%8A%A8%E6%80%81%E5%8A%A0%E8%BD%BD%E4%B8%8E%E5%85%B3%E9%94%AE%E8%AF%B7%E6%B1%82%E9%93%BE`},[s(`动态加载与关键请求链`),f(`a`,{name:`%E5%8A%A8%E6%80%81%E5%8A%A0%E8%BD%BD%E4%B8%8E%E5%85%B3%E9%94%AE%E8%AF%B7%E6%B1%82%E9%93%BE`,class:`headerlink`,href:`#%E5%8A%A8%E6%80%81%E5%8A%A0%E8%BD%BD%E4%B8%8E%E5%85%B3%E9%94%AE%E8%AF%B7%E6%B1%82%E9%93%BE`})],-1),d[62]||=f(`p`,null,`以之前提到的拆分结果为例，拆分后单个页面需要加载的资源大小变化不显著，这时候去测量页面的加载性能得到的结果也许会是不升反降，降的主要是首次有效绘制。`,-1),d[63]||=f(`p`,null,[f(`img`,{alt:`5c224d3dc4ff9e2b4d699615`,loading:`lazy`,title:`5c224d3dc4ff9e2b4d699615`,class:`post-image`,src:`https://www.superbed.cn/pic/5c224d3dc4ff9e2b4d699615`,onerror:`this.onerror=null;this.src='/images/image-error.jpg';`})],-1),d[64]||=f(`p`,null,`这是单个页面的加载情况，动态加载了两个模块，而这两个模块是不属于关键请求链的。这种情况下，该页面的加载情况简述如下：`,-1),d[65]||=f(`ol`,null,[f(`li`,null,`vendor.js、app.js 加载完毕；`),f(`li`,null,`上述 JS 执行到特定逻辑判定该页面需要 2.js、6.js，于是发送请求，加载对应资源；`),f(`li`,null,`2.js、6.js 动态 JS 部分加载完毕；`),f(`li`,null,`最终页面显示。`)],-1),d[66]||=f(`p`,null,`该步骤相比初始状态多了一个步骤，当这些新增的开销大于初始状态的时候，页面加载的整体性能是下降的。`,-1),d[67]||=f(`p`,null,`要在当前情况下发挥拆分代码、动态加载的意义，有以下一种思路：`,-1),d[68]||=f(`p`,null,[s(`假设一个 SPA 包含列表页、详情页，列表页是一级`),f(`strong`,null,`关键页面`),s(`，可以只对详情页相关的内容进行分离。如此一来，对于列表页依旧只有 app.js、vendor.js 部分，但是少了详情页相关的东西，因此做到了关键页面的性能加载提升。`)],-1),d[69]||=f(`h3`,{id:`%E5%BB%B6%E8%BF%9F%E9%9D%9E%E5%85%B3%E9%94%AE%E8%B5%84%E6%BA%90`},[s(`延迟非关键资源`),f(`a`,{name:`%E5%BB%B6%E8%BF%9F%E9%9D%9E%E5%85%B3%E9%94%AE%E8%B5%84%E6%BA%90`,class:`headerlink`,href:`#%E5%BB%B6%E8%BF%9F%E9%9D%9E%E5%85%B3%E9%94%AE%E8%B5%84%E6%BA%90`})],-1),d[70]||=f(`p`,null,`除了必要的框架、业务代码，页面中常常引入了一些 SDK，比如打点功能。`,-1),d[71]||=f(`p`,null,`以打点为例，这类资源实际上跟首屏的渲染没有关系，即使在页面全部加载完毕三秒后再引入也是无伤大雅的。`,-1),d[72]||=f(`p`,null,`而我们的现状是，这类资源被直接写在 head 部分引入，被浏览器认为是关键资源优先处理，势必对页面的加载有一定的影响。`,-1),d[73]||=f(`p`,null,[s(`对于这类非关键资源，不需要列在关键请求链当中。以此处的神策打点为例，我们将他的顺序写在文档底部，并添加了 `),f(`code`,null,`defer`),s(` 属性，告诉浏览器神策的下载不是阻塞的，并且将它的执行时机进行延后。`)],-1),d[74]||=f(`p`,null,[s(`回顾之前的加载瀑布图，可以看到 `),f(`code`,null,`sensorsdata.min.js`),s(` 的加载优先级（Priority）是`),f(`code`,null,`Low`),s(`，此时神策的加载是不影响首屏的渲染了。`)],-1),d[75]||=f(`p`,null,[s(`script 异步加载属性 `),f(`code`,null,`async`),s(`、`),f(`code`,null,`defer`),s(` 介绍：`)],-1),d[76]||=f(`p`,null,[f(`img`,{alt:`5c224d3bc4ff9e2b4d69960e`,loading:`lazy`,title:`5c224d3bc4ff9e2b4d69960e`,class:`post-image`,src:`https://www.superbed.cn/pic/5c224d3bc4ff9e2b4d69960e`,onerror:`this.onerror=null;this.src='/images/image-error.jpg';`})],-1),d[77]||=f(`p`,null,`早期情况，浏览器对于 JS 的下载、执行可能是严格串行模式处理的，只有上一个 JS 加载完毕后才会开始下一个 JS 的下载、执行。`,-1),d[78]||=f(`p`,null,`但实际上，目前的浏览器对于资源加载都有自己的策略，基本上都会去并行下载资源，即使是单线程执行的 JS 脚本（观察上述加载瀑布图也能发现这点）。因为这样做能够减少 JS 的下载时间，不过有一点是不变的，严格按照 JS 的顺序进行执行。`,-1),d[79]||=f(`h3`,{id:`%E5%87%8F%E5%B0%91%E8%AF%B7%E6%B1%82`},[s(`减少请求`),f(`a`,{name:`%E5%87%8F%E5%B0%91%E8%AF%B7%E6%B1%82`,class:`headerlink`,href:`#%E5%87%8F%E5%B0%91%E8%AF%B7%E6%B1%82`})],-1),d[80]||=f(`p`,null,`此处排除图片等媒体资源进行讨论。`,-1),d[81]||=f(`p`,null,`往往为了缓存考虑，我们会把 React、ReactDOM 单独抽离，打包时也会采取一种策略将第三方不经常改动的部分抽离出来。因此，一个页面的请求数会变多。但浏览器对于一个域名的并发请求下载数量是有限制的。再加上 SDK、polyfill 等可能就突破上限了，那么多余的只能等待。`,-1),d[82]||=f(`p`,null,`针对这种情况一般有几种方式：`,-1),d[83]||=f(`ol`,null,[f(`li`,null,`资源够小的时候直接嵌入在 HTML 文档中；`),f(`li`,null,`考虑是否有必要将打包结果拆分出 vendor；`),f(`li`,null,`多个资源的请求进行合并。`)],-1),d[84]||=f(`h2`,{id:`%E9%A6%96%E5%B1%8F%E7%A9%BA%E7%99%BD%E4%BC%98%E5%8C%96`},[s(`首屏空白优化`),f(`a`,{name:`%E9%A6%96%E5%B1%8F%E7%A9%BA%E7%99%BD%E4%BC%98%E5%8C%96`,class:`headerlink`,href:`#%E9%A6%96%E5%B1%8F%E7%A9%BA%E7%99%BD%E4%BC%98%E5%8C%96`})],-1),d[85]||=f(`p`,null,`即使优化了资源加载，SPA 首屏空白的问题是依旧存在的，因为要等待 JS 的下载、执行。`,-1),d[86]||=f(`p`,null,`问题的根本是 HTML 文档中只有一个空节点，那么只要预先插入一些内容就能解决白屏问题了，处理方法很简单。`,-1),d[87]||=f(`h3`,{id:`%E9%80%9A%E7%94%A8%20Loading%20%E6%A0%B7%E5%BC%8F`},[s(`通用 Loading 样式`),f(`a`,{name:`%E9%80%9A%E7%94%A8%20Loading%20%E6%A0%B7%E5%BC%8F`,class:`headerlink`,href:`#%E9%80%9A%E7%94%A8%20Loading%20%E6%A0%B7%E5%BC%8F`})],-1),d[88]||=f(`p`,null,[s(`处理起来最方便的一种，只要在 HTML 模板文件中插入内容即可。写在 `),f(`code`,null,`#root`),s(` 中是因为在 React 渲染后会自动顶掉了 Loading，免去了手动的处理。`)],-1),d[89]||=f(`pre`,{class:`shiki shiki-themes min-light night-owl`,style:{"--shiki-light":`#24292eff`,"--shiki-dark":`#d6deeb`,"--shiki-light-bg":`#ffffff`,"--shiki-dark-bg":`#011627`},tabindex:`0`},[f(`code`,null,[f(`span`,{class:`line`},[f(`span`,{style:{"--shiki-light":`#24292EFF`,"--shiki-dark":`#7FDBCA`}},`<`),f(`span`,{style:{"--shiki-light":`#22863A`,"--shiki-dark":`#CAECE6`}},`div`),f(`span`,{style:{"--shiki-light":`#6F42C1`,"--shiki-light-font-style":`inherit`,"--shiki-dark":`#C5E478`,"--shiki-dark-font-style":`italic`}},` id`),f(`span`,{style:{"--shiki-light":`#D32F2F`,"--shiki-dark":`#7FDBCA`}},`=`),f(`span`,{style:{"--shiki-light":`#22863A`,"--shiki-dark":`#D9F5DD`}},`"`),f(`span`,{style:{"--shiki-light":`#22863A`,"--shiki-dark":`#ECC48D`}},`root`),f(`span`,{style:{"--shiki-light":`#22863A`,"--shiki-dark":`#D9F5DD`}},`"`),f(`span`,{style:{"--shiki-light":`#24292EFF`,"--shiki-dark":`#7FDBCA`}},`>`)]),s(`
`),f(`span`,{class:`line`},[f(`span`,{style:{"--shiki-light":`#24292EFF`,"--shiki-dark":`#7FDBCA`}},`  <`),f(`span`,{style:{"--shiki-light":`#22863A`,"--shiki-dark":`#CAECE6`}},`div`),f(`span`,{style:{"--shiki-light":`#6F42C1`,"--shiki-light-font-style":`inherit`,"--shiki-dark":`#C5E478`,"--shiki-dark-font-style":`italic`}},` id`),f(`span`,{style:{"--shiki-light":`#D32F2F`,"--shiki-dark":`#7FDBCA`}},`=`),f(`span`,{style:{"--shiki-light":`#22863A`,"--shiki-dark":`#D9F5DD`}},`"`),f(`span`,{style:{"--shiki-light":`#22863A`,"--shiki-dark":`#ECC48D`}},`loading`),f(`span`,{style:{"--shiki-light":`#22863A`,"--shiki-dark":`#D9F5DD`}},`"`),f(`span`,{style:{"--shiki-light":`#24292EFF`,"--shiki-dark":`#7FDBCA`}},`>`)]),s(`
`),f(`span`,{class:`line`},[f(`span`,{style:{"--shiki-light":`#C2C3C5`,"--shiki-light-font-style":`inherit`,"--shiki-dark":`#637777`,"--shiki-dark-font-style":`italic`}},`    <!-- ... 一些 loading 代码 -->`)]),s(`
`),f(`span`,{class:`line`},[f(`span`,{style:{"--shiki-light":`#24292EFF`,"--shiki-dark":`#7FDBCA`}},`  </`),f(`span`,{style:{"--shiki-light":`#22863A`,"--shiki-dark":`#CAECE6`}},`div`),f(`span`,{style:{"--shiki-light":`#24292EFF`,"--shiki-dark":`#7FDBCA`}},`>`)]),s(`
`),f(`span`,{class:`line`},[f(`span`,{style:{"--shiki-light":`#24292EFF`,"--shiki-dark":`#7FDBCA`}},`</`),f(`span`,{style:{"--shiki-light":`#22863A`,"--shiki-dark":`#CAECE6`}},`div`),f(`span`,{style:{"--shiki-light":`#24292EFF`,"--shiki-dark":`#7FDBCA`}},`>`)])])],-1),d[90]||=f(`h3`,{id:`%E5%A4%9A%E9%A1%B5%E9%9D%A2%E5%AE%9A%E5%88%B6%E7%9A%84%E9%A2%84%E6%B8%B2%E6%9F%93%E6%A0%B7%E5%BC%8F`},[s(`多页面定制的预渲染样式`),f(`a`,{name:`%E5%A4%9A%E9%A1%B5%E9%9D%A2%E5%AE%9A%E5%88%B6%E7%9A%84%E9%A2%84%E6%B8%B2%E6%9F%93%E6%A0%B7%E5%BC%8F`,class:`headerlink`,href:`#%E5%A4%9A%E9%A1%B5%E9%9D%A2%E5%AE%9A%E5%88%B6%E7%9A%84%E9%A2%84%E6%B8%B2%E6%9F%93%E6%A0%B7%E5%BC%8F`})],-1),d[91]||=f(`p`,null,`这里的多页面指的是前端路由的多页面，都在一个 React 单页应用的范围内。在此基础上要实现这个效果稍微复杂一些。`,-1),d[92]||=f(`p`,null,[s(`首先介绍一下 URL 中 Hash 作用。`),f(`code`,null,`#`),s(` 代表网页中的一个位置，其右面的字符，就是该位置的标识符。浏览器读取这个 URL 后，会自动将 Hash 标注的内容位置滚动至可视区域。`),f(`code`,null,`#`),s(` 是用来指导浏览器动作的，浏览器发出的 HTTP 请求中不包括 `),f(`code`,null,`#`),s(`，所以 Hash 对服务器端完全无用。`)],-1),d[93]||=f(`p`,null,`之后再来看 Hash 模式的前端路由：`,-1),d[94]||=f(`pre`,{class:`shiki shiki-themes min-light night-owl`,style:{"--shiki-light":`#24292eff`,"--shiki-dark":`#d6deeb`,"--shiki-light-bg":`#ffffff`,"--shiki-dark-bg":`#011627`},tabindex:`0`},[f(`code`,null,[f(`span`,{class:`line`},[f(`span`,{style:{"--shiki-light":`#D32F2F`,"--shiki-dark":`#C792EA`}},`const`),f(`span`,{style:{"--shiki-light":`#1976D2`,"--shiki-light-font-style":`inherit`,"--shiki-dark":`#82AAFF`,"--shiki-dark-font-style":`italic`}},` url1`),f(`span`,{style:{"--shiki-light":`#D32F2F`,"--shiki-dark":`#C792EA`}},` =`),f(`span`,{style:{"--shiki-light":`#22863A`,"--shiki-dark":`#D9F5DD`}},` '`),f(`span`,{style:{"--shiki-light":`#22863A`,"--shiki-dark":`#ECC48D`}},`http://example.com/project/#/page1`),f(`span`,{style:{"--shiki-light":`#22863A`,"--shiki-dark":`#D9F5DD`}},`'`)]),s(`
`),f(`span`,{class:`line`}),s(`
`),f(`span`,{class:`line`},[f(`span`,{style:{"--shiki-light":`#D32F2F`,"--shiki-dark":`#C792EA`}},`const`),f(`span`,{style:{"--shiki-light":`#1976D2`,"--shiki-light-font-style":`inherit`,"--shiki-dark":`#82AAFF`,"--shiki-dark-font-style":`italic`}},` url2`),f(`span`,{style:{"--shiki-light":`#D32F2F`,"--shiki-dark":`#C792EA`}},` =`),f(`span`,{style:{"--shiki-light":`#22863A`,"--shiki-dark":`#D9F5DD`}},` '`),f(`span`,{style:{"--shiki-light":`#22863A`,"--shiki-dark":`#ECC48D`}},`http://example.com/project/#/page2`),f(`span`,{style:{"--shiki-light":`#22863A`,"--shiki-dark":`#D9F5DD`}},`'`)]),s(`
`),f(`span`,{class:`line`}),s(`
`),f(`span`,{class:`line`},[f(`span`,{style:{"--shiki-light":`#D32F2F`,"--shiki-dark":`#C792EA`}},`const`),f(`span`,{style:{"--shiki-light":`#1976D2`,"--shiki-light-font-style":`inherit`,"--shiki-dark":`#82AAFF`,"--shiki-dark-font-style":`italic`}},` url3`),f(`span`,{style:{"--shiki-light":`#D32F2F`,"--shiki-dark":`#C792EA`}},` =`),f(`span`,{style:{"--shiki-light":`#22863A`,"--shiki-dark":`#D9F5DD`}},` '`),f(`span`,{style:{"--shiki-light":`#22863A`,"--shiki-dark":`#ECC48D`}},`http://example.com/project/#/page1/subpage2`),f(`span`,{style:{"--shiki-light":`#22863A`,"--shiki-dark":`#D9F5DD`}},`'`)]),s(`
`),f(`span`,{class:`line`})])],-1),d[95]||=f(`p`,null,[s(`访问上述任意 URL，实际上浏览器发出的请求都是`),f(`code`,null,`http://example.com/project/`),s(`，服务端就会返回`),f(`code`,null,`http://example.com/project/index.html`),s(`。之后，代码执行，路由框架匹配前端路由，最终渲染出对应页面。`)],-1),d[96]||=f(`p`,null,`对此，实现目的，有三种想法：`,-1),d[97]||=f(`ol`,null,[f(`li`,null,`将多种预渲染样式整合在 HTML 中，使用 JS 匹配前端路由决定需要显示的样式；`),f(`li`,null,`每一个页面单独写成一个 React 单页模块；`),f(`li`,null,`想办法实现不同的路由返回不同的 HTML 文档。`)],-1),d[98]||=f(`p`,null,`下面主要介绍方式 3.`,-1),d[99]||=f(`p`,null,`想要根据不同的路由返回对应不同的 HTML 文档`,-1),d[100]||=f(`h4`,{id:`step%201`},[s(`step 1`),f(`a`,{name:`step%201`,class:`headerlink`,href:`#step%201`})],-1),d[101]||=f(`p`,null,`第一步要改变前端路由方式（Hash => Browser）。`,-1),d[102]||=f(`pre`,{class:`shiki shiki-themes min-light night-owl`,style:{"--shiki-light":`#24292eff`,"--shiki-dark":`#d6deeb`,"--shiki-light-bg":`#ffffff`,"--shiki-dark-bg":`#011627`},tabindex:`0`},[f(`code`,null,[f(`span`,{class:`line`},[f(`span`,{style:{"--shiki-light":`#C2C3C5`,"--shiki-light-font-style":`inherit`,"--shiki-dark":`#637777`,"--shiki-dark-font-style":`italic`}},`// Browser 模式下的 URL 以及服务端返回的内容`)]),s(`
`),f(`span`,{class:`line`},[f(`span`,{style:{"--shiki-light":`#D32F2F`,"--shiki-dark":`#C792EA`}},`const`),f(`span`,{style:{"--shiki-light":`#1976D2`,"--shiki-light-font-style":`inherit`,"--shiki-dark":`#82AAFF`,"--shiki-dark-font-style":`italic`}},` url1`),f(`span`,{style:{"--shiki-light":`#D32F2F`,"--shiki-dark":`#C792EA`}},` =`),f(`span`,{style:{"--shiki-light":`#22863A`,"--shiki-dark":`#D9F5DD`}},` '`),f(`span`,{style:{"--shiki-light":`#22863A`,"--shiki-dark":`#ECC48D`}},`http://example.com/project/page1`),f(`span`,{style:{"--shiki-light":`#22863A`,"--shiki-dark":`#D9F5DD`}},`'`)]),s(`
`),f(`span`,{class:`line`},[f(`span`,{style:{"--shiki-light":`#C2C3C5`,"--shiki-light-font-style":`inherit`,"--shiki-dark":`#637777`,"--shiki-dark-font-style":`italic`}},`// http://example.com/project/page1/index.html`)]),s(`
`),f(`span`,{class:`line`}),s(`
`),f(`span`,{class:`line`},[f(`span`,{style:{"--shiki-light":`#D32F2F`,"--shiki-dark":`#C792EA`}},`const`),f(`span`,{style:{"--shiki-light":`#1976D2`,"--shiki-light-font-style":`inherit`,"--shiki-dark":`#82AAFF`,"--shiki-dark-font-style":`italic`}},` url2`),f(`span`,{style:{"--shiki-light":`#D32F2F`,"--shiki-dark":`#C792EA`}},` =`),f(`span`,{style:{"--shiki-light":`#22863A`,"--shiki-dark":`#D9F5DD`}},` '`),f(`span`,{style:{"--shiki-light":`#22863A`,"--shiki-dark":`#ECC48D`}},`http://example.com/project/page2`),f(`span`,{style:{"--shiki-light":`#22863A`,"--shiki-dark":`#D9F5DD`}},`'`)]),s(`
`),f(`span`,{class:`line`},[f(`span`,{style:{"--shiki-light":`#C2C3C5`,"--shiki-light-font-style":`inherit`,"--shiki-dark":`#637777`,"--shiki-dark-font-style":`italic`}},`// http://example.com/project/page2/index.html`)]),s(`
`),f(`span`,{class:`line`}),s(`
`),f(`span`,{class:`line`},[f(`span`,{style:{"--shiki-light":`#D32F2F`,"--shiki-dark":`#C792EA`}},`const`),f(`span`,{style:{"--shiki-light":`#1976D2`,"--shiki-light-font-style":`inherit`,"--shiki-dark":`#82AAFF`,"--shiki-dark-font-style":`italic`}},` url3`),f(`span`,{style:{"--shiki-light":`#D32F2F`,"--shiki-dark":`#C792EA`}},` =`),f(`span`,{style:{"--shiki-light":`#22863A`,"--shiki-dark":`#D9F5DD`}},` '`),f(`span`,{style:{"--shiki-light":`#22863A`,"--shiki-dark":`#ECC48D`}},`http://example.com/project/page1/subpage2`),f(`span`,{style:{"--shiki-light":`#22863A`,"--shiki-dark":`#D9F5DD`}},`'`)]),s(`
`),f(`span`,{class:`line`},[f(`span`,{style:{"--shiki-light":`#C2C3C5`,"--shiki-light-font-style":`inherit`,"--shiki-dark":`#637777`,"--shiki-dark-font-style":`italic`}},`// http://example.com/project/page1/subpage2/index.html`)]),s(`
`),f(`span`,{class:`line`})])],-1),d[103]||=f(`h4`,{id:`step%202`},[s(`step 2`),f(`a`,{name:`step%202`,class:`headerlink`,href:`#step%202`})],-1),d[104]||=f(`p`,null,`第二步，在服务器的对应目录下提供对应的 HTML 文档。 但很多时候我们并没有需求为每个路由页面提供 HTML 文档，这时候去访问一个前端路由而后端没提供文档时会出现 404，这不是我们想要看到的。因为这个路由页面是由前端渲染、在前端是存在的。 这时候就要做一个处理，就是常说的 Nginx 重定向（以 Nginx 为例），表示该路由后端处理不了，交给前端处理。`,-1),d[105]||=f(`pre`,{class:`shiki shiki-themes min-light night-owl`,style:{"--shiki-light":`#24292eff`,"--shiki-dark":`#d6deeb`,"--shiki-light-bg":`#ffffff`,"--shiki-dark-bg":`#011627`},tabindex:`0`},[f(`code`,null,[f(`span`,{class:`line`},[f(`span`,{style:{"--shiki-light":`#6F42C1`,"--shiki-light-font-style":`inherit`,"--shiki-dark":`#82AAFF`,"--shiki-dark-font-style":`italic`}},`location`),f(`span`,{style:{"--shiki-light":`#2B5581`,"--shiki-dark":`#ECC48D`}},` /project`),f(`span`,{style:{"--shiki-light":`#2B5581`,"--shiki-dark":`#ECC48D`}},` {`)]),s(`
`),f(`span`,{class:`line`},[f(`span`,{style:{"--shiki-light":`#6F42C1`,"--shiki-light-font-style":`inherit`,"--shiki-dark":`#82AAFF`,"--shiki-dark-font-style":`italic`}},`  try_files`),f(`span`,{style:{"--shiki-light":`#24292EFF`,"--shiki-dark":`#C5E478`}},` $uri`),f(`span`,{style:{"--shiki-light":`#24292EFF`,"--shiki-dark":`#C5E478`}},` $uri`),f(`span`,{style:{"--shiki-light":`#2B5581`,"--shiki-dark":`#ECC48D`}},`/`),f(`span`,{style:{"--shiki-light":`#2B5581`,"--shiki-dark":`#ECC48D`}},` index.html`),f(`span`,{style:{"--shiki-light":`#24292EFF`,"--shiki-dark":`#D6DEEB`}},`;`)]),s(`
`),f(`span`,{class:`line`},[f(`span`,{style:{"--shiki-light":`#24292EFF`,"--shiki-dark":`#D6DEEB`}},`}`)])])],-1),d[106]||=f(`p`,null,[f(`img`,{alt:`5c224d3bc4ff9e2b4d69960f`,loading:`lazy`,title:`5c224d3bc4ff9e2b4d69960f`,class:`post-image`,src:`https://www.superbed.cn/pic/5c224d3bc4ff9e2b4d69960f`,onerror:`this.onerror=null;this.src='/images/image-error.jpg';`})],-1),d[107]||=f(`h4`,{id:`step%203`},[s(`step 3`),f(`a`,{name:`step%203`,class:`headerlink`,href:`#step%203`})],-1),d[108]||=f(`p`,null,`第三步，开发时应该怎么处理？总不能手动写好这些 HTML 文档再上传到服务器。介绍两种方式，都是基于 Webpack 进行打包生成：`,-1),d[109]||=f(`h5`,{id:`3.1`},[s(`3.1`),f(`a`,{name:`3.1`,class:`headerlink`,href:`#3.1`})],-1),f(`p`,null,[d[14]||=s(`使用多个 `,-1),a(c,{target:`_blank`,href:`https://github.com/jantimon/html-webpack-plugin`},{default:o(()=>[...d[13]||=[s(`html-webpack-plugin`,-1)]]),_:1}),d[15]||=s(`，因为我们的项目分为了多个 React 项目，每个项目的页面不会很多，因此使用多个 `,-1),d[16]||=f(`code`,null,`html-webpack-plugin`,-1),d[17]||=s(` 没有打包性能的问题。`,-1)]),d[110]||=f(`pre`,{class:`shiki shiki-themes min-light night-owl`,style:{"--shiki-light":`#24292eff`,"--shiki-dark":`#d6deeb`,"--shiki-light-bg":`#ffffff`,"--shiki-dark-bg":`#011627`},tabindex:`0`},[f(`code`,null,[f(`span`,{class:`line`},[f(`span`,{style:{"--shiki-light":`#D32F2F`,"--shiki-dark":`#C792EA`}},`const`),f(`span`,{style:{"--shiki-light":`#1976D2`,"--shiki-light-font-style":`inherit`,"--shiki-dark":`#82AAFF`,"--shiki-dark-font-style":`italic`}},` routesCfg`),f(`span`,{style:{"--shiki-light":`#D32F2F`,"--shiki-dark":`#C792EA`}},` =`),f(`span`,{style:{"--shiki-light":`#24292EFF`,"--shiki-dark":`#D6DEEB`}},` [`)]),s(`
`),f(`span`,{class:`line`},[f(`span`,{style:{"--shiki-light":`#24292EFF`,"--shiki-dark":`#D6DEEB`}},`  {`)]),s(`
`),f(`span`,{class:`line`},[f(`span`,{style:{"--shiki-light":`#24292EFF`,"--shiki-light-font-style":`inherit`,"--shiki-dark":`#D6DEEB`,"--shiki-dark-font-style":`italic`}},`    path`),f(`span`,{style:{"--shiki-light":`#D32F2F`,"--shiki-dark":`#D6DEEB`}},`:`),f(`span`,{style:{"--shiki-light":`#22863A`,"--shiki-dark":`#D9F5DD`}},` '`),f(`span`,{style:{"--shiki-light":`#22863A`,"--shiki-dark":`#ECC48D`}},`/user`),f(`span`,{style:{"--shiki-light":`#22863A`,"--shiki-dark":`#D9F5DD`}},`'`),f(`span`,{style:{"--shiki-light":`#212121`,"--shiki-dark":`#D6DEEB`}},`,`)]),s(`
`),f(`span`,{class:`line`},[f(`span`,{style:{"--shiki-light":`#24292EFF`,"--shiki-light-font-style":`inherit`,"--shiki-dark":`#D6DEEB`,"--shiki-dark-font-style":`italic`}},`    template`),f(`span`,{style:{"--shiki-light":`#D32F2F`,"--shiki-dark":`#D6DEEB`}},`:`),f(`span`,{style:{"--shiki-light":`#22863A`,"--shiki-dark":`#D9F5DD`}},` '`),f(`span`,{style:{"--shiki-light":`#22863A`,"--shiki-dark":`#ECC48D`}},`./documents/user.html`),f(`span`,{style:{"--shiki-light":`#22863A`,"--shiki-dark":`#D9F5DD`}},`'`)]),s(`
`),f(`span`,{class:`line`},[f(`span`,{style:{"--shiki-light":`#24292EFF`,"--shiki-dark":`#D6DEEB`}},`  }`),f(`span`,{style:{"--shiki-light":`#212121`,"--shiki-dark":`#D6DEEB`}},`,`)]),s(`
`),f(`span`,{class:`line`},[f(`span`,{style:{"--shiki-light":`#24292EFF`,"--shiki-dark":`#D6DEEB`}},`  {`)]),s(`
`),f(`span`,{class:`line`},[f(`span`,{style:{"--shiki-light":`#24292EFF`,"--shiki-light-font-style":`inherit`,"--shiki-dark":`#D6DEEB`,"--shiki-dark-font-style":`italic`}},`    path`),f(`span`,{style:{"--shiki-light":`#D32F2F`,"--shiki-dark":`#D6DEEB`}},`:`),f(`span`,{style:{"--shiki-light":`#22863A`,"--shiki-dark":`#D9F5DD`}},` '`),f(`span`,{style:{"--shiki-light":`#22863A`,"--shiki-dark":`#ECC48D`}},`/user/profile`),f(`span`,{style:{"--shiki-light":`#22863A`,"--shiki-dark":`#D9F5DD`}},`'`),f(`span`,{style:{"--shiki-light":`#212121`,"--shiki-dark":`#D6DEEB`}},`,`)]),s(`
`),f(`span`,{class:`line`},[f(`span`,{style:{"--shiki-light":`#24292EFF`,"--shiki-light-font-style":`inherit`,"--shiki-dark":`#D6DEEB`,"--shiki-dark-font-style":`italic`}},`    template`),f(`span`,{style:{"--shiki-light":`#D32F2F`,"--shiki-dark":`#D6DEEB`}},`:`),f(`span`,{style:{"--shiki-light":`#22863A`,"--shiki-dark":`#D9F5DD`}},` '`),f(`span`,{style:{"--shiki-light":`#22863A`,"--shiki-dark":`#ECC48D`}},`./documents/user.html`),f(`span`,{style:{"--shiki-light":`#22863A`,"--shiki-dark":`#D9F5DD`}},`'`)]),s(`
`),f(`span`,{class:`line`},[f(`span`,{style:{"--shiki-light":`#24292EFF`,"--shiki-dark":`#D6DEEB`}},`  }`),f(`span`,{style:{"--shiki-light":`#212121`,"--shiki-dark":`#D6DEEB`}},`,`)]),s(`
`),f(`span`,{class:`line`},[f(`span`,{style:{"--shiki-light":`#24292EFF`,"--shiki-dark":`#D6DEEB`}},`]`)]),s(`
`),f(`span`,{class:`line`}),s(`
`),f(`span`,{class:`line`},[f(`span`,{style:{"--shiki-light":`#1976D2`,"--shiki-light-font-style":`inherit`,"--shiki-dark":`#7FDBCA`,"--shiki-dark-font-style":`italic`}},`routesCfg`),f(`span`,{style:{"--shiki-light":`#6F42C1`,"--shiki-light-font-style":`inherit`,"--shiki-dark":`#C792EA`,"--shiki-dark-font-style":`italic`}},`.`),f(`span`,{style:{"--shiki-light":`#6F42C1`,"--shiki-light-font-style":`inherit`,"--shiki-dark":`#82AAFF`,"--shiki-dark-font-style":`italic`}},`forEach`),f(`span`,{style:{"--shiki-light":`#24292EFF`,"--shiki-dark":`#D6DEEB`}},`(`),f(`span`,{style:{"--shiki-light":`#24292EFF`,"--shiki-dark":`#D7DBE0`}},`r`),f(`span`,{style:{"--shiki-light":`#D32F2F`,"--shiki-dark":`#C792EA`}},` =>`),f(`span`,{style:{"--shiki-light":`#24292EFF`,"--shiki-dark":`#D6DEEB`}},` {`)]),s(`
`),f(`span`,{class:`line`},[f(`span`,{style:{"--shiki-light":`#1976D2`,"--shiki-light-font-style":`inherit`,"--shiki-dark":`#7FDBCA`,"--shiki-dark-font-style":`italic`}},`  webpackConfig`),f(`span`,{style:{"--shiki-light":`#6F42C1`,"--shiki-light-font-style":`inherit`,"--shiki-dark":`#C792EA`,"--shiki-dark-font-style":`italic`}},`.`),f(`span`,{style:{"--shiki-light":`#1976D2`,"--shiki-light-font-style":`inherit`,"--shiki-dark":`#FAF39F`,"--shiki-dark-font-style":`italic`}},`plugins`),f(`span`,{style:{"--shiki-light":`#6F42C1`,"--shiki-light-font-style":`inherit`,"--shiki-dark":`#C792EA`,"--shiki-dark-font-style":`italic`}},`.`),f(`span`,{style:{"--shiki-light":`#6F42C1`,"--shiki-light-font-style":`inherit`,"--shiki-dark":`#82AAFF`,"--shiki-dark-font-style":`italic`}},`push`),f(`span`,{style:{"--shiki-light":`#24292EFF`,"--shiki-dark":`#D6DEEB`}},`(`)]),s(`
`),f(`span`,{class:`line`},[f(`span`,{style:{"--shiki-light":`#D32F2F`,"--shiki-dark":`#7FDBCA`}},`    new`),f(`span`,{style:{"--shiki-light":`#6F42C1`,"--shiki-light-font-style":`inherit`,"--shiki-dark":`#82AAFF`,"--shiki-dark-font-style":`italic`}},` HtmlWebpackPlugin`),f(`span`,{style:{"--shiki-light":`#24292EFF`,"--shiki-dark":`#D6DEEB`}},`({`)]),s(`
`),f(`span`,{class:`line`},[f(`span`,{style:{"--shiki-light":`#24292EFF`,"--shiki-dark":`#D6DEEB`}},`      filename`),f(`span`,{style:{"--shiki-light":`#D32F2F`,"--shiki-dark":`#D6DEEB`}},`:`),f(`span`,{style:{"--shiki-light":`#22863A`,"--shiki-dark":`#D6DEEB`}}," `"),f(`span`,{style:{"--shiki-light":`#D32F2F`,"--shiki-dark":`#D3423E`}},"${"),f(`span`,{style:{"--shiki-light":`#1976D2`,"--shiki-light-font-style":`inherit`,"--shiki-dark":`#7FDBCA`,"--shiki-dark-font-style":`italic`}},`r`),f(`span`,{style:{"--shiki-light":`#6F42C1`,"--shiki-light-font-style":`inherit`,"--shiki-dark":`#C792EA`,"--shiki-dark-font-style":`italic`}},`.`),f(`span`,{style:{"--shiki-light":`#1976D2`,"--shiki-light-font-style":`inherit`,"--shiki-dark":`#FAF39F`,"--shiki-dark-font-style":`italic`}},`path`),f(`span`,{style:{"--shiki-light":`#6F42C1`,"--shiki-light-font-style":`inherit`,"--shiki-dark":`#C792EA`,"--shiki-dark-font-style":`italic`}},`.`),f(`span`,{style:{"--shiki-light":`#6F42C1`,"--shiki-light-font-style":`inherit`,"--shiki-dark":`#82AAFF`,"--shiki-dark-font-style":`italic`}},`replace`),f(`span`,{style:{"--shiki-light":`#24292EFF`,"--shiki-dark":`#D6DEEB`}},`(`),f(`span`,{style:{"--shiki-light":`#22863A`,"--shiki-dark":`#D6DEEB`}},`/`),f(`span`,{style:{"--shiki-light":`#D32F2F`,"--shiki-light-font-style":`inherit`,"--shiki-dark":`#C792EA`,"--shiki-dark-font-style":`italic`}},`^`),f(`span`,{style:{"--shiki-light":`#22863A`,"--shiki-dark":`#F78C6C`}},`\\/`),f(`span`,{style:{"--shiki-light":`#22863A`,"--shiki-dark":`#D6DEEB`}},`/`),f(`span`,{style:{"--shiki-light":`#212121`,"--shiki-dark":`#D3423E`}},`,`),f(`span`,{style:{"--shiki-light":`#22863A`,"--shiki-dark":`#D6DEEB`}},` ''`),f(`span`,{style:{"--shiki-light":`#24292EFF`,"--shiki-dark":`#D6DEEB`}},`)`),f(`span`,{style:{"--shiki-light":`#D32F2F`,"--shiki-dark":`#D3423E`}},`}`),f(`span`,{style:{"--shiki-light":`#22863A`,"--shiki-dark":`#ECC48D`}},`/index.html`),f(`span`,{style:{"--shiki-light":`#22863A`,"--shiki-dark":`#D6DEEB`}},"`"),f(`span`,{style:{"--shiki-light":`#212121`,"--shiki-dark":`#D6DEEB`}},`,`)]),s(`
`),f(`span`,{class:`line`},[f(`span`,{style:{"--shiki-light":`#24292EFF`,"--shiki-dark":`#D6DEEB`}},`      template`),f(`span`,{style:{"--shiki-light":`#D32F2F`,"--shiki-dark":`#D6DEEB`}},`:`),f(`span`,{style:{"--shiki-light":`#1976D2`,"--shiki-light-font-style":`inherit`,"--shiki-dark":`#7FDBCA`,"--shiki-dark-font-style":`italic`}},` path`),f(`span`,{style:{"--shiki-light":`#6F42C1`,"--shiki-light-font-style":`inherit`,"--shiki-dark":`#C792EA`,"--shiki-dark-font-style":`italic`}},`.`),f(`span`,{style:{"--shiki-light":`#6F42C1`,"--shiki-light-font-style":`inherit`,"--shiki-dark":`#82AAFF`,"--shiki-dark-font-style":`italic`}},`join`),f(`span`,{style:{"--shiki-light":`#24292EFF`,"--shiki-dark":`#D6DEEB`}},`(`),f(`span`,{style:{"--shiki-light":`#24292EFF`,"--shiki-dark":`#D7DBE0`}},`__dirname`),f(`span`,{style:{"--shiki-light":`#212121`,"--shiki-dark":`#D6DEEB`}},`,`),f(`span`,{style:{"--shiki-light":`#1976D2`,"--shiki-light-font-style":`inherit`,"--shiki-dark":`#7FDBCA`,"--shiki-dark-font-style":`italic`}},` r`),f(`span`,{style:{"--shiki-light":`#24292EFF`,"--shiki-light-font-style":`inherit`,"--shiki-dark":`#C792EA`,"--shiki-dark-font-style":`italic`}},`.`),f(`span`,{style:{"--shiki-light":`#24292EFF`,"--shiki-dark":`#BAEBE2`}},`template`),f(`span`,{style:{"--shiki-light":`#24292EFF`,"--shiki-dark":`#D6DEEB`}},`)`),f(`span`,{style:{"--shiki-light":`#212121`,"--shiki-dark":`#D6DEEB`}},`,`)]),s(`
`),f(`span`,{class:`line`},[f(`span`,{style:{"--shiki-light":`#24292EFF`,"--shiki-dark":`#D6DEEB`}},`    })`)]),s(`
`),f(`span`,{class:`line`},[f(`span`,{style:{"--shiki-light":`#24292EFF`,"--shiki-dark":`#D6DEEB`}},`  )`)]),s(`
`),f(`span`,{class:`line`},[f(`span`,{style:{"--shiki-light":`#24292EFF`,"--shiki-dark":`#D6DEEB`}},`})`)])])],-1),d[111]||=f(`p`,null,[f(`img`,{alt:`5c224d3bc4ff9e2b4d699610`,loading:`lazy`,title:`5c224d3bc4ff9e2b4d699610`,class:`post-image`,src:`https://www.superbed.cn/pic/5c224d3bc4ff9e2b4d699610`,onerror:`this.onerror=null;this.src='/images/image-error.jpg';`})],-1),d[112]||=f(`p`,null,`该方式需要手动编写预渲染的内容，但能做到精细的控制。`,-1),d[113]||=f(`p`,null,`另外，有个小问题：如果 publicPath 是相对路径的话，打包结果子目录下的资源引用的路径会有问题。`,-1),d[114]||=f(`h5`,{id:`3.2`},[s(`3.2`),f(`a`,{name:`3.2`,class:`headerlink`,href:`#3.2`})],-1),f(`p`,null,[d[19]||=s(`使用 `,-1),a(c,{target:`_blank`,href:`https://github.com/chrisvfritz/prerender-spa-plugin`},{default:o(()=>[...d[18]||=[s(`prerender-spa-plugin`,-1)]]),_:1}),d[20]||=s(`。提供配置，打包完成后会启动一个本地服务，使用无头浏览器（puppeteer）访问传入配置中的路径，接着抽取页面的文档内容，重新生成新的 HTML 文件。`,-1)]),d[115]||=f(`p`,null,`该方式生成的预渲染内容是页面最终的样式，适合一些静态类型页面的显示，切忌用于生成动态内容的预渲染（比如用户个人信息页面，你肯定不希望打开页面时先显示的是其他人的信息再变成自己的，这个其他人的信息就是在抽取页面内容的时候注入的）。`,-1),d[116]||=f(`p`,null,`当使用 CDN 的时候需要注意了，该插件启动本地服务访问页面时，资源是还没上传至 CDN 的（这还属于 Webpack 的打包流程，一般是在打包流程结束后进行 CDN 上传）。`,-1),d[117]||=f(`p`,null,`此处提供两个思路解决该问题：`,-1),d[118]||=f(`ol`,null,[f(`li`,null,`定制个 Webpack 插件，在该插件前生效，将文件提前上传至 CDN。不要忘了，打包结束后还需要再次上传。`),f(`li`,null,`实现请求拦截，将访问 CDN 的请求劫持到本地相对目录的文件。但是该插件没有暴露 puppeteer 的对象，实现起来会比较困难。`)],-1),d[119]||=f(`h2`,{id:`%E5%85%B6%E4%BB%96%E6%96%B9%E9%9D%A2`},[s(`其他方面`),f(`a`,{name:`%E5%85%B6%E4%BB%96%E6%96%B9%E9%9D%A2`,class:`headerlink`,href:`#%E5%85%B6%E4%BB%96%E6%96%B9%E9%9D%A2`})],-1),d[120]||=f(`ol`,null,[f(`li`,null,`开启 CDN ，加速资源的网络传输；`),f(`li`,null,`首屏列表类页面应控制渲染数量，避免生成用不到（用户还不可见）的节点（有时也会需要预先加载，视具体情况而定）；`),f(`li`,null,`条件允许时，使用图片服务辅助前端的图片显示，做到格式、尺寸、品质的控制；`),f(`li`,null,`设置资源返回的请求头字段，如 cache-control、expires 等，做到资源缓存，加快二次访问；`),f(`li`,null,`考虑 Service Worker 缓存技术的使用`),f(`li`,null,`...`)],-1),d[121]||=f(`p`,null,`以上，是新人对页面加载优化的探索，实际上一定还存在不少可优化、提升用户体验的点，接下来还需要更多的实践。`,-1),d[122]||=f(`hr`,null,null,-1),d[123]||=f(`p`,null,`参考链接 & 相关阅读:`,-1),f(`ul`,null,[f(`li`,null,[a(c,{target:`_blank`,href:`https://zhuanlan.zhihu.com/p/37148975`},{default:o(()=>[...d[21]||=[s(`React 16 加载性能优化指南`,-1)]]),_:1})]),f(`li`,null,[a(c,{target:`_blank`,href:`https://polyfill.io/v2/docs/`},{default:o(()=>[...d[22]||=[s(`polyfill 按需返回`,-1)]]),_:1})]),f(`li`,null,[a(c,{target:`_blank`,href:`https://segmentfault.com/a/1190000012794598`},{default:o(()=>[...d[23]||=[s(`你的 Tree-Shaking 并没什么卵用`,-1)]]),_:1})]),f(`li`,null,[a(c,{target:`_blank`,href:`https://juejin.im/post/5a4dc842518825698e7279a9`},{default:o(()=>[...d[24]||=[s(`Tree-Shaking 性能优化实践 - 原理篇`,-1)]]),_:1})]),f(`li`,null,[a(c,{target:`_blank`,href:`https://juejin.im/post/5a4ed917f265da3e317df515`},{default:o(()=>[...d[25]||=[s(`浏览器页面资源加载过程与优化`,-1)]]),_:1})]),f(`li`,null,[a(c,{target:`_blank`,href:`https://juejin.im/entry/598080226fb9a03c5d535cd5`},{default:o(()=>[...d[26]||=[s(`Chrome 中的 First Meaningful Paint`,-1)]]),_:1})]),f(`li`,null,[a(c,{target:`_blank`,href:`https://developers.google.com/web/fundamentals/performance/critical-rendering-path/`},{default:o(()=>[...d[27]||=[s(`关键渲染路径`,-1)]]),_:1})]),f(`li`,null,[a(c,{target:`_blank`,href:`https://juejin.im/entry/5a111eb7f265da431c6fe51c`},{default:o(()=>[...d[28]||=[s(`服务端渲染 vs 客户端渲染`,-1)]]),_:1})]),f(`li`,null,[a(c,{target:`_blank`,href:`https://tech.meituan.com/first_contentful_paint_practice.html`},{default:o(()=>[...d[29]||=[s(`构建时预渲染：网页首帧优化实践`,-1)]]),_:1})]),f(`li`,null,[a(c,{target:`_blank`,href:`http://taobaofed.org/blog/2016/04/06/optimize-in-tbhome/`},{default:o(()=>[...d[30]||=[s(`淘宝首页性能优化实践`,-1)]]),_:1})]),f(`li`,null,[a(c,{target:`_blank`,href:`https://github.com/camsong/blog/issues/8`},{default:o(()=>[...d[31]||=[s(`精读前后端渲染之争`,-1)]]),_:1})]),f(`li`,null,[a(c,{target:`_blank`,href:`http://www.ruanyifeng.com/blog/2011/03/url_hash.html`},{default:o(()=>[...d[32]||=[s(`URL 的井号`,-1)]]),_:1})])])]),_:1})]),e(x).length?(n(),u(`aside`,{key:0,class:t([e(S).showIndexSidebar?`bg-[#00000080]`:`pointer-events-none`,`fixed z-20 top-0 w-full h-full left-0 overscroll-contain transition-300`,`lg:pointer-events-auto`,`lg:absolute lg:w-auto lg:bg-transparent lg:left-[calc(100%+clamp(6px,17.1875vw-176px,50px))]`]),onClick:d[0]||=(...e)=>l.hideIndexSidebar&&l.hideIndexSidebar(...e)},[f(`nav`,{class:t([`overflow-y-auto text-foreground overscroll-contain bg-background`,`w-74 max-w-4/5 h-full py-8 px-6 rounded-tl-xl rounded-bl-xl`,`absolute top-0 transition-300 right-0`,e(S).showIndexSidebar?`translate-x-0`:`translate-x-full`,`lg:p-0 lg:max-w-44 xl:max-w-50 lg:h-auto lg:max-h-[calc(100vh-130px)] lg:rounded-none`,`lg:sticky lg:top-10 lg:right-auto lg:translate-x-0 lg:bg-transparent lg:ml-0`])},[d[124]||=f(`h2`,{class:`mb-2 font-bold lg:hidden`},`TABLE OF CONTENTS`,-1),a(m,{toc:e(x)},null,8,[`toc`])],2)],2)):i(``,!0)]),d[125]||=f(`hr`,{class:`border-border mt-10`},null,-1),e(b).comments?(n(),u(`div`,y,[a(p)])):i(``,!0)],64))}}),[[`__scopeId`,`data-v-bc1541f8`]]);export{b as default};